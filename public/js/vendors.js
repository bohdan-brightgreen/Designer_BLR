!function(t,e){function i(e,i){var s,r,o,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,r=s.name,e.href&&r&&"map"===s.nodeName.toLowerCase()?(o=t("img[usemap=#"+r+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,s,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(r,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,i)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=e.length?!0:!1,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,r=t.ui[e].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,n,s,r,o){return t.ui.isOverAxis(e,n,r)&&t.ui.isOverAxis(i,s,o)}}))}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(r){}s(e)},t.widget=function(i,n,s){var r,o,a,h,l=i.split(".")[0];i=i.split(".")[1],r=l+"-"+i,s||(s=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[l]=t[l]||{},o=t[l][i],a=t[l][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new a(t,i)},t.extend(a,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),h=new n,h.options=t.widget.extend({},h.options),t.each(s,function(e,i){t.isFunction(i)&&(s[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}())}),a.prototype=t.widget.extend(h,{widgetEventPrefix:o?h.widgetEventPrefix:i},s,{constructor:a,namespace:l,widgetName:i,widgetBaseClass:r,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(i,a)},t.widget.extend=function(i){for(var s,r,o=n.call(arguments,1),a=0,h=o.length;h>a;a++)for(s in o[a])r=o[a][s],o[a].hasOwnProperty(s)&&r!==e&&(i[s]=t.isPlainObject(r)?t.isPlainObject(i[s])?t.widget.extend({},i[s],r):t.widget.extend({},r):r);return i},t.widget.bridge=function(i,s){var r=s.prototype.widgetFullName||i;t.fn[i]=function(o){var a="string"==typeof o,h=n.call(arguments,1),l=this;return o=!a&&h.length?t.widget.extend.apply(null,[o].concat(h)):o,a?this.each(function(){var n,s=t.data(this,r);return s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(n=s[o].apply(s,h),n!==s&&n!==e?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):e):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(o||{})._init():t.data(this,r,new s(o,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetName,this),t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,r,o,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(r=a[i]=t.widget.extend({},this.options[i]),o=0;s.length-1>o;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(i=s.pop(),n===e)return r[i]===e?null:r[i];r[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,s){var r,o=this;"boolean"!=typeof i&&(s=n,n=i,i=!1),s?(n=r=t(n),this.bindings=this.bindings.add(n)):(s=n,n=this.element,r=this.widget()),t.each(s,function(s,a){function h(){return i||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):e}"string"!=typeof a&&(h.guid=a.guid=a.guid||h.guid||t.guid++);var l=s.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,h):n.bind(u,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,r,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&t.effects&&(t.effects.effect[a]||t.uiBackCompat!==!1&&t.effects[a])?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}}),t.uiBackCompat!==!1&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(d.test(t[0])?e/100:1),parseInt(t[1],10)*(d.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var s,r=Math.max,o=Math.abs,a=Math.round,h=/left|center|right/,l=/top|center|bottom/,u=/[\+\-]\d+%?/,c=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(s!==e)return s;var i,n,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),i=o.offsetWidth,r.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),s=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,r="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:s?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var s,d,f,g,m,v=t(e.of),_=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(_),y=v[0],w=(e.collision||"flip").split(" "),x={};return 9===y.nodeType?(d=v.width(),f=v.height(),g={top:0,left:0}):t.isWindow(y)?(d=v.width(),f=v.height(),g={top:v.scrollTop(),left:v.scrollLeft()}):y.preventDefault?(e.at="left top",d=f=0,g={top:y.pageY,left:y.pageX}):(d=v.outerWidth(),f=v.outerHeight(),g=v.offset()),m=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=h.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=h.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",t=u.exec(n[0]),i=u.exec(n[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?m.left+=d:"center"===e.at[0]&&(m.left+=d/2),"bottom"===e.at[1]?m.top+=f:"center"===e.at[1]&&(m.top+=f/2),s=i(x.at,d,f),m.left+=s[0],m.top+=s[1],this.each(function(){var h,l,u=t(this),c=u.outerWidth(),p=u.outerHeight(),y=n(this,"marginLeft"),C=n(this,"marginTop"),P=c+y+n(this,"marginRight")+b.width,S=p+C+n(this,"marginBottom")+b.height,k=t.extend({},m),I=i(x.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?k.left-=c:"center"===e.my[0]&&(k.left-=c/2),"bottom"===e.my[1]?k.top-=p:"center"===e.my[1]&&(k.top-=p/2),k.left+=I[0],k.top+=I[1],t.support.offsetFractions||(k.left=a(k.left),k.top=a(k.top)),h={marginLeft:y,marginTop:C},t.each(["left","top"],function(i,n){t.ui.position[w[i]]&&t.ui.position[w[i]][n](k,{targetWidth:d,targetHeight:f,elemWidth:c,elemHeight:p,collisionPosition:h,collisionWidth:P,collisionHeight:S,offset:[s[0]+I[0],s[1]+I[1]],my:e.my,at:e.at,within:_,elem:u})}),t.fn.bgiframe&&u.bgiframe(),e.using&&(l=function(t){var i=g.left-k.left,n=i+d-c,s=g.top-k.top,a=s+f-p,h={target:{element:v,left:g.left,top:g.top,width:d,height:f},element:{element:u,left:k.left,top:k.top,width:c,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};c>d&&d>o(i+n)&&(h.horizontal="center"),p>f&&f>o(s+a)&&(h.vertical="middle"),h.important=r(o(i),o(n))>r(o(s),o(a))?"horizontal":"vertical",e.using.call(this,t,h)}),u.offset(t.extend(k,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,h=s-a,l=a+e.collisionWidth-o-s;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-s,t.left+=h-i):t.left=l>0&&0>=h?s:h>l?s+o-e.collisionWidth:s:h>0?t.left+=h:l>0?t.left-=l:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,h=s-a,l=a+e.collisionHeight-o-s;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-s,t.top+=h-i):t.top=l>0&&0>=h?s:h>l?s+o-e.collisionHeight:s:h>0?t.top+=h:l>0?t.top-=l:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,r=s.offset.left+s.scrollLeft,a=s.width,h=s.isWindow?s.scrollLeft:s.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-h,c=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(i=t.left+d+p+f+e.collisionWidth-a-r,(0>i||o(u)>i)&&(t.left+=d+p+f)):c>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-h,(n>0||c>o(n))&&(t.left+=d+p+f))},top:function(t,e){var i,n,s=e.within,r=s.offset.top+s.scrollTop,a=s.height,h=s.isWindow?s.scrollTop:s.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-h,c=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>u?(n=t.top+p+f+g+e.collisionHeight-a-r,t.top+p+f+g>u&&(0>n||o(u)>n)&&(t.top+=p+f+g)):c>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>c&&(i>0||c>o(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)e.style[r]=n[r];e.appendChild(a),i=o||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=t(a).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",i.removeChild(e)}(),t.uiBackCompat!==!1&&function(t){var i=t.fn.position;t.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var s=n.offset.split(" "),r=n.at.split(" ");return 1===s.length&&(s[1]=s[0]),/^\d/.test(s[0])&&(s[0]="+"+s[0]),/^\d/.test(s[1])&&(s[1]="+"+s[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),i.call(this,t.extend(n,{at:r[0]+s[0]+" "+r[1]+s[1],offset:e}))}}(jQuery)}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],s=!1;n&&(n=n.parentNode);)n==document&&(s=!0);if(!s&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var r=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",e)!==!1&&r._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),n=i[0];if(!n)return;i.offset();var s="hidden"!=t(n).css("overflow");this.containment=[(parseInt(t(n).css("borderLeftWidth"),10)||0)+(parseInt(t(n).css("paddingLeft"),10)||0),(parseInt(t(n).css("borderTopWidth"),10)||0)+(parseInt(t(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t(n).css("borderLeftWidth"),10)||0)-(parseInt(t(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t(n).css("borderTopWidth"),10)||0)-(parseInt(t(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName),r=e.pageX,o=e.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var h=this.relative_container.offset();a=[this.containment[0]+h.left,this.containment[1]+h.top,this.containment[2]+h.left,this.containment[3]+h.top]}else a=this.containment;e.pageX-this.offset.click.left<a[0]&&(r=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(o=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(r=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(o=a[3]+this.offset.click.top)}if(i.grid){var l=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=a&&(l-this.offset.click.top<a[1]||l-this.offset.click.top>a[3])?l-this.offset.click.top<a[1]?l+i.grid[1]:l-i.grid[1]:l;var u=i.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;r=a&&(u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2])?u-this.offset.click.left<a[0]?u+i.grid[0]:u-i.grid[0]:u}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("draggable"),s=n.options,r=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,r))})},stop:function(e,i){var n=t(this).data("draggable"),s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i){var n=t(this).data("draggable"),s=this;t.each(n.sortables,function(){var r=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=o&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(o.instance.element[0],this.instance.element[0])&&(r=!1),
r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),s=t(this).data("draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(e,i){var n=t(this).data("draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("draggable"),n=i.options,s=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){for(var n=t(this).data("draggable"),s=n.options,r=s.snapTolerance,o=i.offset.left,a=o+n.helperProportions.width,h=i.offset.top,l=h+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var c=n.snapElements[u].left,d=c+n.snapElements[u].width,p=n.snapElements[u].top,f=p+n.snapElements[u].height;if(o>c-r&&d+r>o&&h>p-r&&f+r>h||o>c-r&&d+r>o&&l>p-r&&f+r>l||a>c-r&&d+r>a&&h>p-r&&f+r>h||a>c-r&&d+r>a&&l>p-r&&f+r>l){if("inner"!=s.snapMode){var g=r>=Math.abs(p-l),m=r>=Math.abs(f-h),v=r>=Math.abs(c-a),_=r>=Math.abs(d-o);g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left-n.margins.left),_&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left)}var b=g||m||v||_;if("outer"!=s.snapMode){var g=r>=Math.abs(p-h),m=r>=Math.abs(f-l),v=r>=Math.abs(c-o),_=r>=Math.abs(d-a);g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left-n.margins.left),_&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[u].snapping&&(g||m||v||_||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=g||m||v||_||b}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,i=t.makeArray(t(e.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;t(i).each(function(t){this.style.zIndex=n+t}),this[0].style.zIndex=n+i.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),s=t(this).data("draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(e,i){var n=t(this).data("draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;e.length>i;i++)e[i]==this&&e.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var s=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope==n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(e,i,n){if(!i.offset)return!1;var s=(e.positionAbs||e.position.absolute).left,r=s+e.helperProportions.width,o=(e.positionAbs||e.position.absolute).top,a=o+e.helperProportions.height,h=i.offset.left,l=h+i.proportions.width,u=i.offset.top,c=u+i.proportions.height;switch(n){case"fit":return s>=h&&l>=r&&o>=u&&c>=a;case"intersect":return s+e.helperProportions.width/2>h&&l>r-e.helperProportions.width/2&&o+e.helperProportions.height/2>u&&c>a-e.helperProportions.height/2;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,f=t.ui.isOver(p,d,u,h,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=u&&c>=o||a>=u&&c>=a||u>o&&a>c)&&(s>=h&&l>=s||r>=h&&l>=r||h>s&&r>l);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,r=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var o=0;n.length>o;o++)if(!(n[o].options.disabled||e&&!n[o].accept.call(n[o].element[0],e.currentItem||e.element))){for(var a=0;r.length>a;a++)if(r[a]==n[o].element[0]){n[o].proportions.height=0;continue t}n[o].visible="none"!=n[o].element.css("display"),n[o].visible&&("mousedown"==s&&n[o]._activate.call(n[o],i),n[o].offset=n[o].element.offset(),n[o].proportions={width:n[o].element[0].offsetWidth,height:n[o].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=t.ui.intersect(e,this,this.options.tolerance),s=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(s){var r;if(this.options.greedy){var o=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===o});a.length&&(r=t.data(a[0],"droppable"),r.greedyChild="isover"==s?1:0)}r&&"isover"==s&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),r&&"isout"==s&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var s=0;n.length>s;s++){var r=t.trim(n[s]),o="ui-resizable-"+r,a=t('<div class="ui-resizable-handle '+o+'"></div>');a.css({zIndex:i.zIndex}),"se"==r&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(a)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=t(this.handles[i],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(r,s),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var n in this.handles)t(this.handles[n])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,s=this.element.position(),r=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy();var o=e(this.helper.css("left")),a=e(this.helper.css("top"));n.containment&&(o+=t(n.containment).scrollLeft()||0,a+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:a},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:o,top:a},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var h=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==h?this.axis+"-resize":h),r.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var e=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,s=t.pageX-i.left||0,r=t.pageY-i.top||0,o=this._change[n];if(!o)return!1;var a=o.apply(this,[t,s,r]);return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(a=this._updateRatio(a,t)),a=this._respectSize(a,t),this._propagate("resize",t),e.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,n=this;if(this._helper){var s=this._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),o=r&&t.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,h={width:n.helper.width()-a,height:n.helper.height()-o},l=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(t.extend(h,{top:u,left:l})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,s,r,o,a=this.options;o={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>n&&(o.maxWidth=n),o.maxHeight>r&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(t){this.options,this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),n=this.size,s=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==s&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"==s&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t,e){var n=(this.helper,this._vBoundaries),s=(this._aspectRatio||e.shiftKey,this.axis),r=i(t.width)&&n.maxWidth&&n.maxWidth<t.width,o=i(t.height)&&n.maxHeight&&n.maxHeight<t.height,a=i(t.width)&&n.minWidth&&n.minWidth>t.width,h=i(t.height)&&n.minHeight&&n.minHeight>t.height;a&&(t.width=n.minWidth),h&&(t.height=n.minHeight),r&&(t.width=n.maxWidth),o&&(t.height=n.maxHeight);var l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(s),d=/nw|ne|n/.test(s);a&&c&&(t.left=l-n.minWidth),r&&c&&(t.left=l-n.maxWidth),h&&d&&(t.top=u-n.minHeight),o&&d&&(t.top=u-n.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;this._proportionallyResizeElements.length>i;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var s=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],r=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=t.map(s,function(t,e){var i=parseInt(t,10)||0,n=parseInt(r[e],10)||0;return i+n})}n.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var n=t.ui.ie6?1:0,s=t.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("resizable"),s=n.options,r=n.originalSize,o=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},h=function(e,n){t(e).each(function(){var e=t(this),s=t(this).data("resizable-alsoresize"),r={},o=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(a[e]||0);i&&i>=0&&(r[e]=i||null)}),e.css(r)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?h(s.alsoResize):t.each(s.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),n=i.options,s=i._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),o=r&&t.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,h={width:i.size.width-a,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,u&&l?{top:u,left:l}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i=t(this).data("resizable"),n=i.options,s=i.element,r=n.containment,o=r instanceof t?r.get(0):/parent/.test(r)?s.parent().get(0):r;if(o)if(i.containerElement=t(o),/document/.test(r)||r==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var a=t(o),h=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){h[t]=e(a.css("padding"+i))}),i.containerOffset=a.offset(),i.containerPosition=a.position(),i.containerSize={height:a.innerHeight()-h[3],width:a.innerWidth()-h[1]};var l=i.containerOffset,u=i.containerSize.height,c=i.containerSize.width,d=t.ui.hasScroll(o,"left")?o.scrollWidth:c,p=t.ui.hasScroll(o)?o.scrollHeight:u;i.parentData={element:o,left:l.left,top:l.top,width:d,height:p}}},resize:function(e){var i=t(this).data("resizable"),n=i.options,s=(i.containerSize,i.containerOffset),r=(i.size,i.position),o=i._aspectRatio||e.shiftKey,a={top:0,left:0},h=i.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(a=s),r.left<(i._helper?s.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-s.left:i.position.left-a.left),o&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?s.left:0),r.top<(i._helper?s.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-s.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?s.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var l=Math.abs((i._helper?i.offset.left-a.left:i.offset.left-a.left)+i.sizeDiff.width),u=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-s.top)+i.sizeDiff.height),c=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));c&&d&&(l-=i.parentData.left),l+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-l,o&&(i.size.height=i.size.width/i.aspectRatio)),u+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-u,o&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,n=(e.position,e.containerOffset),s=e.containerPosition,r=e.containerElement,o=t(e.helper),a=o.offset(),h=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:h,height:l})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){var i=t(this).data("resizable"),n=i.options,s=i.size,r=i.originalSize,o=i.originalPosition,a=i.axis;n._aspectRatio||e.shiftKey,n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var h=Math.round((s.width-r.width)/(n.grid[0]||1))*(n.grid[0]||1),l=Math.round((s.height-r.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(a)?(i.size.width=r.width+h,i.size.height=r.height+l):/^(ne)$/.test(a)?(i.size.width=r.width+h,i.size.height=r.height+l,i.position.top=o.top-l):/^(sw)$/.test(a)?(i.size.width=r.width+h,i.size.height=r.height+l,i.position.left=o.left-h):(i.size.width=r.width+h,i.size.height=r.height+l,i.position.top=o.top-l,i.position.left=o.left-h)}});var e=function(t){return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=t(e.options.filter,e.element[0]),i.addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var n=this.options;this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().andSelf().each(function(){var n=t.data(this,"selectable-item");if(n){var s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,s=this.opos[0],r=this.opos[1],o=e.pageX,a=e.pageY;if(s>o){var h=o;o=s,s=h}if(r>a){var h=a;a=r,r=h}return this.helper.css({left:s,top:r,width:o-s,height:a-r}),this.selectees.each(function(){var h=t.data(this,"selectable-item");if(h&&h.element!=i.element[0]){var l=!1;"touch"==n.tolerance?l=!(h.left>o||s>h.right||h.top>a||r>h.bottom):"fit"==n.tolerance&&(l=h.left>s&&o>h.right&&h.top>r&&a>h.bottom),l?(h.selected&&(h.$element.removeClass("ui-selected"),h.selected=!1),h.unselecting&&(h.$element.removeClass("ui-unselecting"),h.unselecting=!1),h.selecting||(h.$element.addClass("ui-selecting"),h.selecting=!0,i._trigger("selecting",e,{selecting:h.element}))):(h.selecting&&((e.metaKey||e.ctrlKey)&&h.startselected?(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.$element.addClass("ui-selected"),h.selected=!0):(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.startselected&&(h.$element.addClass("ui-unselecting"),h.unselecting=!0),i._trigger("unselecting",e,{unselecting:h.element
}))),h.selected&&(e.metaKey||e.ctrlKey||h.startselected||(h.$element.removeClass("ui-selected"),h.selected=!1,h.$element.addClass("ui-unselecting"),h.unselecting=!0,i._trigger("unselecting",e,{unselecting:h.element}))))}}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,this.options,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){t.widget("ui.sortable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var s=null;if(t(e.target).parents().each(function(){return t.data(this,n.widgetName+"-item")==n?(s=t(this),!1):void 0}),t.data(e.target,n.widgetName+"-item")==n&&(s=t(e.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(t(this.options.handle,s).find("*").andSelf().each(function(){this==e.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,n){var s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),n!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var s=this.items.length-1;s>=0;s--){var r=this.items[s],o=r.item[0],a=this._intersectsWithPointer(r);if(a&&r.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(e,r),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,h=a+t.height,l=this.offset.click.top,u=this.offset.click.left,c=n+l>a&&h>n+l&&e+u>r&&o>e+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?c:e+this.helperProportions.width/2>r&&o>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&h>s-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=i&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return s?this.floating?o&&"right"==o||"down"==r?2:1:r&&("down"==r?2:1):!1},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&n||"left"==r&&!n:s&&("down"==s&&i||"up"==s&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],n=[],s=this._connectWith();if(s&&e)for(var r=s.length-1;r>=0;r--)for(var o=t(s[r]),a=o.length-1;a>=0;a--){var h=t.data(o[a],this.widgetName);h&&h!=this&&!h.options.disabled&&n.push([t.isFunction(h.options.items)?h.options.items.call(h.element):t(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}n.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=n.length-1;r>=0;r--)n[r][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]==t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,n=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var r=s.length-1;r>=0;r--)for(var o=t(s[r]),a=o.length-1;a>=0;a--){var h=t.data(o[a],this.widgetName);h&&h!=this&&!h.options.disabled&&(n.push([t.isFunction(h.options.items)?h.options.items.call(h.element[0],e,{item:this.currentItem}):t(h.options.items,h.element),h]),this.containers.push(h))}for(var r=n.length-1;r>=0;r--)for(var l=n[r][1],u=n[r][0],a=0,c=u.length;c>a;a++){var d=t(u[a]);d.data(this.widgetName+"-item",l),i.push({item:d,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item;e||(n.width=s.outerWidth(),n.height=s.outerHeight());var r=s.offset();n.left=r.left,n.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){e=e||this;var i=e.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=t(document.createElement(e.currentItem[0].nodeName)).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(t,s){(!n||i.forcePlaceholderSize)&&(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){for(var i=null,n=null,s=this.containers.length-1;s>=0;s--)if(!t.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(i&&t.contains(this.containers[s].element[0],i.element[0]))continue;i=this.containers[s],n=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",e,this._uiHash(this)),this.containers[s].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var r=1e4,o=null,a=this.containers[n].floating?"left":"top",h=this.containers[n].floating?"width":"height",l=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(t.contains(this.containers[n].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var c=this.items[u].item.offset()[a],d=!1;Math.abs(c-l)>Math.abs(c+this.items[u][h]-l)&&(d=!0,c+=this.items[u][h]),r>Math.abs(c-l)&&(r=Math.abs(c-l),o=this.items[u],this.direction=d?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[n].element,!0),this._trigger("change",e,this._uiHash()),this.containers[n]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],n=t(e.containment).offset(),s="hidden"!=t(i).css("overflow");this.containment=[n.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var r=e.pageX,o=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3])?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a;var h=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(h-this.offset.click.left<this.containment[0]||h-this.offset.click.left>this.containment[2])?h-this.offset.click.left<this.containment[0]?h+i.grid[0]:h-i.grid[0]:h}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s==this.counter&&this.refreshPositions(!n)})},_clear:function(e,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)("auto"==this._storedCSS[s]||"static"==this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(var s=this.containers.length-1;s>=0;s--)i||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t){var e,i,n,s,r="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,n=e.form,s=t([]);return i&&(s=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),s};t.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,c=u?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(c)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),u&&(this.element.bind("change"+this.eventNamespace,function(){s||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(s=!1,i=t.pageX,n=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(i!==t.pageX||n!==t.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||s?!1:(t(this).toggleClass("ui-state-active"),void o.buttonElement.attr("aria-pressed",o.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,void o.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+o+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(a),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}}),t.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)
},this.options.title=this.options.title||this.originalTitle;var n,s,r,o,a,h=this,l=this.options,u=l.title||"&#160;";n=(this.uiDialog=t("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(e){l.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(h.close(e),e.preventDefault())}).mousedown(function(t){h.moveToTop(!1,t)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(n),s=(this.uiDialogTitlebar=t("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){n.focus()}).prependTo(n),r=t("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(t){t.preventDefault(),h.close(t)}).appendTo(s),(this.uiDialogTitlebarCloseText=t("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(r),o=t("<span>").uniqueId().addClass("ui-dialog-title").html(u).prependTo(s),a=(this.uiDialogButtonPane=t("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=t("<div>")).addClass("ui-dialog-buttonset").appendTo(a),n.attr({role:"dialog","aria-labelledby":o.attr("id")}),s.find("*").add(s).disableSelection(),this._hoverable(r),this._focusable(r),l.draggable&&t.fn.draggable&&this._makeDraggable(),l.resizable&&t.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,t.fn.bgiframe&&n.bgiframe(),this._on(n,{keydown:function(i){if(l.modal&&i.keyCode===t.ui.keyCode.TAB){var s=t(":tabbable",n),r=s.filter(":first"),o=s.filter(":last");return i.target!==o[0]||i.shiftKey?i.target===r[0]&&i.shiftKey?(o.focus(1),!1):e:(r.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var t,e=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(e){var i,n,s=this;return this._isOpen&&!1!==this._trigger("beforeClose",e)?(this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",e)}):(this.uiDialog.hide(),this._trigger("close",e)),t.ui.dialog.overlay.resize(),this.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(n=t(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),t.ui.dialog.maxZ=i),this):void 0},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var n,s=this.options;return s.modal&&!e||!s.stack&&!s.modal?this._trigger("focus",i):(s.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=s.zIndex),this.overlay&&(t.ui.dialog.maxZ+=1,t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ,this.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},t.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",t.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var e,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new t.ui.dialog.overlay(this):null,this.moveToTop(!0),e=this.element.find(":tabbable"),e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=n)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(e){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(n=!0)}),n?(t.each(e,function(e,n){var s,r;n=t.isFunction(n)?{click:n,text:e}:n,n=t.extend({type:"button"},n),r=n.click,n.click=function(){r.apply(i.element[0],arguments)},s=t("<button></button>",n).appendTo(i.uiButtonSet),t.fn.button&&s.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,r){n.position=[r.position.left-i.document.scrollLeft(),r.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",s,e(r)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var s=this,r=this.options,o=this.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:a,start:function(e,i){t(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",e,n(i))},resize:function(t,e){s._trigger("resize",t,n(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),r.height=t(this).height(),r.width=t(this).width(),s._trigger("resizeStop",e,n(i)),t.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,n=[],s=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(n=e.split?e.split(" "):[e[0],e[1]],1===n.length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(s[t]=n[t],n[t]=e)}),e={my:n[0]+(0>s[0]?s[0]:"+"+s[0])+" "+n[1]+(0>s[1]?s[1]:"+"+s[1]),at:n.join(" ")}),e=t.extend({},t.ui.dialog.prototype.options.position,e)):e=t.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(e),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,r={},o=!1;t.each(e,function(t,e){i._setOption(t,e),t in n&&(o=!0),t in s&&(r[t]=e)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,n){var s,r,o=this.uiDialog;switch(e){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":s=o.is(":data(draggable)"),s&&!n&&o.draggable("destroy"),!s&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":r=o.is(":data(resizable)"),r&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),r||n===!1||this._makeResizable(n);break;case"title":t(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(e,n)},_size:function(){var e,i,n,s=this.options,r=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),i=Math.max(0,s.minHeight-e),"auto"===s.height?t.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),r||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(s.height-e,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(i){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(i){return t(i.target).zIndex()<t.ui.dialog.overlay.maxZ?!1:e})},1),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||t("<div>").addClass("ui-widget-overlay");return t(document).bind("keydown.dialog-overlay",function(e){var s=t.ui.dialog.overlay.instances;0!==s.length&&s[s.length-1]===n&&i.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(i.close(e),e.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),t.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(e){var i=t.inArray(e,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),t.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>e?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>e?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this._value():(this._setOption("value",t),this)},_setOption:function(t,e){"value"===t&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(t,e)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,n,s=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(s.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),s.range&&(s.range===!0&&(s.values||(s.values=[this._valueMin(),this._valueMin()]),s.values.length&&2!==s.values.length&&(s.values=[s.values[0],s.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===s.range||"max"===s.range?" ui-slider-range-"+s.range:""))),n=s.values&&s.values.length||1,i=r.length;n>i;i++)a.push(o);this.handles=r.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).mouseenter(function(){s.disabled||t(this).addClass("ui-state-hover")}).mouseleave(function(){t(this).removeClass("ui-state-hover")}).focus(function(){s.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)}),this._on(this.handles,{keydown:function(i){var n,s,r,o,a=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(o=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-o)}this._slide(i,a,r)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,r,o,a,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-u.values(e));s>i&&(s=i,r=t(this),o=e)}),c.range===!0&&this.values(1)===c.min&&(o+=1,r=t(this.handles[o])),a=this._start(e,o),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),h=r.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-r.width()/2,top:e.pageY-h.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),r=this._valueMin()+n*s,this._trimAlignValue(r)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,r;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(s=this.values(),s[e]=i,r=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),r!==!1&&this.values(e,i,!0))):i!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:i}),r!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch(t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,r,o=this.options.range,a=this.options,h=this,l=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((h.values(n)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](u,a.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===n&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),i=r!==s?100*((n-s)/(r-s)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))}})}(jQuery),function(t,e){function i(){return++s}function n(t){return t.hash.length>1&&t.href.replace(r,"")===location.href.replace(r,"").replace(/\s/g,"%20")}var s=0,r=/#.*$/;t.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var i=this,n=this.options,s=n.active,r=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===s&&(r&&this.tabs.each(function(i,n){return t(n).attr("aria-controls")===r?(s=i,!1):e}),null===s&&(s=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===s||-1===s)&&(s=this.tabs.length?0:!1)),s!==!1&&(s=this.tabs.index(this.tabs.eq(s)),-1===s&&(s=n.collapsible?!1:0)),n.active=s,!n.collapsible&&n.active===!1&&this.anchors.length&&(n.active=0),t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return i.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):t(),this._refresh(),this.active.length&&this.load(n.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var n=t(this.document[0].activeElement).closest("li"),s=this.tabs.index(n),r=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:r=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(s),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),e;default:return}i.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,r),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function n(){return e>s&&(e=0),0>e&&(e=s),e}for(var s=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,s){var r,o,a,h=t(s).uniqueId().attr("id"),l=t(s).closest("li"),u=l.attr("aria-controls");n(s)?(r=s.hash,o=e.element.find(e._sanitizeSelector(r))):(a=e._tabId(l),r="#"+a,o=e.element.find(r),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":r.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)e===!0||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n,s=this.element.parent();"fill"===e?(t.support.minHeight||(n=s.css("overflow"),s.css("overflow","hidden")),i=s.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),n&&s.css("overflow",n),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),r=s.closest("li"),o=r[0]===n[0],a=o&&i.collapsible,h=a?t():this._getPanelForTab(r),l=n.length?this._getPanelForTab(n):t(),u={oldTab:n,oldPanel:l,newTab:a?t():r,newPanel:h};e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=a?!1:this.tabs.index(r),this.active=o?t():r,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(r),e),this._toggle(e,u))},_toggle:function(e,i){function n(){r.running=!1,r._trigger("activate",e,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&r.options.show?r._show(o,r.options.show,n):(o.show(),n())}var r=this,o=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&a.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===e?n=!1:(i=this._getIndex(i),n=t.isArray(n)?t.map(n,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===e)n=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,n))return;n=t.isArray(n)?t.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(e,i){e=this._getIndex(e);var s=this,r=this.tabs.eq(e),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),h={
tab:r,panel:a};n(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),s._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&s.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,r){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:r},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&(t.ui.tabs.prototype._ui=function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},t.widget("ui.tabs",t.ui.tabs,{url:function(t,e){this.anchors.eq(t).attr("href",e)}}),t.widget("ui.tabs",t.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var i=this;this._on({tabsbeforeload:function(n,s){return t.data(s.tab[0],"cache.tabs")?(n.preventDefault(),e):(s.jqXHR.success(function(){i.options.cache&&t.data(s.tab[0],"cache.tabs",!0)}),e)}})},_ajaxSettings:function(e,i,n){var s=this.options.ajaxOptions;return t.extend({},s,{error:function(t,e){try{s.error(t,e,n.tab.closest("li").index(),n.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(t,e){"cache"===t&&e===!1&&this.anchors.removeData("cache.tabs"),this._super(t,e)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(t){this.anchors.eq(t).removeData("cache.tabs"),this._superApply(arguments)}}),t.widget("ui.tabs",t.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),t.widget("ui.tabs",t.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(t,e){if(t.target===this.element[0]&&this.options.spinner){var i=e.tab.find("span"),n=i.html();i.html(this.options.spinner),e.jqXHR.complete(function(){i.html(n)})}}})}}),t.widget("ui.tabs",t.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var i,n=this.options;(e&&n.disabled===!0||t.isArray(n.disabled)&&-1!==t.inArray(e,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]))},disable:function(e){var i,n=this.options;(e&&n.disabled===!1||t.isArray(n.disabled)&&-1===t.inArray(e,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),t.widget("ui.tabs",t.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,s){s===e&&(s=this.anchors.length);var r,o,a=this.options,h=t(a.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),l=i.indexOf("#")?this._tabId(h):i.replace("#","");return h.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),h.attr("aria-controls",l),r=s>=this.tabs.length,o=this.element.find("#"+l),o.length||(o=this._createPanel(l),r?s>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[s])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),r?h.appendTo(this.tablist):h.insertBefore(this.tabs[s]),a.disabled=t.map(a.disabled,function(t){return t>=s?++t:t}),this.refresh(),1===this.tabs.length&&a.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[s],this.panels[s])),this},remove:function(e){e=this._getIndex(e);var i=this.options,n=this.tabs.eq(e).remove(),s=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(e+(this.anchors.length>e+1?1:-1)),i.disabled=t.map(t.grep(i.disabled,function(t){return t!==e}),function(t){return t>=e?--t:t}),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],s[0])),this}}),t.widget("ui.tabs",t.ui.tabs,{length:function(){return this.anchors.length}}),t.widget("ui.tabs",t.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){var n=e.is("li")?e.find("a[href]"):e;return n=n[0],t(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),t.widget("ui.tabs",t.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return t(this.options.panelTemplate).attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),t.widget("ui.tabs",t.ui.tabs,{_create:function(){var t=this.options;null===t.active&&t.selected!==e&&(t.active=-1===t.selected?!1:t.selected),this._super(),t.selected=t.active,t.selected===!1&&(t.selected=-1)},_setOption:function(t,e){if("selected"!==t)return this._super(t,e);var i=this.options;this._super("active",-1===e?!1:e),i.selected=i.active,i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),t.widget("ui.tabs",t.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(t,e,i){var n,s,r=this._superApply(arguments);return r?("beforeActivate"===t?(n=i.newTab.length?i.newTab:i.oldTab,s=i.newPanel.length?i.newPanel:i.oldPanel,r=this._super("select",e,{tab:n.find(".ui-tabs-anchor")[0],panel:s[0],index:n.closest("li").index()})):"activate"===t&&i.newTab.length&&(r=this._super("show",e,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),r):!1}}),t.widget("ui.tabs",t.ui.tabs,{select:function(t){if(t=this._getIndex(t),-1===t){if(!this.options.collapsible||-1===this.options.selected)return;t=this.options.selected}this.anchors.eq(t).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;t.widget("ui.tabs",t.ui.tabs,{options:{cookie:null},_create:function(){var t,e=this.options;null==e.active&&e.cookie&&(t=parseInt(this._cookie(),10),-1===t&&(t=!1),e.active=t),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];return arguments.length&&(n.push(i===!1?-1:i),n.push(this.options.cookie)),t.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),t.widget("ui.tabs",t.ui.tabs,{_trigger:function(e,i,n){var s=t.extend({},n);return"load"===e&&(s.panel=s.panel[0],s.tab=s.tab.find(".ui-tabs-anchor")[0]),this._super(e,i,s)}}),t.widget("ui.tabs",t.ui.tabs,{options:{fx:null},_getFx:function(){var e,i,n=this.options.fx;return n&&(t.isArray(n)?(e=n[0],i=n[1]):e=i=n),n?{show:i,hide:e}:null},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&h.show?o.animate(h.show,h.show.duration,function(){n()}):(o.show(),n())}var r=this,o=i.newPanel,a=i.oldPanel,h=this._getFx();return h?(r.running=!0,a.length&&h.hide?a.animate(h.hide,h.hide.duration,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),e):this._super(t,i)}}))}(jQuery),function(t){function e(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(i,n);-1!==s&&n.splice(s,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}var n=0;t.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return t(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0)}),this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,r=e?e.type:null;return"string"==typeof n?this._open(e,t,n):(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&s._delay(function(){e&&(e.type=r),this._open(e,t,i)})}),void(i&&this._open(e,t,i)))},_open:function(i,n,s){function r(t){l.of=t,o.is(":hidden")||o.position(l)}var o,a,h,l=t.extend({},this.options.position);if(s){if(o=this._find(n),o.length)return void o.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),e(n,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:r}),r(i)):o.position(t.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=setInterval(function(){o.is(":visible")&&(r(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:o}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(e){var n=this,s=t(e?e.currentTarget:this.element),r=this._find(s);this.closing||(s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),r.stop(!0),this._hide(r,this.options.hide,function(){n._removeTooltip(t(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:r}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+n++,s=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),t.fn.bgiframe&&s.bgiframe(),this.tooltips[i]=e,s},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.effects||function(t,e){var i=t.uiBackCompat!==!1,n="ui-effects-";t.effects={effect:{}},function(e,i){function n(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function s(t){var n=u(),s=n._rgba=[];return t=t.toLowerCase(),g(l,function(e,r){var o,a=r.re.exec(t),h=a&&r.parse(a),l=r.space||"rgba";return h?(o=n[l](h),n[c[l].cache]=o[c[l].cache],s=n._rgba=o._rgba,!1):i}),s.length?("0,0,0,0"===s.join()&&e.extend(s,o.transparent),n):o[t]}function r(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),h=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},f=e("<p>")[0],g=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,g(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(r,a,h,l){if(r===i)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=i);var d=this,p=e.type(r),f=this._rgba=[];return a!==i&&(r=[r,a,h,l],p="array"),"string"===p?this.parse(s(r)||o._default):"array"===p?(g(c.rgba.props,function(t,e){f[e.idx]=n(r[e.idx],e)}),this):"object"===p?(r instanceof u?g(c,function(t,e){r[e.cache]&&(d[e.cache]=r[e.cache].slice())}):g(c,function(e,i){var s=i.cache;g(i.props,function(t,e){if(!d[s]&&i.to){if("alpha"===t||null==r[t])return;d[s]=i.to(d._rgba)}d[s][e.idx]=n(r[t],e,!0)}),d[s]&&0>t.inArray(null,d[s].slice(0,3))&&(d[s][3]=1,i.from&&(d._rgba=i.from(d[s])))}),this):i},is:function(t){var e=u(t),n=!0,s=this;return g(c,function(t,r){var o,a=e[r.cache];return a&&(o=s[r.cache]||r.to&&r.to(s._rgba)||[],g(r.props,function(t,e){return null!=a[e.idx]?n=a[e.idx]===o[e.idx]:i})),n}),n},_space:function(){var t=[],e=this;return g(c,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=u(t),s=i._space(),r=c[s],o=0===this.alpha()?u("transparent"):this,a=o[r.cache]||r.to(o._rgba),h=a.slice();return i=i[r.cache],g(r.props,function(t,s){var r=s.idx,o=a[r],l=i[r],u=d[s.type]||{};null!==l&&(null===o?h[r]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[r]=n((l-o)*e+o,s)))}),this[s](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=u(t)._rgba;return u(e.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,r=t[2]/255,o=t[3],a=Math.max(n,s,r),h=Math.min(n,s,r),l=a-h,u=a+h,c=.5*u;return e=h===a?0:n===a?60*(s-r)/l+360:s===a?60*(r-n)/l+120:60*(n-s)/l+240,i=0===c||1===c?c:.5>=c?l/u:l/(2-u),[Math.round(e)%360,i,c,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],s=t[3],o=.5>=n?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(255*r(a,o,e+1/3)),Math.round(255*r(a,o,e)),Math.round(255*r(a,o,e-1/3)),s]},g(c,function(t,s){var r=s.props,o=s.cache,a=s.to,l=s.from;u.fn[t]=function(t){if(a&&!this[o]&&(this[o]=a(this._rgba)),t===i)return this[o].slice();var s,h=e.type(t),c="array"===h||"object"===h?t:arguments,d=this[o].slice();return g(r,function(t,e){var i=c["object"===h?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),l?(s=u(l(d)),s[o]=d,s):u(d)},g(r,function(i,n){u.fn[i]||(u.fn[i]=function(s){var r,o=e.type(s),a="alpha"===i?this._hsla?"hsla":"rgba":t,l=this[a](),u=l[n.idx];return"undefined"===o?u:("function"===o&&(s=s.call(this,u),o=e.type(s)),null==s&&n.empty?this:("string"===o&&(r=h.exec(s),r&&(s=u+parseFloat(r[2])*("+"===r[1]?1:-1))),l[n.idx]=s,this[a](l)))})})}),g(a,function(t,i){e.cssHooks[i]={set:function(t,n){var r,o,a="";if("string"!==e.type(n)||(r=s(n))){if(n=u(r||n),!p.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&o&&o.style;)try{a=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=u(t.elem,i),t.end=u(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return g(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var e,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)e=n[i],"string"==typeof n[e]&&(s[t.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(s[e]=n[e]);return s}function n(e,i){var n,s,o={};for(n in i)s=i[n],e[n]!==s&&(r[n]||(t.fx.step[n]||!isNaN(parseFloat(s)))&&(o[n]=s));return o}var s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,r,o,a){var h=t.speed(r,o,a);return this.queue(function(){var r,o=t(this),a=o.attr("class")||"",l=h.children?o.find("*").andSelf():o;l=l.map(function(){var e=t(this);return{el:e,start:i.call(this)}}),r=function(){t.each(s,function(t,i){e[i]&&o[i+"Class"](e[i])})},r(),l=l.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",a),l=l.map(function(){var e=this,i=t.Deferred(),n=jQuery.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,l.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,n,s){return i?t.effects.animateClass.call(this,{add:e},i,n,s):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,n,s){return i?t.effects.animateClass.call(this,{remove:e},i,n,s):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,n,s,r,o){return"boolean"==typeof n||n===e?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,r,o):this._toggleClass(i,n):t.effects.animateClass.call(this,{toggle:i},n,s,r)},switchClass:function(e,i,n,s,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,r)}})}(),function(){function s(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function r(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?!1:i&&t.effects[e]?!1:!0}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var i=0;e.length>i;i++)null!==e[i]&&t.data(n+e[i],t[0].style[e[i]])},restore:function(t,i){var s,r;for(r=0;i.length>r;r++)null!==i[r]&&(s=t.data(n+i[r]),s===e&&(s=""),t.css(i[r],s))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(o){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var r=e.cssUnit(i);r[0]>0&&(s[i]=r[0]*n+r[1])}),s}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(r)&&r.call(s[0]),t.isFunction(e)&&e()}var s=t(this),r=n.complete,o=n.mode;(s.is(":hidden")?"hide"===o:"show"===o)?i():a.call(s[0],n,i)}var n=s.apply(this,arguments),r=n.mode,o=n.queue,a=t.effects.effect[n.effect],h=!a&&i&&t.effects[n.effect];return t.fx.off||!a&&!h?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):a?o===!1?this.each(e):this.queue(o||"fx",e):h.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:t.fn.show,show:function(t){if(r(t))return this._show.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(r(t))return this._hide.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(r(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var n,s,r,o=t(this),a=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(o,e.mode||"effect"),l="hide"===h,u="show"===h,c=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(u||l?1:0),g=e.duration/f,m=e.easing,v="up"===c||"down"===c?"top":"left",_="up"===c||"left"===c,b=o.queue(),y=b.length;for((u||l)&&a.push("opacity"),t.effects.save(o,a),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,o.css("opacity",0).css(v,_?2*-d:2*d).animate(r,g,m)),l&&(d/=Math.pow(2,p-1)),r={},r[v]=0,n=0;p>n;n++)s={},s[v]=(_?"-=":"+=")+d,o.animate(s,g,m).animate(r,g,m),d=l?2*d:d/2;l&&(s={opacity:0},s[v]=(_?"-=":"+=")+d,o.animate(s,g,m)),o.queue(function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var n,s,r,o=t(this),a=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(o,e.mode||"hide"),l="show"===h,u=e.direction||"vertical",c="vertical"===u,d=c?"height":"width",p=c?"top":"left",f={};t.effects.save(o,a),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s="IMG"===o[0].tagName?n:o,r=s[d](),l&&(s.css(d,0),s.css(p,r/2)),f[d]=l?r:0,f[p]=l?0:r/2,s.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var n,s=t(this),r=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(s,e.mode||"hide"),a="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",c={opacity:a?1:0};t.effects.save(s,r),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===l?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(l,"pos"===u?-n:n),c[l]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,r),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var n,s,r=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(r,e.mode||"hide"),h="show"===a,l="hide"===a,u=e.size||15,c=/([0-9]+)%/.exec(u),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(r,o),r.show(),n=t.effects.createWrapper(r).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],c&&(u=parseInt(c[1],10)/100*s[l?0:1]),h&&n.css(d?{height:0,width:u}:{height:u,width:0}),m[f[0]]=h?s[0]:u,v[f[1]]=h?s[1]:0,n.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&r.hide(),t.effects.restore(r,o),t.effects.removeWrapper(r),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],r=t.effects.setMode(n,e.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===r&&(o.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&n.hide(),t.effects.restore(n,s),i()}})}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var n,s=t(this),r=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(s,e.mode||"show"),a="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,c={};t.effects.save(s,r),s.show(),n=e.distance||s["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(l,u?isNaN(n)?"-"+n:-n:n),c[l]=(a?u?"+=":"-=":u?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,r),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,s=n._mouseInit;n._touchStart=function(t){var n=this;!i&&n._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},n._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),s.call(e)}}}(jQuery),function(){var t=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var r=new this;t=!1;for(var o in i)r[o]="function"==typeof i[o]&&"function"==typeof s[o]&&e.test(i[o])?function(t,e){return function(){var i=this._super;this._super=s[t];var n=e.apply(this,arguments);return this._super=i,n}}(o,i[o]):i[o];return n.prototype=r,n.prototype.constructor=n,n.extend=arguments.callee,n}}();var paper=new function(){var Base=new function(){function t(t,e,i){if(p)try{return delete t[e],p(t,e,i)}catch(n){}return(i.get||i.set)&&t.__defineGetter__?(i.get&&t.__defineGetter__(e,i.get),i.set&&t.__defineSetter__(e,i.set)):t[e]=i.value,t}function e(t,e){if(f)try{return f(t,e)}catch(i){}var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null}function i(i,n,s,o,a,h){function u(r,h,u,p){var h=h||(h=e(n,r))&&(h.get?h:h.value),f="function"==typeof h,g=h,m=a||f?h&&h.get?r in i:i[r]:null;if((u||void 0!==h&&n.hasOwnProperty(r))&&(!a||!m)){if(f){if(m&&/\bthis\.base\b/.test(h)){var v=o&&o[r]==m;g=function(){var i=e(this,"base");t(this,"base",{value:v?o[r]:m,configurable:!0});try{return h.apply(this,arguments)}finally{i?t(this,"base",i):delete this.base}},g.toString=function(){return h.toString()},g.valueOf=function(){return h.valueOf()}}c&&0===h.length&&(d=r.match(/^(get|is)(([A-Z])(.*))$/))&&c.push([d[3].toLowerCase()+d[4],d[2]])}g&&!f&&g.get||(g={value:g,writable:!0}),(e(i,r)||{configurable:!0}).configurable&&(g.configurable=!0,g.enumerable=s),t(i,r,g)}!p||!f||a&&p[r]||(p[r]=function(t){return t&&i[r].apply(t,l.call(arguments,1))})}var c,d;if(n){c=[];for(var p in n)n.hasOwnProperty(p)&&!r.test(p)&&u(p,null,!0,h);u("toString"),u("valueOf");for(var f=0,g=c&&c.length;g>f;f++)try{
var d=c[f],m=d[1];u(d[0],{get:i["get"+m]||i["is"+m],set:i["set"+m]},!0)}catch(v){}}return i}function n(t,e,i,n){try{t&&(n||void 0===n&&h(t)?u:c).call(t,e,i=i||t)}catch(s){if(s!==Base.stop)throw s}return i}function s(t){return n(t,function(t,e){this[e]=t},new t.constructor)}var r=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,o=Object.prototype,a=o.toString,o=Array.prototype,h=Array.isArray=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=o.slice,u=o.forEach||function(t,e){for(var i=0,n=this.length;n>i;i++)t.call(e,this[i],i,this)},c=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},d=Object.create||function(t){return{__proto__:t}},p=Object.defineProperty,f=Object.getOwnPropertyDescriptor;return i(function(){},{inject:function(t){if(t){var e=this.prototype,n=Object.getPrototypeOf(e).constructor,s=t.statics===!0?t:t.statics;s!=t&&i(e,t,t.enumerable,n&&n.prototype,t.preserve,t.generics&&this),i(this,s,!0,n,t.preserve)}for(var r=1,o=arguments.length;o>r;r++)this.inject(arguments[r]);return this},extend:function(e){var n=function(){return this.initialize?this.initialize.apply(this,arguments):void 0};return n.prototype=d(this.prototype),n.toString=function(){return(this.prototype.initialize||function(){}).toString()},t(n.prototype,"constructor",{value:n,writable:!0,configurable:!0}),i(n,this,!0),arguments.length?this.inject.apply(n,arguments):n}},!0).inject({inject:function(){for(var t=0,e=arguments.length;e>t;t++)i(this,arguments[t],arguments[t].enumerable);return this},extend:function(){var t=d(this);return t.inject.apply(t,arguments)},each:function(t,e){return n(this,t,e)},clone:function(){return s(this)},statics:{each:n,clone:s,define:t,describe:e,create:function(t){return d(t.prototype)},isPlainObject:function(t){var e=null!==t&&"object"==typeof t&&Object.getPrototypeOf(t);return e&&(e===Object.prototype||e===Base.prototype)},check:function(t){return!(!t&&0!==t)},pick:function(){for(var t=0,e=arguments.length;e>t;t++)if(void 0!==arguments[t])return arguments[t];return null},stop:{}}})};this.Base=Base.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+Base.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?Formatter.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},exportJson:function(t){return Base.exportJson(this,t)},toJSON:function(){return Base.serialize(this)},_set:function(t){if(t&&Base.isPlainObject(t)){for(var e in t)t.hasOwnProperty(e)&&e in this&&(this[e]=t[e]);return!0}},statics:{_classes:{},_uid:0,extend:function(t){var e=this.base.apply(this,arguments);return t._class&&(Base._classes[t._class]=e),e},equals:function(t,e){function i(t,e){for(var i in t)if(t.hasOwnProperty(i)&&"undefined"==typeof e[i])return!1;return!0}if(t==e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0,s=t.length;s>n;n++)if(!Base.equals(t[n],e[n]))return!1;return!0}if(t&&"object"==typeof t&&e&&"object"==typeof e){if(!i(t,e)||!i(e,t))return!1;for(var n in t)if(t.hasOwnProperty(n)&&!Base.equals(t[n],e[n]))return!1;return!0}return!1},read:function(t,e,i,n,s){if(this===Base){var r=this.peek(t,e);return t._index++,t._read=1,r}var o=this.prototype,a=o._readIndex,h=e||a&&t._index||0;i||(i=t.length-h);var l=t[h];return l instanceof this||(o._readNull||s)&&null==l&&1>=i?(a&&(t._index=h+1),l&&n?l.clone():l):(l=Base.create(this),a&&(l._read=!0),l=l.initialize.apply(l,h>0||i<t.length?Array.prototype.slice.call(t,h,h+i):t)||l,a&&(t._index=h+l._read,t._read=l._read,delete l._read),l)},peek:function(t,e){return t[t._index=e||t._index||0]},readAll:function(t,e,i){for(var n,s=[],r=e||0,o=t.length;o>r;r++)s.push(Array.isArray(n=t[r])?this.read(n,0,0,i):this.read(t,r,1,i));return s},readNamed:function(t,e){var i=this.getNamed(t,e);return this.read(null!=i?[i]:t)},getNamed:function(t,e){var i=t[0];return void 0===t._hasObject&&(t._hasObject=1===t.length&&Base.isPlainObject(i)),t._hasObject?e?i[e]:i:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e)},serialize:function(t,e,i,n){e=e||{};var s,r=!n;if(r&&(e.formatter=new Formatter(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var s=e.call(t);t._class&&s[0]!==t._class&&s.unshift(t._class),this.definitions[i]=s,n=this.references[i]=[i]}return n}}),t&&t._serialize)s=t._serialize(e,n),t._class&&!i&&s[0]!==t._class&&s.unshift(t._class);else if(Array.isArray(t)){s=[];for(var o=0,a=t.length;a>o;o++)s[o]=Base.serialize(t[o],e,i,n)}else if(Base.isPlainObject(t)){s={};for(var o in t)t.hasOwnProperty(o)&&(s[o]=Base.serialize(t[o],e,i,n))}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return r&&n.length>0?[["dictionary",n.definitions],s]:s},deserialize:function(t,e){var i=t;if(e=e||{},Array.isArray(t)){var n=t[0],s="dictionary"===n;if(!s){if(e.dictionary&&1==t.length&&/^#/.test(n))return e.dictionary[n];n=Base._classes[n]}i=[];for(var r=n?1:0,o=t.length;o>r;r++)i.push(Base.deserialize(t[r],e));if(s)e.dictionary=i[0];else if(n){var a=i;i=Base.create(n),i.initialize.apply(i,a)}}else if(Base.isPlainObject(t)){i={};for(var h in t)i[h]=Base.deserialize(t[h],e)}return i},exportJson:function(t,e){return JSON.stringify(Base.serialize(t,e))},importJson:function(t){return Base.deserialize("string"==typeof t?JSON.parse(t):t)},splice:function(t,e,i,n){var s=e&&e.length,r=void 0===i;i=r?t.length:i,i>t.length&&(i=t.length);for(var o=0;s>o;o++)e[o]._index=i+o;if(r)return t.push.apply(t,e),[];var a=[i,n];e&&a.push.apply(a,e);for(var h=t.splice.apply(t,a),o=0,l=h.length;l>o;o++)delete h[o]._index;for(var o=i+s,l=t.length;l>o;o++)t[o]._index=o;return h},merge:function(){return Base.each(arguments,function(t){Base.each(t,function(t,e){this[e]=t},this)},new Base,!0)},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var Callback={attach:function(t,e){if("string"!=typeof t)return void Base.each(t,function(t,e){this.attach(e,t)},this);var i=this._eventTypes[t];if(i){var n=this._handlers=this._handlers||{};n=n[t]=n[t]||[],-1==n.indexOf(e)&&(n.push(e),i.install&&1==n.length&&i.install.call(this,t))}},detach:function(t,e){if("string"!=typeof t)return void Base.each(t,function(t,e){this.detach(e,t)},this);var i,n=this._eventTypes[t],s=this._handlers&&this._handlers[t];n&&s&&(!e||-1!=(i=s.indexOf(e))&&1==s.length?(n.uninstall&&n.uninstall.call(this,t),delete this._handlers[t]):-1!=i&&s.splice(i,1))},fire:function(t,e){var i=this._handlers&&this._handlers[t];if(!i)return!1;var n=[].slice.call(arguments,1);return Base.each(i,function(t){t.apply(this,n)===!1&&e&&e.stop&&e.stop()},this),!0},responds:function(t){return!(!this._handlers||!this._handlers[t])},statics:{inject:function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t],n=i._events;if(n){var s={};Base.each(n,function(t,e){var n="string"==typeof t,r=n?t:e,o=Base.capitalize(r),a=r.substring(2).toLowerCase();s[a]=n?{}:t,r="_"+r,i["get"+o]=function(){return this[r]},i["set"+o]=function(t){t?this.attach(a,t):this[r]&&this.detach(a,this[r]),this[r]=t}}),i._eventTypes=s}this.base(i)}return this}}},PaperScope=this.PaperScope=Base.extend({initialize:function(t){if(paper=this,this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t&&(t.getAttribute("id")||t.src)||"paperscope-"+PaperScope._id++,t&&t.setAttribute("id",this._id),PaperScope._scopes[this._id]=this,!this.support){var e=CanvasProvider.getContext(1,1);PaperScope.prototype.support={nativeDash:"setLineDash"in e||"mozDash"in e},CanvasProvider.release(e)}},version:.8,getView:function(){return this.project&&this.project.view},getTool:function(){return this._tool||(this._tool=new Tool),this._tool},evaluate:function(t){var e=PaperScript.evaluate(t,this);return View.updateFocus(),e},install:function(t){var e=this;Base.each(["project","view","tool"],function(i){Base.define(t,i,{configurable:!0,writable:!0,get:function(){return e[i]}})});for(var i in this)/^(version|_id)/.test(i)||i in t||(t[i]=this[i])},setup:function(t){return paper=this,this.project=new Project(t),this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete PaperScope._scopes[this._id]},statics:{_scopes:{},_id:0,get:function(t){return"object"==typeof t&&(t=t.getAttribute("id")),this._scopes[t]||null}}}),PaperScopeItem=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!=this&&t.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(Base.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),Point=this.Point=Base.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t;if("number"===i){var n="number"==typeof e;this.x=t,this.y=n?e:t,this._read&&(this._read=n?2:1)}else"undefined"===i||null===t?(this.x=this.y=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return t=Point.read(arguments),this.x==t.x&&this.y==t.y},clone:function(){return Point.create(this.x,this.y)},toString:function(){var t=Formatter.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},add:function(t){return t=Point.read(arguments),Point.create(this.x+t.x,this.y+t.y)},subtract:function(t){return t=Point.read(arguments),Point.create(this.x-t.x,this.y-t.y)},multiply:function(t){return t=Point.read(arguments),Point.create(this.x*t.x,this.y*t.y)},divide:function(t){return t=Point.read(arguments),Point.create(this.x/t.x,this.y/t.y)},modulo:function(t){return t=Point.read(arguments),Point.create(this.x%t.x,this.y%t.y)},negate:function(){return Point.create(-this.x,-this.y)},transform:function(t){return t?t._transformPoint(this):this},getDistance:function(t,e){t=Point.read(arguments);var i=t.x-this.x,n=t.y-this.y,s=i*i+n*n;return e?s:Math.sqrt(s)},getLength:function(){var t=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?t:Math.sqrt(t)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();0==i&&this.getAngle(),this.set(this.x*i,this.y*i)}return this},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),i=0!=e?t/e:0,n=Point.create(this.x*i,this.y*i);return n._angle=this._angle,n},getAngle:function(){return 180*this.getAngleInRadians(arguments[0])/Math.PI},setAngle:function(t){if(t=this._angle=t*Math.PI/180,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}return this},getAngleInRadians:function(){if(void 0===arguments[0])return null==this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var t=Point.read(arguments),e=this.getLength()*t.getLength();return Numerical.isZero(e)?NaN:Math.acos(this.dot(t)/e)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(t){return t=Point.read(arguments),180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return i=Point.create(i.x*s-i.y*n,i.y*s+i.x*n),e?i.add(e):i},isInside:function(t){return t.contains(this)},isClose:function(t,e){return this.getDistance(t)<e},isColinear:function(t){return this.cross(t)<1e-5},isOrthogonal:function(t){return this.dot(t)<1e-5},isZero:function(){return Numerical.isZero(this.x)&&Numerical.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(t){return t=Point.read(arguments),this.x*t.x+this.y*t.y},cross:function(t){return t=Point.read(arguments),this.x*t.y-this.y*t.x},project:function(t){if(t=Point.read(arguments),t.isZero())return Point.create(0,0);var e=this.dot(t)/t.dot(t);return Point.create(t.x*e,t.y*e)},statics:{create:function(t,e){var i=Base.create(Point);return i.x=t,i.y=e,i},min:function(t,e){var i=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.min(i.x,_point2.x),Math.min(i.y,_point2.y))},max:function(t,e){var i=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.max(i.x,_point2.x),Math.max(i.y,_point2.y))},random:function(){return Point.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Point.create(e(this.x),e(this.y))}},{})}),LinkedPoint=Point.extend({set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},statics:{create:function(t,e,i,n,s){if(s)return Point.create(i,n);var r=Base.create(LinkedPoint);return r._x=i,r._y=n,r._owner=t,r._setter=e,r}}}),Size=this.Size=Base.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t;if("number"===i){var n="number"==typeof e;this.width=t,this.height=n?e:t,this._read&&(this._read=n?2:1)}else"undefined"===i||null===t?(this.width=this.height=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t=Size.read(arguments),this.width==t.width&&this.height==t.height},clone:function(){return Size.create(this.width,this.height)},toString:function(){var t=Formatter.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(t){return t=Size.read(arguments),Size.create(this.width+t.width,this.height+t.height)},subtract:function(t){return t=Size.read(arguments),Size.create(this.width-t.width,this.height-t.height)},multiply:function(t){return t=Size.read(arguments),Size.create(this.width*t.width,this.height*t.height)},divide:function(t){return t=Size.read(arguments),Size.create(this.width/t.width,this.height/t.height)},modulo:function(t){return t=Size.read(arguments),Size.create(this.width%t.width,this.height%t.height)},negate:function(){return Size.create(-this.width,-this.height)},isZero:function(){return Numerical.isZero(this.width)&&Numerical.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{create:function(t,e){return Base.create(Size).set(t,e)},min:function(t,e){return Size.create(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return Size.create(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return Size.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Size.create(e(this.width),e(this.height))}},{})}),LinkedSize=Size.extend({set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)},statics:{create:function(t,e,i,n,s){if(s)return Size.create(i,n);var r=Base.create(LinkedSize);return r._width=i,r._height=n,r._owner=t,r._setter=e,r}}}),Rectangle=this.Rectangle=Base.extend({_class:"Rectangle",_readIndex:!0,initialize:function(t,e,i,n){var s=typeof t,r=0;if("number"===s?(this.x=t,this.y=e,this.width=i,this.height=n,r=4):"undefined"===s||null===t?(this.x=this.y=this.width=this.height=0,r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],r=1):void 0!==t.x||void 0!==t.width?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,r=1):void 0===t.from&&void 0===t.to&&(this.x=this.y=this.width=this.height=0,this._set(t),r=1)),!r){var o=Point.readNamed(arguments,"from"),a=Base.peek(arguments);if(this.x=o.x,this.y=o.y,a&&void 0!==a.x||Base.hasNamed(arguments,"to")){var h=Point.readNamed(arguments,"to");this.width=h.x-o.x,this.height=h.y-o.y,this.width<0&&(this.x=h.x,this.width=-this.width),this.height<0&&(this.y=h.y,this.height=-this.height)}else{var l=Size.read(arguments);this.width=l.width,this.height=l.height}r=arguments._index}this._read&&(this._read=r)},set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return Rectangle.create(this.x,this.y,this.width,this.height)},equals:function(t){return t=Rectangle.read(arguments),this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},toString:function(){var t=Formatter.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(){return LinkedPoint.create(this,"setPoint",this.x,this.y,arguments[0])},setPoint:function(t){t=Point.read(arguments),this.x=t.x,this.y=t.y},getSize:function(){return LinkedSize.create(this,"setSize",this.width,this.height,arguments[0])},setSize:function(t){t=Size.read(arguments),this.width=t.width,this.height=t.height},getLeft:function(){return this.x},setLeft:function(t){this.width-=t-this.x,this.x=t},getTop:function(){return this.y},setTop:function(t){this.height-=t-this.y,this.y=t},getRight:function(){return this.x+this.width},setRight:function(t){this.width=t-this.x},getBottom:function(){return this.y+this.height},setBottom:function(t){this.height=t-this.y},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height},getCenter:function(){return LinkedPoint.create(this,"setCenter",this.getCenterX(),this.getCenterY(),arguments[0])},setCenter:function(t){return t=Point.read(arguments),this.setCenterX(t.x),this.setCenterY(t.y),this},isEmpty:function(){return 0==this.width||0==this.height},contains:function(t){return t&&void 0!==t.width||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(Rectangle.read(arguments)):this._containsPoint(Point.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(t){return t=Rectangle.read(arguments),t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(t){return t=Rectangle.read(arguments),t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(t){t=Rectangle.read(arguments);var e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return Rectangle.create(e,i,n-e,s-i)},unite:function(t){t=Rectangle.read(arguments);var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return Rectangle.create(e,i,n-e,s-i)},include:function(t){t=Point.read(arguments);var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return Rectangle.create(e,i,n-e,s-i)},expand:function(t,e){return void 0===e&&(e=t),Rectangle.create(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(void 0===e?t:e)-this.height)},statics:{create:function(t,e,i,n){return Base.create(Rectangle).set(t,e,i,n)}}},new function(){return Base.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],r=t[n?1:0],o="get"+s,a="get"+r,h="set"+s,l="set"+r,u="get"+i,c="set"+i;this[u]=function(){return LinkedPoint.create(this,c,this[o](),this[a](),arguments[0])},this[c]=function(t){t=Point.read(arguments),this[h](t.x),this[l](t.y)}},{})}),LinkedRectangle=Rectangle.extend({set:function(t,e,i,n,s){return this._x=t,this._y=e,this._width=i,this._height=n,s||this._owner[this._setter](this),this},statics:{create:function(t,e,i,n,s,r){var o=Base.create(LinkedRectangle).set(i,n,s,r,!0);return o._owner=t,o._setter=e,o}}},new function(){var t=Rectangle.prototype;return Base.each(["x","y","width","height"],function(t){var e=Base.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},Base.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(e){this._dontNotify=!0,t[i].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),Matrix=this.Matrix=Base.extend({_class:"Matrix",initialize:function(t){var e=arguments.length,i=!0;if(6==e?this.set.apply(this,arguments):1==e?t instanceof Matrix?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):i=!1:0==e?this.reset():i=!1,!i)throw new Error("Unsupported matrix parameters")},set:function(t,e,i,n,s,r){return this._a=t,this._c=e,this._b=i,this._d=n,this._tx=s,this._ty=r,this},_serialize:function(t){return Base.serialize(this.getValues(),t)},clone:function(){return Matrix.create(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t&&this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty},toString:function(){var t=Formatter.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,this},scale:function(t,e){var i=Point.read(arguments),n=Point.read(arguments,0,0,!1,!0);return n&&this.translate(n),this._a*=i.x,this._c*=i.x,this._b*=i.y,this._d*=i.y,n&&this.translate(n.negate()),this},translate:function(t){t=Point.read(arguments);var e=t.x,i=t.y;return this._tx+=e*this._a+i*this._b,this._ty+=e*this._c+i*this._d,this},rotate:function(t,e){e=Point.read(arguments,1),t=t*Math.PI/180;var i=e.x,n=e.y,s=Math.cos(t),r=Math.sin(t),o=i-i*s+n*r,a=n-i*r-n*s,h=this._a,l=this._b,u=this._c,c=this._d;return this._a=s*h+r*l,this._b=-r*h+s*l,this._c=s*u+r*c,this._d=-r*u+s*c,this._tx+=o*h+a*l,this._ty+=o*u+a*c,this},shear:function(t,e){var i=Point.read(arguments),n=Point.read(arguments);n&&this.translate(n);var s=this._a,r=this._c;return this._a+=i.y*this._b,this._c+=i.y*this._d,this._b+=i.x*s,this._d+=i.x*r,n&&this.translate(n.negate()),this},isIdentity:function(){return 1==this._a&&0==this._c&&0==this._b&&1==this._d&&0==this._tx&&0==this._ty},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},concatenate:function(t){var e=this._a,i=this._b,n=this._c,s=this._d;return this._a=t._a*e+t._c*i,this._b=t._b*e+t._d*i,this._c=t._a*n+t._c*s,this._d=t._b*n+t._d*s,this._tx+=t._tx*e+t._ty*i,this._ty+=t._tx*n+t._ty*s,this},preConcatenate:function(t){var e=this._a,i=this._b,n=this._c,s=this._d,r=this._tx,o=this._ty;return this._a=t._a*e+t._b*n,this._b=t._a*i+t._b*s,this._c=t._c*e+t._d*n,this._d=t._c*i+t._d*s,this._tx=t._a*r+t._b*o+t._tx,this._ty=t._c*r+t._d*o+t._ty,this},transform:function(t,e,i,n,s){return arguments.length<5?this._transformPoint(Point.read(arguments)):this._transformCoordinates(t,e,i,n,s)},_transformPoint:function(t,e,i){var n=t.x,s=t.y;return e||(e=Base.create(Point)),e.set(n*this._a+s*this._b+this._tx,n*this._c+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i,n,s){for(var r=e,o=n,a=e+2*s;a>r;){var h=t[r++],l=t[r++];i[o++]=h*this._a+l*this._b+this._tx,i[o++]=h*this._c+l*this._d+this._ty}return i},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=[e,i,n,i,n,s,e,s];return this._transformCoordinates(r,0,r,0,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),s=n.slice(0,2),r=n.slice(),o=2;8>o;o++){var a=n[o],h=1&o;a<s[h]?s[h]=a:a>r[h]&&(r[h]=a)}return e||(e=Base.create(Rectangle)),e.set(s[0],s[1],r[0]-s[0],r[1]-s[1],i)},inverseTransform:function(t){return this._inverseTransform(Point.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!Numerical.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,i){var n=this._getDeterminant();if(!n)return null;var s=t.x-this._tx,r=t.y-this._ty;return e||(e=Base.create(Point)),e.set((s*this._d-r*this._b)/n,(r*this._a-s*this._c)/n,i)},decompose:function(){var t=this._a,e=this._b,i=this._c,n=this._d;if(Numerical.isZero(t*n-e*i))return null;var s=Math.sqrt(t*t+e*e);t/=s,e/=s;var r=t*i+e*n;i-=t*r,n-=e*r;var o=Math.sqrt(i*i+n*n);return i/=o,n/=o,r/=o,e*i>t*n&&(t=-t,e=-e,r=-r,s=-s),{translation:this.getTranslation(),scaling:Point.create(s,o),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:r}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return Point.create(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&Matrix.create(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return Matrix.create(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)},statics:{create:function(t,e,i,n,s,r){return Base.create(Matrix).set(t,e,i,n,s,r)}}},new function(){return Base.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(t,e){e=Base.capitalize(e),this["get"+e]=function(){return this[t]},this["set"+e]=function(e){this[t]=e}},{})}),Line=this.Line=Base.extend({initialize:function(t,e,i){var n=Point.read(arguments),s=Point.read(arguments),r=Base.read(arguments);void 0!==r?(this.point=n,this.vector=s.subtract(n),this.infinite=r):(this.point=n,this.vector=s,this.infinite=!0)},intersect:function(t,e,i){var n=this.vector.cross(t.vector);if(Numerical.isZero(n))return null;var s=t.point.subtract(this.point),r=s.cross(t.vector)/n,o=s.cross(this.vector)/n;return(this.infinite||(e?r>0:r>=0)&&(i?1>r:1>=r))&&(t.infinite||(e?o>0:o>=0)&&(i?1>o:1>=o))?this.point.add(this.vector.multiply(r)):null},getSide:function(t){var e=this.vector,i=t.subtract(this.point),n=i.cross(e);return 0===n&&(n=i.dot(e),n>0&&(n=i.subtract(e).dot(e),0>n&&(n=0))),0>n?-1:n>0?1:0},getDistance:function(t){var e=this.vector.y/this.vector.x,i=this.point.y-e*this.point.x,n=Math.abs(t.y-e*t.x-i)/Math.sqrt(e*e+1);return this.infinite?n:Math.min(n,t.getDistance(this.point),t.getDistance(this.point.add(this.vector)))}}),Project=this.Project=PaperScopeItem.extend({_list:"projects",_reference:"project",initialize:function(t){this.base(!0),this.layers=[],this.symbols=[],this.activeLayer=new Layer,t&&(this.view=t instanceof View?t:View.create(t)),this._currentStyle=new Style,this._selectedItems={},this._selectedItemCount=0,this._drawCount=0,this.options={}},_serialize:function(t,e){return Base.serialize(this.layers,t,!1,e)},_needsRedraw:function(){this.view&&(this.view._redrawNeeded=!0)},remove:function(){return this.base()?(this.view&&this.view.remove(),!0):!1},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var i=this._selectedItems[e];i._drawCount===this._drawCount&&t.push(i)}return t},_updateSelection:function(t){t._selected?(this._selectedItemCount++,this._selectedItems[t._id]=t,t.isInserted()&&(t._drawCount=this._drawCount)):(this._selectedItemCount--,delete this._selectedItems[t._id])},selectAll:function(){for(var t=0,e=this.layers.length;e>t;t++)this.layers[t].setSelected(!0)},deselectAll:function(){for(var t in this._selectedItems)this._selectedItems[t].setSelected(!1)},hitTest:function(t,e){t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments));for(var i=this.layers.length-1;i>=0;i--){var n=this.layers[i].hitTest(t,e);if(n)return n}return null},importJson:function(t){return Base.importJson(t)},draw:function(t,e){this._drawCount++,t.save(),e.applyToContext(t);for(var i={offset:new Point(0,0),transforms:[e]},n=0,s=this.layers.length;s>n;n++)Item.draw(this.layers[n],t,i);if(t.restore(),this._selectedItemCount>0){t.save(),t.strokeWidth=1,t.strokeStyle=t.fillStyle="#009dec";for(var r in this._selectedItems){var o=this._selectedItems[r];if(o._drawCount===this._drawCount&&(o.drawSelected||o._boundsSelected)){var a=o._globalMatrix;o.drawSelected&&o.drawSelected(t,a),o._boundsSelected&&Item.drawSelectedBounds(o._getBounds("getBounds"),t,a)}}t.restore()}}}),Symbol=this.Symbol=Base.extend({_class:"Symbol",initialize:function(t,e){this._id=++Base._uid,this.project=paper.project,this.project.symbols.push(this),t&&this.setDefinition(t,e),this._instances={}},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._class,this._definition],t,!1,e)})},_changed:function(t){Base.each(this._instances,function(e){e._changed(t)})},getDefinition:function(){return this._definition},setDefinition:function(t){t._parentSymbol&&(t=t.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=t,t.remove(),t.setSelected(!1),arguments[1]||t.setPosition(new Point),t._parentSymbol=this,this._changed(5)},place:function(t){return new PlacedSymbol(this,t)},clone:function(){return new Symbol(this._definition.clone())}}),Item=this.Item=Base.extend(Callback,{statics:{extend:function(t){return t._serializeFields&&(t._serializeFields=Base.merge(this.prototype._serializeFields,t._serializeFields)),t._class&&(t._type=Base.hyphenate(t._class)),this.base.apply(this,arguments);
}}},{_boundsSelected:!1,_serializeFields:{name:null,matrix:new Matrix,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,clipMask:!1,data:{}},initialize:function(t){this._id=++Base._uid,this._project||paper.project.activeLayer.addChild(this),this._style=Style.create(this),this.setStyle(this._project.getCurrentStyle()),this._matrix=new Matrix,t&&this._matrix.translate(t)},_events:new function(){var t={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},e={install:function(e){var i=this._project.view._eventCounters;if(i)for(var n in t)i[n]=(i[n]||0)+(t[n][e]||0)},uninstall:function(e){var i=this._project.view._eventCounters;if(i)for(var n in t)i[n]-=t[n][e]||0}};return Base.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){this[t]=e},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_serialize:function(t,e){function i(i){for(var r in i){var o=s[r];Base.equals(o,i[r])||(n[r]=Base.serialize(o,t,"data"!==r,e))}}var n={},s=this;return i(this._serializeFields),this instanceof Group||i(this._style.getDefaults()),[this._class,n]},_changed:function(t){if(4&t&&(delete this._bounds,delete this._position),this._parent&&12&t&&this._parent._clearBoundsCache(),2&t&&this._clearBoundsCache(),1&t&&this._project._needsRedraw(),this._parentSymbol&&this._parentSymbol._changed(t),this._project._changes){var e=this._project._changesById[this._id];e?e.flags|=t:(e={item:this,flags:t},this._project._changesById[this._id]=e,this._project._changes.push(e))}},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},setName:function(t,e){if(this._name&&this._removeFromNamed(),t&&this._parent){for(var i=this._parent._children,n=this._parent._namedChildren,s=t,r=1;e&&i[t];)t=s+" "+r++;(n[t]=n[t]||[]).push(this),i[t]=this}this._name=t||void 0,this._changed(32)},getStyle:function(){return this._style},setStyle:function(t){this._style.initialize(t)}},Base.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=Base.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,applyMatrix:!1,isSelected:function(){if(this._children)for(var t=0,e=this._children.length;e>t;t++)if(this._children[t].isSelected())return!0;return this._selected},setSelected:function(t){if(this._children&&!arguments[1])for(var e=0,i=this._children.length;i>e;e++)this._children[e].setSelected(t);(t=!!t)!=this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(33))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var t=0,e=this._children.length;e>t;t++)if(!this._children[t].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){if(this._children)for(var e=0,i=this._children.length;i>e;e++)this._children[e].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(33),this._parent&&this._parent._changed(256))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(){var t=this._position||(this._position=this.getBounds().getCenter(!0));return arguments[0]?t:LinkedPoint.create(this,"setPosition",t.x,t.y)},setPosition:function(t){this.translate(Point.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(t){this._matrix.initialize(t),this._changed(5)},isEmpty:function(){return 0==this._children.length}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){var e=this._boundsGetter,i=this._getCachedBounds("string"==typeof e?e:e&&e[t]||t,arguments[0]);return"getBounds"==t?LinkedRectangle.create(this,"setBounds",i.x,i.y,i.width,i.height):i}},{_getCachedBounds:function(t,e,i){var n=(!e||e.equals(this._matrix))&&t;if(i&&this._parent){var s=i._id,r=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};r.ids[s]||(r.list.push(i),r.ids[s]=i)}if(n&&this._bounds&&this._bounds[n])return this._bounds[n].clone();var o=this._matrix.isIdentity();e=!e||e.isIdentity()?o?null:this._matrix:o?e:e.clone().concatenate(this._matrix);var a=this._getBounds(t,e,n?this:i);return n&&(this._bounds||(this._bounds={}),this._bounds[n]=a.clone()),a},_clearBoundsCache:function(){if(this._boundsCache){for(var t=0,e=this._boundsCache.list,i=e.length;i>t;t++){var n=e[t];delete n._bounds,n!=this&&n._boundsCache&&n._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(t,e,i){var n=this._children;if(!n||0==n.length)return new Rectangle;for(var s=1/0,r=-s,o=s,a=r,h=0,l=n.length;l>h;h++){var u=n[h];if(u._visible&&!u.isEmpty()){var c=u._getCachedBounds(t,e,i);s=Math.min(c.x,s),o=Math.min(c.y,o),r=Math.max(c.x+c.width,r),a=Math.max(c.y+c.height,a)}}return isFinite(s)?Rectangle.create(s,o,r-s,a-o):new Rectangle},setBounds:function(t){t=Rectangle.read(arguments);var e=this.getBounds(),i=new Matrix,n=t.getCenter();i.translate(n),(t.width!=e.width||t.height!=e.height)&&i.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),n=e.getCenter(),i.translate(-n.x,-n.y),this.transform(i)}}),{getProject:function(){return this._project},_setProject:function(t){if(this._project!=t&&(this._project=t,this._children))for(var e=0,i=this._children.length;i>e;e++)this._children[e]._setProject(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Layer)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},isInserted:function(){return this._parent?this._parent.isInserted():!1},clone:function(){return this._clone(new this.constructor)},_clone:function(t){if(t.setStyle(this._style),this._children)for(var e=0,i=this._children.length;i>e;e++)t.addChild(this._children[e].clone(),!0);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide","applyMatrix"],e=0,i=n.length;i>e;e++){var s=n[e];this.hasOwnProperty(s)&&(t[s]=this[s])}return t._matrix.initialize(this._matrix),t.setSelected(this._selected),this._name&&t.setName(this._name,!0),t},copyTo:function(t){var e=this.clone();return t.layers?t.activeLayer.addChild(e):t.addChild(e),e},rasterize:function(t){var e=this.getStrokeBounds(),i=(t||72)/72,n=CanvasProvider.getCanvas(e.getSize().multiply(i)),s=n.getContext("2d");s.save(),(new Matrix).scale(i).translate(-e.x,-e.y).applyToContext(s),Item.draw(this,s,{});var r=new Raster(n);return r.setBounds(e),s.restore(),r},hitTest:function(t,e){function i(i,n){var o=s["get"+n]();return t.getDistance(o)<e.tolerance?new HitResult(i,r,{name:Base.hyphenate(n),point:o}):void 0}if(this._locked)return null;if(t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments)),!this._children&&!this.getRoughBounds().expand(e.tolerance)._containsPoint(t))return null;if(t=this._matrix._inverseTransform(t),(e.center||e.bounds)&&(!(this instanceof Layer)||this._parent)){var n,s=this.getBounds(),r=this,o=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"];if(e.center&&(n=i("center","Center")))return n;if(e.bounds)for(var a=0;8>a;a++)if(n=i("bounds",o[a]))return n}return this._children||!(e.guides&&!this._guide||e.selected&&!this._selected)?this._hitTest(t,e):null},_hitTest:function(t,e){if(this._children)for(var i=this._children.length-1;i>=0;i--){var n=this._children[i].hitTest(t,e);if(n&&!n.item.ignore_events)return n}},addChild:function(t,e){return this.insertChild(void 0,t,e)},insertChild:function(t,e,i){return this._children?(e._remove(!0),Base.splice(this._children,[e],t,0),e._parent=this,e._setProject(this._project),e._name&&e.setName(e._name),this._changed(3),e):null},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,i){e=e&&Array.prototype.slice.apply(e);for(var n=this._children,s=n.length,r=t,o=0,a=e&&e.length;a>o;o++)if(this.insertChild(r,e[o],i)){var h=n.length;r+=h-s,s=h}return r!=t},insertAbove:function(t,e){var i=t._index;return t._parent==this._parent&&i<this._index&&i++,t._parent.insertChild(i,this,e)},insertBelow:function(t,e){var i=t._index;return t._parent==this._parent&&i>this._index&&i--,t._parent.insertChild(i,this,e)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:function(t){return this.addChild(t)},appendBottom:function(t){return this.insertChild(0,t)},moveAbove:function(t){return this.insertAbove(t)},moveBelow:function(t){return this.insertBelow(t)},_removeFromNamed:function(){var t=this._parent._children,e=this._parent._namedChildren,i=this._name,n=e[i],s=n?n.indexOf(this):-1;-1!=s&&(t[i]==this&&delete t[i],n.splice(s,1),n.length?t[i]=n[n.length-1]:delete e[i])},_remove:function(t){return this._parent?(this._name&&this._removeFromNamed(),null!=this._index&&Base.splice(this._parent._children,null,this._index,1),t&&this._parent._changed(3),this._parent=null,!0):!1},remove:function(){return this._remove(!0)},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=Base.pick(e,this._children.length);for(var i=Base.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!1);return i.length>0&&this._changed(3),i},reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;this._changed(3)}},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var i=e(this),n=e(t),s=0,r=Math.min(i.length,n.length);r>s;s++)if(i[s]!=n[s])return i[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(t){return-1==this._getOrder(t)},isBelow:function(t){return 1==this._getOrder(t)},isParent:function(t){return this._parent==t},isChild:function(t){return t&&t._parent==this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&(e instanceof Group||e instanceof CompoundPath)&&t.isDescendant(e))return!0;e=e._parent}return!1},scale:function(t,e,i){return(arguments.length<2||"object"==typeof e)&&(i=e,e=t),this.transform((new Matrix).scale(t,e,i||this.getPosition(!0)))},translate:function(t){var e=new Matrix;return this.transform(e.translate.apply(e,arguments))},rotate:function(t,e){return this.transform((new Matrix).rotate(t,e||this.getPosition(!0)))},shear:function(t,e,i){return(arguments.length<2||"object"==typeof e)&&(i=e,e=t),this.transform((new Matrix).shear(t,e,i||this.getPosition(!0)))},transform:function(t){var e=this._bounds,i=this._position;if(this._matrix.preConcatenate(t),this._transform&&this._transform(t),(this.applyMatrix||arguments[1])&&this._applyMatrix(this._matrix)&&this._matrix.reset(),this._changed(5),e&&t.getRotation()%90===0){for(var n in e){var s=e[n];t._transformBounds(s,s)}var r=this._boundsGetter,s=e[r&&r.getBounds||r||"getBounds"];s&&(this._position=s.getCenter(!0)),this._bounds=e}else i&&(this._position=t._transformPoint(i,i));return this},_applyMatrix:function(t){if(this._children){for(var e=0,i=this._children.length;i>e;e++)this._children[e].transform(t,!0);return!0}},fitBounds:function(t,e){t=Rectangle.read(arguments);var i=this.getBounds(),n=i.height/i.width,s=t.height/t.width,r=(e?n>s:s>n)?t.width/i.width:t.height/i.height,o=new Rectangle(new Point,Size.create(i.width*r,i.height*r));o.setCenter(t.getCenter()),this.setBounds(o)},importJson:function(t){return this.addChild(Base.importJson(t))},_setStyles:function(t){var e=this._style,i=e._strokeWidth,n=e._strokeJoin,s=e._strokeCap,r=e._miterLimit,o=e._fillColor,a=e._strokeColor,h=e._dashArray,l=e._dashOffset;null!=i&&(t.lineWidth=i),n&&(t.lineJoin=n),s&&(t.lineCap=s),r&&(t.miterLimit=r),o&&(t.fillStyle=o.toCanvasStyle(t)),a&&(t.strokeStyle=a.toCanvasStyle(t),paper.support.nativeDash&&h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=l):(t.mozDash=h,t.mozDashOffset=l))),o&&a||(t.globalAlpha=this._opacity)},statics:{drawSelectedBounds:function(t,e,i){var n=i._transformCorners(t);e.beginPath();for(var s=0;8>s;s++)e[0==s?"moveTo":"lineTo"](n[s],n[++s]);e.closePath(),e.stroke();for(var s=0;8>s;s++)e.beginPath(),e.rect(n[s]-2,n[++s]-2,4,4),e.fill()},draw:function(t,e,i){if(t._visible&&0!=t._opacity){t._drawCount=t._project._drawCount;var n=i.transforms,s=n[n.length-1],r=s.clone().concatenate(t._matrix);n.push(t._globalMatrix=r);var o,a,h;if("normal"!==t._blendMode||t._opacity<1&&"raster"!==t._type&&("path"!==t._type||t.getFillColor()&&t.getStrokeColor())){var l=t.getStrokeBounds(s);if(!l.width||!l.height)return;h=i.offset,a=i.offset=l.getTopLeft().floor(),o=e,e=CanvasProvider.getContext(l.getSize().ceil().add(Size.create(1,1)))}e.save(),o&&e.translate(-a.x,-a.y),(o?r:t._matrix).applyToContext(e),t.draw(e,i),e.restore(),n.pop(),i.clip&&e.clip(),o&&(i.offset=h,"normal"!==t._blendMode?BlendMode.process(t._blendMode,e,o,t._opacity,a.subtract(h)):(o.save(),o.globalAlpha=t._opacity,o.drawImage(e.canvas,a.x,a.y),o.restore()),CanvasProvider.release(e))}}}},Base.each(["down","drag","up","move"],function(t){this["removeOn"+Base.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=Tool._removeSets=Tool._removeSets||{};n[i]=n[i]||{},n[i][this._id]=this}return this}})),Group=this.Group=Item.extend({_class:"Group",_serializeFields:{children:[]},initialize:function(t){this.base(),this._children=[],this._namedChildren={},t&&!this._set(t)&&this.addChildren(Array.isArray(t)?t:arguments)},_changed:function(t){Item.prototype._changed.call(this,t),258&t&&delete this._clipItem},_getClipItem:function(){if(void 0!==this._clipItem)return this._clipItem;for(var t=0,e=this._children.length;e>t;t++){var i=this._children[t];if(i._clipMask)return this._clipItem=i}return this._clipItem=null},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},draw:function(t,e){var i=this._getClipItem();i&&(e.clip=!0,Item.draw(i,t,e),e.clip=!1);for(var n=0,s=this._children.length;s>n;n++){var r=this._children[n];r!=i&&Item.draw(r,t,e)}}}),Layer=this.Layer=Group.extend({_class:"Layer",initialize:function(t){this._project=paper.project,this._index=this._project.layers.push(this)-1,this.base.apply(this,arguments),this.activate()},_remove:function(t){return this._parent?this.base(t):null!=this._index?(Base.splice(this._project.layers,null,this._index,1),this._project._needsRedraw(),!0):!1},getNextSibling:function(){return this._parent?this.base():this._project.layers[this._index+1]||null},getPreviousSibling:function(){return this._parent?this.base():this._project.layers[this._index-1]||null},isInserted:function(){return null!=this._index},activate:function(){this._project.activeLayer=this}},new function(){function t(t){return function(e){return e instanceof Layer&&!e._parent&&this._remove(!0)?(Base.splice(e._project.layers,[this],e._index+(t?1:0),0),this._setProject(e._project),!0):this.base(e)}}return{insertAbove:t(!0),insertBelow:t(!1)}}),PlacedItem=this.PlacedItem=Item.extend({_boundsGetter:{getBounds:"getStrokeBounds"},_hitTest:function(t,e,i){var n=this._symbol._definition._hitTest(t,e,i);return n&&(n.item=this),n}}),Raster=this.Raster=PlacedItem.extend({_class:"Raster",_boundsSelected:!0,_serializeFields:{source:null},_boundsGetter:"getBounds",initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),t&&!this._set(t)&&(t.getContext?this.setCanvas(t):"string"==typeof t?this.setSource(t):this.setImage(t)),this._size||(this._size=new Size)},clone:function(){var t=this._image;t||(t=CanvasProvider.getCanvas(this._size),t.getContext("2d").drawImage(this._canvas,0,0));var e=new Raster(t);return this._clone(e)},getSize:function(){return this._size},setSize:function(){var t=Size.read(arguments);if(!this._size.equals(t)){var e=this.getElement();this.setCanvas(CanvasProvider.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0==this._size.width&&0==this._size.height},getPpi:function(){var t=this._matrix,e=new Point(0,0).transform(t),i=new Point(1,0).transform(t).subtract(e),n=new Point(0,1).transform(t).subtract(e);return Size.create(72/i.getLength(),72/n.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&(this._image=null,this._changed(129)),this._context},setContext:function(t){this._context=t},getCanvas:function(){if(!this._canvas){var t=CanvasProvider.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){CanvasProvider.release(t)}}return this._canvas},setCanvas:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._canvas=t,this._size=Size.create(t.width,t.height),this._image=null,this._context=null,this._changed(133)},getImage:function(){return this._image},setImage:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._image=t,this._size=Size.create(t.naturalWidth,t.naturalHeight),this._canvas=null,this._context=null,this._changed(5)},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){function e(){i.fire("load"),i._project.view&&i._project.view.draw(!0)}var i=this,n=document.getElementById(t)||new Image;DomEvent.add(n,{load:function(){i.setImage(n),e()}}),n.width&&n.height?setTimeout(e,0):n.src||(n.src=t),this.setImage(n)},getElement:function(){return this._canvas||this._image},getSubImage:function(t){t=Rectangle.read(arguments);var e=CanvasProvider.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL():null},drawImage:function(t,e){e=Point.read(arguments,1),this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;t?t instanceof PathItem?(i=t,e=t.getBounds()):t.width?e=new Rectangle(t):t.x&&(e=Rectangle.create(t.x-.5,t.y-.5,1,1)):e=this.getBounds();var n=32,s=Math.min(e.width,n),r=Math.min(e.height,n),o=Raster._sampleContext;o?o.clearRect(0,0,n+1,n+1):o=Raster._sampleContext=CanvasProvider.getContext(new Size(n)),o.save(),o.scale(s/e.width,r/e.height),o.translate(-e.x,-e.y),i&&i.draw(o,{clip:!0}),this._matrix.applyToContext(o),o.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),o.restore();for(var a=o.getImageData(.5,.5,Math.ceil(s),Math.ceil(r)).data,h=[0,0,0],l=0,u=0,c=a.length;c>u;u+=4){var d=a[u+3];l+=d,d/=255,h[0]+=a[u]*d,h[1]+=a[u+1]*d,h[2]+=a[u+2]*d}for(var u=0;3>u;u++)h[u]/=l;return l?Color.read(h):null},getPixel:function(t){t=Point.read(arguments);for(var e=this.getContext().getImageData(t.x,t.y,1,1).data,i=[0,0,0,0],n=0;4>n;n++)i[n]=e[n]/255;return Color.create("rgb",i)},setPixel:function(t,e){var i=Point.read(arguments),n=Color.read(arguments),s=this.getContext(!0),r=s.createImageData(1,1),o=n.getAlpha();r.data[0]=255*n.getRed(),r.data[1]=255*n.getGreen(),r.data[2]=255*n.getBlue(),r.data[3]=null!=o?255*o:255,s.putImageData(r,i.x,i.y)},createImageData:function(t){return t=Size.read(arguments),this.getContext().createImageData(t.width,t.height)},getImageData:function(t){return t=Rectangle.read(arguments),t.isEmpty()&&(t=new Rectangle(this.getSize())),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t,e){e=Point.read(arguments,1),this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new Rectangle(this._size).setCenter(0,0);return e?e._transformBounds(i):i},_hitTest:function(t,e){if(t.isInside(this._getBounds())){var i=this;return new HitResult("pixel",i,{offset:t.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},draw:function(t,e){var i=this.getElement();i&&(t.globalAlpha=this._opacity,t.drawImage(i,-this._size.width/2,-this._size.height/2))}}),PlacedSymbol=this.PlacedSymbol=PlacedItem.extend({_class:"PlacedSymbol",_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),t&&!this._set(t)&&this.setSymbol(t instanceof Symbol?t:new Symbol(t))},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol&&delete this._symbol._instances[this._id],this._symbol=t,t._instances[this._id]=this},clone:function(){return this._clone(new PlacedSymbol(this.symbol))},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e){return this.symbol._definition._getCachedBounds(t,e)},draw:function(t,e){Item.draw(this.symbol._definition,t,e)}}),HitResult=this.HitResult=Base.extend({initialize:function(t,e,i){this.type=t,this.item=e,i&&(i.enumerable=!0,this.inject(i))},statics:{getOptions:function(t){return t&&t._merged?t:Base.merge({type:null,tolerance:paper.project.options.hitTolerance||2,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},t)}}}),Segment=this.Segment=Base.extend({_class:"Segment",initialize:function(t,e,i,n,s,r){var o,a,h,l=arguments.length,u=SegmentPoint.create;0==l||(1==l?t.point?(o=t.point,a=t.handleIn,h=t.handleOut):o=t:6>l?2==l&&void 0===e.x?o=[t,e]:(o=t,a=e,h=i):6==l&&(o=[t,e],a=[i,n],h=[s,r])),u(this,"_point",o),u(this,"_handleIn",a),u(this,"_handleOut",h)},_serialize:function(t){return Base.serialize(this._handleIn.isZero()&&this._handleOut.isZero()?this._point:[this._point,this._handleIn,this._handleOut],t,!0)},_changed:function(t){if(this._path){var e,i=this._path._curves&&this.getCurve();i&&(i._changed(),(e=i[t==this._point||t==this._handleIn&&i._segment1==this?"getPrevious":"getNext"]())&&e._changed()),this._path._changed(5)}},getPoint:function(){return this._point},setPoint:function(t){t=Point.read(arguments),this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(t){t=Point.read(arguments),this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(t){t=Point.read(arguments),this._handleOut.set(t.x,t.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_isSelected:function(t){var e=this._selectionState;return t==this._point?!!(4&e):t==this._handleIn?!!(1&e):t==this._handleOut?!!(2&e):!1},_setSelected:function(t,e){var i=this._path,e=!!e,n=this._selectionState||0,s=[!!(4&n),!!(1&n),!!(2&n)];if(t==this._point){if(e)s[1]=s[2]=!1;else{var r=this.getPrevious(),o=this.getNext();s[1]=r&&(r._point.isSelected()||r._handleOut.isSelected()),s[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}s[0]=e}else{var a=t==this._handleIn?1:2;s[a]!=e&&(e&&(s[0]=!1),s[a]=e)}this._selectionState=(s[0]?4:0)|(s[1]?1:0)|(s[2]?2:0),i&&n!=this._selectionState&&(i._updateSelection(this,n,this._selectionState),i._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(t){this._setSelected(this._point,t)},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var t=this._index;return this._path._closed||t!=this._path._segments.length-1||t--,this._path.getCurves()[t]||null}return null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},reverse:function(){return new Segment(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Segment(this._point,this._handleIn,this._handleOut)},equals:function(t){return t==this||t&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},_transformCoordinates:function(t,e,i){var n=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,r=i&&this._handleOut.isZero()?null:this._handleOut,o=n._x,a=n._y,h=2;return e[0]=o,e[1]=a,s&&(e[h++]=s._x+o,e[h++]=s._y+a),r&&(e[h++]=r._x+o,e[h++]=r._y+a),t&&(t._transformCoordinates(e,0,e,0,h/2),o=e[0],a=e[1],i?(n._x=o,n._y=a,h=2,s&&(s._x=e[h++]-o,s._y=e[h++]-a),r&&(r._x=e[h++]-o,r._y=e[h++]-a)):(s||(e[h++]=o,e[h++]=a),r||(e[h++]=o,e[h++]=a))),e}}),SegmentPoint=Point.extend({set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return Numerical.isZero(this._x)&&Numerical.isZero(this._y)},setSelected:function(t){this._owner._setSelected(this,t)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(t,e,i){var n,s,r,o=Base.create(SegmentPoint);return i?void 0!==(n=i[0])?s=i[1]:(void 0===(n=i.x)&&(i=Point.read(arguments,2),n=i.x),s=i.y,r=i.selected):n=s=0,o._x=n,o._y=s,o._owner=t,t[e]=o,r&&o.setSelected(!0),o}}}),Curve=this.Curve=Base.extend({initialize:function(t,e,i,n,s,r,o,a){var h=arguments.length;if(0==h)this._segment1=new Segment,this._segment2=new Segment;else if(1==h)this._segment1=new Segment(t.segment1),this._segment2=new Segment(t.segment2);else if(2==h)this._segment1=new Segment(t),this._segment2=new Segment(e);else{var l,u,c,d;4==h?(l=t,u=e,c=i,d=n):8==h&&(l=[t,e],d=[o,a],u=[i-t,a-e],c=[s-o,r-a]),this._segment1=new Segment(l,null,u),this._segment2=new Segment(d,c,null)}},_changed:function(){delete this._length,delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(t){t=Point.read(arguments),this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(t){t=Point.read(arguments),this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(t){t=Point.read(arguments),this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(t){t=Point.read(arguments),this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(t){this.getHandle1().setSelected(t),this.getHandle2().setSelected(t)},getValues:function(){return Curve.getValues(this._segment1,this._segment2)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;8>i;i+=2)e.push(Point.create(t[i],t[i+1]));return e},getLength:function(){var t=arguments[0],e=arguments[1],i=0==arguments.length||0==t&&1==e;if(i&&null!=this._length)return this._length;var n=Curve.getLength(this.getValues(),t,e);return i&&(this._length=n),n},getPart:function(t,e){return new Curve(Curve.getPart(this.getValues(),t,e))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getIntersections:function(t){return Curve._addIntersections(this.getValues(),t.getValues(),this,[])},getCrossings:function(t,e){for(var i=this.getValues(),n=Curve.solveCubic(i,1,t.y,e),s=0,r=0;n>r;r++){var o=e[r];if(o>=0&&1>o&&Curve.evaluate(i,o,!0,0).x>t.x){if(1e-5>o&&Curve.evaluate(this.getPrevious().getValues(),1,!0,1).y*Curve.evaluate(i,o,!0,1).y>=1e-5)continue;s++}}return s},reverse:function(){return new Curve(this._segment2.reverse(),this._segment1.reverse())},divide:function(t){var e=null;if(t&&t.curve===this&&(t=t.parameter),t>0&&1>t){var i=Curve.subdivide(this.getValues(),t),n=this.isLinear(),s=i[0],r=i[1],o=this._segment1._point,a=this._segment2._point;n||(this._segment1._handleOut.set(s[2]-o._x,s[3]-o._y),this._segment2._handleIn.set(r[4]-a._x,r[5]-a._y));var h=s[6],l=s[7],u=new Segment(Point.create(h,l),n?null:Point.create(s[4]-h,s[5]-l),n?null:Point.create(r[2]-h,r[3]-l));if(this._path)this._segment1._index>0&&0===this._segment2._index?this._path.add(u):this._path.insert(this._segment2._index,u),e=this;else{var c=this._segment2;this._segment2=u,e=new Curve(u,c)}}return e},split:function(t){return this._path?this._path.split(this._segment1._index,t):null},clone:function(){return new Curve(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},statics:{create:function(t,e,i){var n=Base.create(Curve);return n._path=t,n._segment1=e,n._segment2=i,n},getValues:function(t,e){var i=t._point,n=t._handleOut,s=e._handleIn,r=e._point;return[i._x,i._y,i._x+n._x,i._y+n._y,r._x+s._x,r._y+s._y,r._x,r._y]},evaluate:function(t,e,i,n){var s,r,o=i?e:Curve.getParameterAt(t,e,0),a=t[0],h=t[1],l=t[2],u=t[3],c=t[4],d=t[5],p=t[6],f=t[7];if(0!=n||0!=o&&1!=o){var g=1e-5;g>o&&l==a&&u==h?o=g:o>1-g&&c==p&&d==f&&(o=1-g);var m=3*(l-a),v=3*(c-l)-m,_=p-a-m-v,b=3*(u-h),y=3*(d-u)-b,w=f-h-b-y;switch(n){case 0:s=((_*o+v)*o+m)*o+a,r=((w*o+y)*o+b)*o+h;break;case 1:case 2:s=(3*_*o+2*v)*o+m,r=(3*w*o+2*y)*o+b}}else s=0==o?a:p,r=0==o?h:f;return 2==n?new Point(r,-s):new Point(s,r)},subdivide:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7];void 0===e&&(e=.5);var u=1-e,c=u*i+e*s,d=u*n+e*r,p=u*s+e*o,f=u*r+e*a,g=u*o+e*h,m=u*a+e*l,v=u*c+e*p,_=u*d+e*f,b=u*p+e*g,y=u*f+e*m,w=u*v+e*b,x=u*_+e*y;return[[i,n,c,d,v,_,w,x],[w,x,b,y,g,m,h,l]]},solveCubic:function(t,e,i,n){var s=t[e],r=t[e+2],o=t[e+4],a=t[e+6],h=3*(r-s),l=3*(o-r)-h,u=a-s-h-l;return Numerical.solveCubic(u,l,h,s-i,n,1e-5)},getParameterOf:function(t,e,i){if(Math.abs(t[0]-e)<1e-5&&Math.abs(t[1]-i)<1e-5)return 0;if(Math.abs(t[6]-e)<1e-5&&Math.abs(t[7]-i)<1e-5)return 1;for(var n,s,r=[],o=[],a=Curve.solveCubic(t,0,e,r),h=Curve.solveCubic(t,1,i,o),l=0;-1==a||a>l;)if(-1==a||(n=r[l++])>=0&&1>=n){for(var u=0;-1==h||h>u;)if((-1==h||(s=o[u++])>=0&&1>=s)&&(-1==a?n=s:-1==h&&(s=n),
Math.abs(n-s)<1e-5))return.5*(n+s);if(-1==a)break}return null},getPart:function(t,e,i){return e>0&&(t=Curve.subdivide(t,e)[1]),1>i&&(t=Curve.subdivide(t,(i-e)/(1-e))[0]),t},isFlatEnough:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],u=3*s-2*i-h,c=3*r-2*n-l,d=3*o-2*h-i,p=3*a-2*l-n;return Math.max(u*u,d*d)+Math.max(c*c,p*p)<16*e*e},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],s=0;2>s;s++)Curve._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,n);return Rectangle.create(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,s,r,o,a,h){function l(t,e){var i=t-e,n=t+e;i<o[s]&&(o[s]=i),n>a[s]&&(a[s]=n)}var u=3*(e-i)-t+n,c=2*(t+i)-4*e,d=e-t,p=Numerical.solveQuadratic(u,c,d,h,1e-5),f=1e-5,g=1-f;l(n,0);for(var m=0;p>m;m++){var v=h[m],_=1-v;v>f&&g>v&&l(_*_*_*t+3*_*_*v*e+3*_*v*v*i+v*v*v*n,r)}},_addIntersections:function(t,e,i,n){var s=Curve.getBounds(t),r=Curve.getBounds(e);if(s.touches(r))if(Curve.isFlatEnough(t,1e-5)&&Curve.isFlatEnough(e,1e-5)){var o=new Line(t[0],t[1],t[6],t[7],!1).intersect(new Line(e[0],e[1],e[6],e[7],!1),!0,!1);o&&n.push(new CurveLocation(i,null,o))}else for(var a=Curve.subdivide(t),h=Curve.subdivide(e),l=0;2>l;l++)for(var u=0;2>u;u++)this._addIntersections(a[l],h[u],i,n);return n}}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=Path[t]([this._segment1,this._segment2],!1,this._path._style)),e.clone()}},{}),Base.each(["getPoint","getTangent","getNormal"],function(t,e){this[t+"At"]=function(t,i){return Curve.evaluate(this.getValues(),t,i,e)},this[t]=function(t){return Curve.evaluate(this.getValues(),t,!0,e)}},{getParameterAt:function(t,e){return Curve.getParameterAt(this.getValues(),t,void 0!==e?e:0>t?1:0)},getParameterOf:function(t){return t=Point.read(arguments),Curve.getParameterOf(this.getValues(),t.x,t.y)},getLocationAt:function(t,e){return e||(t=this.getParameterAt(t)),new CurveLocation(this,t)},getLocationOf:function(t){var e=this.getParameterOf.apply(this,arguments);return null!=e?new CurveLocation(this,e):null}}),new function(){function t(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],h=t[7],l=9*(n-r)+3*(a-e),u=6*(e+r)-12*n,c=3*(n-e),d=9*(s-o)+3*(h-i),p=6*(i+o)-12*s,f=3*(s-i);return function(t){var e=(l*t+u)*t+c,i=(d*t+p)*t+f;return Math.sqrt(e*e+i*i)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}return{statics:!0,getLength:function(i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=1),i[0]==i[2]&&i[1]==i[3]&&i[6]==i[4]&&i[7]==i[5]){var r=i[6]-i[0],o=i[7]-i[1];return(s-n)*Math.sqrt(r*r+o*o)}var a=t(i);return Numerical.integrate(a,n,s,e(n,s))},getParameterAt:function(i,n,s){function r(t){var i=e(s,t);return d+=t>s?Numerical.integrate(l,s,t,i):-Numerical.integrate(l,t,s,i),s=t,d-n}if(0==n)return s;var o=n>0,a=o?s:0,h=o?1:s,n=Math.abs(n),l=t(i),u=Numerical.integrate(l,a,h,e(a,h));if(n>=u)return o?h:a;var c=n/u,d=0;return Numerical.findRoot(r,l,o?a+c:h-c,a,h,16,1e-5)}}},new function(){function t(t,e){for(var i=3,n=5,s=[],r=[],a=[],h=[],l=0;i>=l;l++)s[l]=t[l].subtract(e),i>l&&(r[l]=t[l+1].subtract(t[l]).multiply(i));for(var u=0;i>u;u++){a[u]=[];for(var c=0;i>=c;c++)a[u][c]=r[u].dot(s[c])}for(var l=0;n>=l;l++)h[l]=new Point(l/n,0);for(var d=0;n>=d;d++)for(var p=Math.max(0,d-i+1),f=Math.min(d,i),l=p;f>=l;l++){var g=d-l;h[d].y+=a[g][l]*o[g][l]}return h}function e(t,r){switch(i(t)){case 0:return[];case 1:if(r>=s)return[.5*(t[0].x+t[5].x)];if(n(t)){var o=new Line(t[0],t[5],!0);return[Numerical.isZero(o.vector.getLength(!0))?o.point.x:a.intersect(o).x]}}for(var h=[[]],l=[],u=[],c=0;5>=c;c++)h[0][c]=new Point(t[c]);for(var d=1;5>=d;d++){h[d]=[];for(var c=0;5-d>=c;c++)h[d][c]=h[d-1][c].add(h[d-1][c+1]).multiply(.5)}for(var c=0;5>=c;c++)l[c]=h[c][0],u[c]=h[5-c][c];return e(l,r+1).concat(e(u,r+1))}function i(t){for(var e=0,i=null,n=0,s=t.length;s>n;n++){var r=t[n].y<0?-1:1;null!=i&&r!=i&&e++,i=r}return e}function n(t){for(var e=t.length-1,i=t[0].y-t[e].y,n=t[e].x-t[0].x,s=t[0].x*t[e].y-t[e].x*t[0].y,o=0,a=0,h=1;e>h;h++){var l=i*t[h].x+n*t[h].y+s,u=l*l;0>l&&u>a?a=u:u>o&&(o=u)}return Math.abs((o+a)/(2*i*(i*i+n*n)))<r}var s=32,r=Math.pow(2,-s-1),o=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],a=new Line(new Point(0,0),new Point(1,0));return{getNearestLocation:function(i){for(var n,s,r=t(this.getPoints(),i),o=e(r,0).concat([0,1]),a=1/0,h=0;h<o.length;h++){var l=this.getPointAt(o[h],!0),u=i.getDistance(l,!0);a>u&&(a=u,n=o[h],s=l)}return new CurveLocation(this,n,s,Math.sqrt(a))},getNearestPoint:function(t){return this.getNearestLocation(t).getPoint()}}}),CurveLocation=this.CurveLocation=Base.extend({initialize:function(t,e,i,n){this._curve=t,this._segment1=t._segment1,this._segment2=t._segment2,this._parameter=e,this._point=i,this._distance=n},getSegment:function(){if(!this._segment){var t=this.getCurve(),e=this.getParameter();if(0==e)this._segment=t._segment1;else if(1==e)this._segment=t._segment2;else{if(null==e)return null;this._segment=t.getLength(0,e)<t.getLength(e,1)?t._segment1:t._segment2}}return this._segment},getCurve:function(){return(!this._curve||arguments[0])&&(this._curve=this._segment1.getCurve(),null==this._curve.getParameterOf(this._point)&&(this._curve=this._segment2.getPrevious().getCurve())),this._curve},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getOffset:function(){var t=this.getPath();return t&&t._getOffset(this)},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getLength(0,e)},getParameter:function(){if((null==this._parameter||arguments[0])&&this._point){var t=this.getCurve(arguments[0]&&this._point);this._parameter=t&&t.getParameterOf(this._point)}return this._parameter},getPoint:function(){if(!this._point&&null!=this._parameter){var t=this.getCurve();this._point=t&&t.getPointAt(this._parameter,!0)}return this._point},getTangent:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getTangentAt(t,!0)},getNormal:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getNormalAt(t,!0)},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(!0);return t&&t.divide(this.getParameter(!0))},split:function(){var t=this.getCurve(!0);return t&&t.split(this.getParameter(!0))},toString:function(){var t=[],e=this.getPoint(),i=Formatter.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var s=this.getParameter();return null!=s&&t.push("parameter: "+i.number(s)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"}}),PathItem=this.PathItem=Item.extend({getIntersections:function(t){if(!this.getBounds().touches(t.getBounds()))return[];for(var e=[],i=this.getCurves(),n=t.getCurves(),s=n.length,r=[],o=0;s>o;o++)r[o]=n[o].getValues();for(var o=0,a=i.length;a>o;o++)for(var h=i[o],l=h.getValues(),u=0;s>u;u++)Curve._addIntersections(l,r[u],h,e);return e},setPathData:function(t){function e(t,e,i){var s=parseFloat(n[t]);return o&&(s+=a[e]),i&&(a[e]=s),s}function i(t,i){return new Point(e(t,"x",i),e(t+1,"y",i))}var n,s,r=t.match(/[a-z][^a-z]*/gi),o=!1,a=new Point;"path"===this._type?this.removeSegments():this.removeChildren();for(var h=0,l=r.length;l>h;h++){var u=r[h];switch(cmd=u[0],lower=cmd.toLowerCase(),n=u.slice(1).trim().split(/[\s,]+|(?=[+-])/),o=cmd===lower,lower){case"m":case"l":for(var c=0;c<n.length;c+=2)this[0===c&&"m"===lower?"moveTo":"lineTo"](i(c,!0));break;case"h":case"v":for(var d="h"==lower?"x":"y",c=0;c<n.length;c++)e(c,d,!0),this.lineTo(a);break;case"c":this.cubicCurveTo(i(0),s=i(2),i(4,!0));break;case"s":this.cubicCurveTo(a.multiply(2).subtract(s),s=i(0),i(2,!0));break;case"q":this.quadraticCurveTo(s=i(0),i(2,!0));break;case"t":for(var c=0;c<n.length;c+=2)this.quadraticCurveTo(s=a.multiply(2).subtract(s),i(c,!0));break;case"a":break;case"z":this.closePath()}}}}),Path=this.Path=PathItem.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this.base();var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||void 0===t.point&&void 0===t.x?null:arguments;this.setSegments(e||[]),t&&!e&&this._set(t)},clone:function(){var t=this._clone(new Path(this._segments));return t._closed=this._closed,void 0!==this._clockwise&&(t._clockwise=this._clockwise),t},_changed:function(t){if(Item.prototype._changed.call(this,t),4&t){if(delete this._length,delete this._clockwise,this._curves)for(var e=0,i=this._curves.length;i>e;e++)this._curves[e]._changed(5)}else 8&t&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(t){this._selectedSegmentState=0,this._segments.length=0,delete this._curves,this._add(Segment.readAll(t))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;i>n;n++)t[n]=Curve.create(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},getPathData:function(){function t(t,e,i){var n=t._point,a=e._point,h=t._handleOut,l=e._handleIn;if(h.isZero()&&l.isZero())i||o.push("L"+r.point(a,s));else{var u=a.subtract(n);o.push("c"+r.point(h,s)+" "+r.point(u.add(l),s)+" "+r.point(u,s))}}var e=this._segments,n=this._style,s=arguments[0],r=Formatter.instance,o=[];if(0===e.length)return"";for(o.push("M"+r.point(e[0]._point)),i=0,l=e.length-1;i<l;i++)t(e[i],e[i+1],!1);return(this._closed&&n._strokeColor||n._fillColor)&&t(e[e.length-1],e[0],!0),this._closed&&o.push("z"),o.join("")},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=Curve.create(this,this._segments[e-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var t=0,e=this._segments.length;e>t;t++)if(!this._segments[t].isLinear())return!1;return!0},applyMatrix:!0,_applyMatrix:function(t){for(var e=new Array(6),i=0,n=this._segments.length;n>i;i++)this._segments[i]._transformCoordinates(t,e,!0);var s=this._style,r=s._fillColor,o=s._strokeColor;return r&&"gradient"===r._type&&r.transform(t),o&&"gradient"===o._type&&o.transform(t),!0},_add:function(t,e){for(var i=this._segments,n=this._curves,s=t.length,r=null==e,e=r?i.length:e,o=this.isFullySelected(),a=0;s>a;a++){var h=t[a];h._path&&(h=t[a]=h.clone()),h._path=this,h._index=e+a,o&&(h._selectionState=4),h._selectionState&&this._updateSelection(h,0,h._selectionState)}if(r)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var a=e+s,l=i.length;l>a;a++)i[a]._index=a}if(n||t._curves){n||(n=this._curves=[]);var u=e>0?e-1:e,c=u,d=Math.min(u+s,this._countCurves());t._curves&&(n.splice.apply(n,[u,0].concat(t._curves)),c+=t._curves.length);for(var a=c;d>a;a++)n.splice(a,0,Base.create(Curve));this._adjustCurves(u,d)}return this._changed(5),t},_adjustCurves:function(t,e){for(var i,n=this._segments,s=this._curves,r=t;e>r;r++)i=s[r],i._path=this,i._segment1=n[r],i._segment2=n[r+1]||n[0];(i=s[this._closed&&0===t?n.length-1:t-1])&&(i._segment2=n[t]||n[0]),(i=s[e])&&(i._segment1=n[e])},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(Segment.readAll(arguments)):this._add([Segment.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(Segment.readAll(arguments,1),t):this._add([Segment.read(arguments,1)],t)[0]},addSegment:function(t){return this._add([Segment.read(arguments)])[0]},insertSegment:function(t,e){return this._add([Segment.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(Segment.readAll(t))},insertSegments:function(t,e){return this._add(Segment.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e){t=t||0,e=Base.pick(e,this._segments.length);var i=this._segments,n=this._curves,s=i.length,r=i.splice(t,e-t),o=r.length;if(!o)return r;for(var a=0;o>a;a++){var h=r[a];h._selectionState&&this._updateSelection(h,h._selectionState,0),delete h._index,delete h._path}for(var a=t,l=i.length;l>a;a++)i[a]._index=a;if(n){var u=e==s+(this._closed?1:0)?t-1:t,n=n.splice(u,o);arguments[2]&&(r._curves=n.slice(1)),this._adjustCurves(u,u)}return this._changed(5),r},isFullySelected:function(){return this._selected&&this._selectedSegmentState==4*this._segments.length},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function(t){t||this._selectSegments(!1),this.base(t)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?4*e:0;for(var i=0;e>i;i++)this._segments[i]._selectionState=t?4:0},_updateSelection:function(t,e,i){t._selectionState=i;var n=this._selectedSegmentState+=i-e;n>0&&this.setSelected(!0)},flatten:function(t){for(var e=new PathFlattener(this),i=0,n=e.length/Math.ceil(e.length/t),s=e.length+(this._closed?-n:n)/2,r=[];s>=i;)r.push(new Segment(e.evaluate(i,0))),i+=n;this.setSegments(r)},simplify:function(t){if(this._segments.length>2){var e=new PathFitter(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null!==e){if(1==arguments.length){var i=t;"number"==typeof i&&(i=this.getLocationAt(i)),t=i.index,e=i.parameter}e>=1&&(t++,e--);var n=this.getCurves();if(t>=0&&t<n.length){e>0&&n[t++].divide(e);var s,r=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):t>0&&(s=this._clone((new Path).insertAbove(this,!0))),s._add(r,0),this.addSegment(r[0]),s}return null}},isClockwise:function(){function t(t,s){void 0!==e&&(n+=(e-t)*(s+i)),e=t,i=s}if(void 0!==this._clockwise)return this._clockwise;for(var e,i,n=0,s=0,r=this._segments.length;r>s;s++){var o=this._segments[s],a=this._segments[r>s+1?s+1:0],h=o._point,l=o._handleOut,u=a._handleIn,c=a._point;t(h._x,h._y),t(h._x+l._x,h._y+l._y),t(c._x+u._x,c._y+u._y),t(c._x,c._y)}return n>0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;e>t;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}void 0!==this._clockwise&&(this._clockwise=!this._clockwise)},join:function(t){if(t){var e=t._segments,i=this.getLastSegment(),n=t.getLastSegment();i._point.equals(n._point)&&t.reverse();var s=t.getFirstSegment();if(i._point.equals(s._point))i.setHandleOut(s._handleOut),this._add(e.slice(1));else{var r=this.getFirstSegment();r._point.equals(s._point)&&t.reverse(),n=t.getLastSegment(),r._point.equals(n._point)?(r.setHandleIn(n._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice())}t.remove();var r=this.getFirstSegment();return i=this.getLastSegment(),i._point.equals(r._point)&&(r.setHandleIn(i._handleIn),i.remove(),this.setClosed(!0)),this._changed(5),!0}return!1},reduce:function(){return this},getLength:function(){if(null==this._length){var t=this.getCurves();this._length=0;for(var e=0,i=t.length;i>e;e++)this._length+=t[e].getLength()}return this._length},_getOffset:function(t){var e=t&&t.getIndex();if(null!=e){for(var i=this.getCurves(),n=0,s=0;e>s;s++)n+=i[s].getLength();var r=i[e];return n+r.getLength(0,t.getParameter())}return null},getLocationOf:function(t){t=Point.read(arguments);for(var e=this.getCurves(),i=0,n=e.length;n>i;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getLocationAt:function(t,e){var i=this.getCurves(),n=0;if(e){var s=~~t;return i[s].getLocationAt(t-s,!0)}for(var r=0,o=i.length;o>r;r++){var a=n,h=i[r];if(n+=h.getLength(),n>=t)return h.getLocationAt(t-a)}return t<=this.getLength()?new CurveLocation(i[i.length-1],1):null},getPointAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getPoint()},getTangentAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getTangent()},getNormalAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getNormal()},getNearestLocation:function(t){for(var e=this.getCurves(),i=1/0,n=null,s=0,r=e.length;r>s;s++){var o=e[s].getNearestLocation(t);o._distance<i&&(i=o._distance,n=o)}return n},getNearestPoint:function(t){return this.getNearestLocation(t).getPoint()},hasFill:function(){return this._style._fillColor||this._parent instanceof CompoundPath&&this._parent._style._fillColor},contains:function(t){t=Point.read(arguments);var e=this.hasFill();if(!this._closed&&!e||!this.getRoughBounds()._containsPoint(t))return!1;for(var i=this.getCurves(),n=this._segments,s=0,r=new Array(3),o=0,a=i.length;a>o;o++)s+=i[o].getCrossings(t,r);return!this._closed&&e&&(s+=Curve.create(this,n[n.length-1],n[0]).getCrossings(t,r)),1==(1&s)},_hitTest:function(t,e){function i(e,i,n){return t.getDistance(i)<a?new HitResult(n,l,{segment:e,point:i}):void 0}function n(t,n){var s=t._point;return(n||e.segments)&&i(t,s,"segment")||!n&&e.handles&&(i(t,s.add(t._handleIn),"handle-in")||i(t,s.add(t._handleOut),"handle-out"))}var s,r,o=this._style,a=e.tolerance||0,h=(e.stroke&&o._strokeColor?o._strokeWidth/2:0)+a,l=this;if(!e.ends||e.segments||this._closed){if(e.segments||e.handles)for(var u=0,c=this._segments.length;c>u;u++)if(r=n(this._segments[u]))return r}else if(r=n(this.getFirstSegment(),!0)||n(this.getLastSegment(),!0))return r;return e.stroke&&h>0&&(s=this.getNearestLocation(t)),!(s&&s._distance<=h)&&e.fill&&this.hasFill()&&this.contains(t)?new HitResult("fill",this):(!s&&e.stroke&&h>0&&(s=this.getNearestLocation(t)),s&&s._distance<=h?e.stroke?new HitResult("stroke",this,{location:s}):new HitResult("fill",this):void 0)}},new function(){function t(t,e,i,n){function s(e){var i=o[e],n=o[e+1];(d!=i||p!=n)&&(t.beginPath(),t.moveTo(d,p),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,r,0,2*Math.PI,!0),t.fill())}for(var r=n/2,o=new Array(6),a=0,h=e.length;h>a;a++){var l=e[a];l._transformCoordinates(i,o,!1);var u=l._selectionState,c=4&u,d=o[0],p=o[1];(c||1&u)&&s(2),(c||2&u)&&s(4),t.save(),t.beginPath(),t.rect(d-r,p-r,n,n),t.fill(),c||(t.beginPath(),t.rect(d-r+1,p-r+1,n-2,n-2),t.fillStyle="#ffffff",t.fill()),t.restore()}}function e(t,e,i){function n(e){var n=d[e];if(i)n._transformCoordinates(i,f,!1),s=f[0],r=f[1];else{var p=n._point;s=p._x,r=p._y}if(g)t.moveTo(s,r),g=!1;else{if(i)h=f[2],l=f[3];else{var m=n._handleIn;h=s+m._x,l=r+m._y}h==s&&l==r&&u==o&&c==a?t.lineTo(s,r):t.bezierCurveTo(u,c,h,l,s,r)}if(o=s,a=r,i)u=f[4],c=f[5];else{var m=n._handleOut;u=o+m._x,c=a+m._y}}for(var s,r,o,a,h,l,u,c,d=e._segments,p=d.length,f=new Array(6),g=!0,m=0;p>m;m++)n(m);e._closed&&p>1&&n(0)}return{draw:function(t,i){i.compound||t.beginPath();var n=this._style,s=n._fillColor,r=n._strokeColor,o=n._dashArray,a=!paper.support.nativeDash&&r&&o&&o.length;if((i.compound||i.clip||s||r&&!a)&&e(t,this),this._closed&&t.closePath(),!i.clip&&!i.compound&&(s||r)&&(this._setStyles(t),s&&t.fill(),r)){if(a){t.beginPath();for(var h,l=new PathFlattener(this),u=n._dashOffset,c=0;u<l.length;)h=u+o[c++%o.length],l.drawPart(t,u,h),u=h+o[c++%o.length]}t.stroke()}},drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),t(i,this._segments,n,this._project.options.handleSize||4)}}},new function(){function t(t){var e=t.length,i=[],n=[],s=2;i[0]=t[0]/s;for(var r=1;e>r;r++)n[r]=1/s,s=(e-1>r?4:2)-n[r],i[r]=(t[r]-i[r-1])/s;for(var r=1;e>r;r++)i[e-r-1]-=n[e-r]*i[e-r];return i}return{smooth:function(){var e,i=this._segments,n=i.length,s=n;if(!(2>=n)){this._closed?(e=Math.min(n,4),s+=2*Math.min(n,e)):e=0;for(var r=[],o=0;n>o;o++)r[o+e]=i[o]._point;if(this._closed)for(var o=0;e>o;o++)r[o]=i[o+n-e]._point,r[o+n+e]=i[o]._point;else s--;for(var a=[],o=1;s-1>o;o++)a[o]=4*r[o]._x+2*r[o+1]._x;a[0]=r[0]._x+2*r[1]._x,a[s-1]=3*r[s-1]._x;for(var h=t(a),o=1;s-1>o;o++)a[o]=4*r[o]._y+2*r[o+1]._y;a[0]=r[0]._y+2*r[1]._y,a[s-1]=3*r[s-1]._y;var l=t(a);if(this._closed){for(var o=0,u=n;e>o;o++,u++){var c=o/e,d=1-c,p=o+e,f=u+e;h[u]=h[o]*c+h[u]*d,l[u]=l[o]*c+l[u]*d,h[f]=h[p]*d+h[f]*c,l[f]=l[p]*d+l[f]*c}s--}for(var g=null,o=e;s-e>=o;o++){var m=i[o-e];g&&m.setHandleIn(g.subtract(m._point)),s>o&&(m.setHandleOut(Point.create(h[o],l[o]).subtract(m._point)),g=s-1>o?Point.create(2*r[o+1]._x-h[o+1],2*r[o+1]._y-l[o+1]):Point.create((r[s]._x+h[s-1])/2,(r[s]._y+l[s-1])/2))}if(this._closed&&g){var m=this._segments[0];m.setHandleIn(g.subtract(m._point))}}}}},new function(){function t(t){var e=t._segments;if(0==e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(t){1===this._segments.length&&this.removeSegment(0),this._segments.length||this._add([new Segment(Point.read(arguments))])},moveBy:function(t){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(t){this._add([new Segment(Point.read(arguments))])},cubicCurveTo:function(e,i,n){var s=Point.read(arguments),r=Point.read(arguments),o=Point.read(arguments),a=t(this);a.setHandleOut(s.subtract(a._point)),this._add([new Segment(o,r.subtract(n))])},quadraticCurveTo:function(e,i){var n=Point.read(arguments),i=Point.read(arguments),s=t(this)._point;this.cubicCurveTo(n.add(s.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(e,i,n){var s=Point.read(arguments),r=Point.read(arguments),o=Base.pick(Base.read(arguments),.5),a=1-o,h=t(this)._point,l=s.subtract(h.multiply(a*a)).subtract(r.multiply(o*o)).divide(2*o*a);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+o);this.quadraticCurveTo(l,r)},arcTo:function(e,i){var n,s=t(this),r=s._point,o=Point.read(arguments),a=Base.pick(Base.peek(arguments),!0);if("boolean"==typeof a){e=o,i=a;var h=r.add(e).divide(2),n=h.add(h.subtract(r).rotate(i?-90:90))}else n=o,e=Point.read(arguments);var l=new Line(r.add(n).divide(2),n.subtract(r).rotate(90)),u=new Line(n.add(e).divide(2),e.subtract(n).rotate(90)),c=l.intersect(u),d=new Line(r,e,!0),p=d.getSide(n);if(!c){if(!p)return this.lineTo(e);throw new Error("Cannot put an arc through the given points: "+[r,n,e])}var f=r.subtract(c),g=(f.getLength(),f.getDirectedAngle(e.subtract(c))),m=d.getSide(c);0==m?g=p*Math.abs(g):p==m&&(g-=360*(0>g?-1:1));for(var v=Math.abs(g),_=v>=360?4:Math.ceil(v/90),b=g/_,y=b*Math.PI/360,w=4/3*Math.sin(y)/(1+Math.cos(y)),x=[],C=0;_>=C;C++){var P=_>C?c.add(f):e,S=_>C?f.rotate(90).multiply(w):null;0==C?s.setHandleOut(S):x.push(new Segment(P,f.rotate(-90).multiply(w),S)),f=f.rotate(b)}this._add(x)},lineBy:function(e){e=Point.read(arguments);var i=t(this);this.lineTo(i._point.add(e))},curveBy:function(e,i,n){e=Point.read(e),i=Point.read(i);var s=t(this)._point;this.curveTo(s.add(e),s.add(i),n)},arcBy:function(e,i){e=Point.read(e),i=Point.read(i);var n=t(this)._point;this.arcBy(n.add(e),n.add(i))},closePath:function(){var t=this.getFirstSegment(),e=this.getLastSegment();t._point.equals(e._point)&&(t.setHandleIn(e._handleIn),e.remove()),this.setClosed(!0)}}},{_getBounds:function(t,e){return Path[t](this._segments,this._closed,this._style,e)},statics:{getBounds:function(t,e,i,n,s){function r(t){t._transformCoordinates(n,a,!1);for(var e=0;2>e;e++)Curve._addBounds(h[e],h[e+4],a[e+2],a[e],e,s?s[e]:0,l,u,c);var i=h;h=a,a=i}var o=t[0];if(!o)return new Rectangle;for(var a=new Array(6),h=o._transformCoordinates(n,new Array(6),!1),l=h.slice(0,2),u=l.slice(),c=new Array(2),d=1,p=t.length;p>d;d++)r(t[d]);return e&&r(o),Rectangle.create(l[0],l[1],u[0]-l[0],u[1]-l[1])},getStrokeBounds:function(t,e,i,n){function s(t,e){if(!e)return[t,t];var i=e.shiftless(),n=i.transform(Point.create(t,0)),s=i.transform(Point.create(0,t)),r=n.getAngleInRadians(),o=n.getLength(),a=s.getLength(),h=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=-Math.atan(a*u/o),d=Math.atan(a/(u*o));return[Math.abs(o*Math.cos(c)*l-a*Math.sin(c)*h),Math.abs(a*Math.sin(d)*l+o*Math.cos(d)*h)]}function r(t){c=c.include(n?n._transformPoint(t,t):t)}function o(t,e){var i=t.getPointAt(e,!0),n=t.getNormalAt(e,!0).normalize(l);r(i.add(n)),r(i.subtract(n))}function a(t,e){if("round"===e||!t._handleIn.isZero()&&!t._handleOut.isZero())c=c.unite(g.setCenter(n?n._transformPoint(t._point):t._point));else if("bevel"==e){var i=t.getCurve();o(i,0),o(i.getPrevious(),1)}else if("miter"==e){var s=t.getCurve(),h=s.getPrevious(),u=s.getPointAt(0,!0),d=h.getNormalAt(1,!0).normalize(l),p=s.getNormalAt(0,!0).normalize(l),m=new Line(u.subtract(d),Point.create(-d.y,d.x)),v=new Line(u.subtract(p),Point.create(-p.y,p.x)),_=m.intersect(v);!_||u.getDistance(_)>f?a(t,"bevel"):r(_)}}function h(t,e,i){switch(e){case"round":return a(t,e);case"butt":case"square":var n=t.getCurve(),s=n.getPointAt(i,!0),o=n.getNormalAt(i,!0).normalize(l);"square"===e&&(s=s.add(o.rotate(0==i?-90:90))),r(s.add(o)),r(s.subtract(o))}}if(!i._strokeColor||!i._strokeWidth)return Path.getBounds(t,e,i,n);for(var l=i._strokeWidth/2,u=s(l,n),c=Path.getBounds(t,e,i,n,u),d=i._strokeJoin,p=i._strokeCap,f=i._miterLimit*i._strokeWidth/2,g=new Rectangle(new Size(u).multiply(2)),m=1,v=t.length-(e?0:1);v>m;m++)a(t[m],d);return e?a(t[0],d):(h(t[0],p,0),h(t[t.length-1],p,1)),c},getHandleBounds:function(t,e,i,n,s,r){var o=new Array(6),a=1/0,h=-a,l=a,u=h;s=s/2||0,r=r/2||0;for(var c=0,d=t.length;d>c;c++){var p=t[c];p._transformCoordinates(n,o,!1);for(var f=0;6>f;f+=2){var g=0==f?r:s,m=o[f],v=o[f+1],_=m-g,b=m+g,y=v-g,w=v+g;a>_&&(a=_),b>h&&(h=b),l>y&&(l=y),w>u&&(u=w)}}return Rectangle.create(a,l,h-a,u-l)},getRoughBounds:function(t,e,i,n){var s=i._strokeColor?i._strokeWidth:0;return Path.getHandleBounds(t,e,i,n,s,"miter"==i._strokeJoin?s*i._miterLimit:s)}}});Path.inject({statics:new function(){function t(t){var e=new Path,i=Base.getNamed(t);return i&&e._set(i),e}function e(){var e=Rectangle.readNamed(arguments,"rectangle"),i=e.getLeft(),n=e.getTop(),s=e.getRight(),r=e.getBottom(),o=t(arguments);return o._add([new Segment(Point.create(i,r)),new Segment(Point.create(i,n)),new Segment(Point.create(s,n)),new Segment(Point.create(s,r))]),o._closed=!0,o}function i(){for(var e=Rectangle.readNamed(arguments,"rectangle"),i=t(arguments),n=e.getPoint(!0),r=e.getSize(!0),o=new Array(4),a=0;4>a;a++){var h=s[a];o[a]=new Segment(h._point.multiply(r).add(n),h._handleIn.multiply(r),h._handleOut.multiply(r))}return i._add(o),i._closed=!0,i}var n=2*(Math.sqrt(2)-1)/3,s=[new Segment([0,.5],[0,n],[0,-n]),new Segment([.5,0],[-n,0],[n,0]),new Segment([1,.5],[0,-n],[0,n]),new Segment([.5,1],[n,0],[-n,0])];return{Line:function(){return new Path(Point.readNamed(arguments,"from"),Point.readNamed(arguments,"to")).set(Base.getNamed(arguments))},Rectangle:e,RoundRectangle:function(){var i=Rectangle.readNamed(arguments,"rectangle"),s=Size.readNamed(arguments,"radius");if(s.isZero())return e(i);s=Size.min(s,i.getSize(!0).divide(2));var r=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),h=i.getBottomRight(!0),l=s.multiply(2*n),u=t(arguments);return u._add([new Segment(r.add(s.width,0),null,[-l.width,0]),new Segment(r.subtract(0,s.height),[0,l.height],null),new Segment(o.add(0,s.height),null,[0,-l.height]),new Segment(o.add(s.width,0),[-l.width,0],null),new Segment(a.subtract(s.width,0),null,[l.width,0]),new Segment(a.add(0,s.height),[0,-l.height],null),new Segment(h.subtract(0,s.height),null,[0,l.height]),new Segment(h.subtract(s.width,0),[l.width,0],null)]),u._closed=!0,u},Ellipse:i,Oval:i,Circle:function(){var t=Point.readNamed(arguments,"center"),e=Base.readNamed(arguments,"radius");return i(new Rectangle(t.subtract(e),Size.create(2*e,2*e))).set(Base.getNamed(arguments))},Arc:function(){var e=Point.readNamed(arguments,"from"),i=Point.readNamed(arguments,"through"),n=Point.readNamed(arguments,"to"),s=t(arguments);return s.moveTo(e),s.arcTo(i,n),s},RegularPolygon:function(){for(var e=Point.readNamed(arguments,"center"),i=Base.readNamed(arguments,"sides"),n=Base.readNamed(arguments,"radius"),s=t(arguments),r=360/i,o=!(i%3),a=new Point(0,o?-n:n),h=o?-1:.5,l=new Array(i),u=0;i>u;u++)l[u]=new Segment(e.add(a.rotate((u+h)*r)));return s._add(l),s._closed=!0,s},Star:function(){for(var e=Point.readNamed(arguments,"center"),i=2*Base.readNamed(arguments,"points"),n=Base.readNamed(arguments,"radius1"),s=Base.readNamed(arguments,"radius2"),r=t(arguments),o=360/i,a=new Point(0,-1),h=new Array(i),l=0;i>l;l++)h[l]=new Segment(e.add(a.rotate(o*l).multiply(l%2?s:n)));return r._add(h),r._closed=!0,r}}}});var CompoundPath=this.CompoundPath=PathItem.extend({_class:"CompoundPath",_serializeFields:{pathData:""},initialize:function(t){this.base(),this._children=[],this._namedChildren={},t&&!this._set(t)&&this.addChildren(Array.isArray(t)?t:arguments)},insertChild:function(t,e,i){return"path"!==e._type?null:(e=this.base(t,e),!i&&e&&void 0===e._clockwise&&e.setClockwise(0==e._index),e)},reduce:function(){if(1==this._children.length){var t=this._children[0];return t.insertAbove(this),this.remove(),t}return this},smooth:function(){for(var t=0,e=this._children.length;e>t;t++)this._children[t].smooth()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;n>i;i++)e=e.concat(t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getPathData:function(){for(var t=this._children,e=[],i=0,n=t.length;n>i;i++)e.push(t[i].getPathData(arguments[0]));return e.join(" ")},_contains:function(t){for(var e=[],i=0,n=this._children.length;n>i;i++){var s=this._children[i];s.contains(t)&&e.push(s)}return 1==(1&e.length)&&e},contains:function(t){return!!this._contains(Point.read(arguments))},_hitTest:function(t,e){var i=this.base(t,Base.merge(e,{fill:!1}));return!i&&e.fill&&this._style._fillColor&&(i=this._contains(t),i=i?new HitResult("fill",i[0]):null),i},draw:function(t,e){var i=this._children,n=this._style;if(0!==i.length){t.beginPath(),e.compound=!0;for(var s=0,r=i.length;r>s;s++)Item.draw(i[s],t,e);e.compound=!1,e.clip||(this._setStyles(t),n._fillColor&&t.fill(),n._strokeColor&&t.stroke())}}},new function(){function t(t){if(!t._children.length)throw new Error("Use a moveTo() command first");return t._children[t._children.length-1]}var e={moveTo:function(t){var e=new Path;this.addChild(e),e.moveTo.apply(e,arguments)},moveBy:function(e){this.moveTo(t(this).getLastSegment()._point.add(Point.read(arguments)))},closePath:function(){t(this).closePath()}};return Base.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(i){e[i]=function(){var e=t(this);e[i].apply(e,arguments)}}),e}),PathFlattener=Base.extend({initialize:function(t){function e(t,e){var i=Curve.getValues(t,e);r.curves.push(i),r._computeParts(i,t._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;for(var i,n=t._segments,s=n[0],r=this,o=1,a=n.length;a>o;o++)i=n[o],e(s,i),s=i;t._closed&&e(i,n[0])},_computeParts:function(t,e,i,n){if(n-i>1/32&&!Curve.isFlatEnough(t,.25)){var s=Curve.subdivide(t),r=(i+n)/2;this._computeParts(s[0],e,i,r),this._computeParts(s[1],e,r,n)}else{var o=t[6]-t[0],a=t[7]-t[1],h=Math.sqrt(o*o+a*a);h>1e-5&&(this.length+=h,this.parts.push({offset:this.length,value:n,index:e}))}},getParameterAt:function(t){for(var e,i=this.index;e=i,!(0==i||this.parts[--i].offset<t););for(var n=this.parts.length;n>e;e++){var s=this.parts[e];if(s.offset>=t){this.index=e;var r=this.parts[e-1],o=r&&r.index==s.index?r.value:0,a=r?r.offset:0;return{value:o+(s.value-o)*(t-a)/(s.offset-a),index:s.index}}}var s=this.parts[this.parts.length-1];return{value:1,index:s.index}},evaluate:function(t,e){var i=this.getParameterAt(t);return Curve.evaluate(this.curves[i.index],i.value,!0,e)},drawPart:function(t,e,i){e=this.getParameterAt(e),
i=this.getParameterAt(i);for(var n=e.index;n<=i.index;n++){var s=Curve.getPart(this.curves[n],n==e.index?e.value:0,n==i.index?i.value:1);n==e.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}}),PathFitter=Base.extend({initialize:function(t,e){this.points=[];for(var i,n=t._segments,s=0,r=n.length;r>s;s++){var o=n[s].point.clone();i&&i.equals(o)||(this.points.push(o),i=o)}this.error=e},fit:function(){var t=this.points,e=t.length;return this.segments=e>0?[new Segment(t[0])]:[],e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.segments},fitCubic:function(t,e,i,n){if(e-t==1){var s=this.points[t],r=this.points[e],o=s.getDistance(r)/3;return void this.addCurve([s,s.add(i.normalize(o)),r.add(n.normalize(o)),r])}for(var a,h=this.chordLengthParameterize(t,e),l=Math.max(this.error,this.error*this.error),u=0;4>=u;u++){var c=this.generateBezier(t,e,h,i,n),d=this.findMaxError(t,e,c,h);if(d.error<this.error)return void this.addCurve(c);if(a=d.index,d.error>=l)break;this.reparameterize(t,e,h,c),l=d.error}var p=this.points[a-1].subtract(this.points[a]),f=this.points[a].subtract(this.points[a+1]),g=p.add(f).divide(2).normalize();this.fitCubic(t,a,i,g),this.fitCubic(a,e,g.negate(),n)},addCurve:function(t){var e=this.segments[this.segments.length-1];e.setHandleOut(t[1].subtract(t[0])),this.segments.push(new Segment(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,i,n,s){for(var r=1e-11,o=this.points[t],a=this.points[e],h=[[0,0],[0,0]],l=[0,0],u=0,c=e-t+1;c>u;u++){var d=i[u],p=1-d,f=3*d*p,g=p*p*p,m=f*p,v=f*d,_=d*d*d,b=n.normalize(m),y=s.normalize(v),w=this.points[t+u].subtract(o.multiply(g+m)).subtract(a.multiply(v+_));h[0][0]+=b.dot(b),h[0][1]+=b.dot(y),h[1][0]=h[0][1],h[1][1]+=y.dot(y),l[0]+=b.dot(w),l[1]+=y.dot(w)}var x,C,P=h[0][0]*h[1][1]-h[1][0]*h[0][1];if(Math.abs(P)>r){var S=h[0][0]*l[1]-h[1][0]*l[0],k=l[0]*h[1][1]-l[1]*h[0][1];x=k/P,C=S/P}else{var I=h[0][0]+h[0][1],z=h[1][0]+h[1][1];x=C=Math.abs(I)>r?l[0]/I:Math.abs(z)>r?l[1]/z:0}var T=a.getDistance(o);return r*=T,(r>x||r>C)&&(x=C=T/3),[o,o.add(n.normalize(x)),a.add(s.normalize(C)),a]},reparameterize:function(t,e,i,n){for(var s=t;e>=s;s++)i[s-t]=this.findRoot(n,this.points[s],i[s-t])},findRoot:function(t,e,i){for(var n=[],s=[],r=0;2>=r;r++)n[r]=t[r+1].subtract(t[r]).multiply(3);for(var r=0;1>=r;r++)s[r]=n[r+1].subtract(n[r]).multiply(2);var o=this.evaluate(3,t,i),a=this.evaluate(2,n,i),h=this.evaluate(1,s,i),l=o.subtract(e),u=a.dot(a)+l.dot(h);return Math.abs(u)<1e-5?i:i-l.dot(a)/u},evaluate:function(t,e,i){for(var n=e.slice(),s=1;t>=s;s++)for(var r=0;t-s>=r;r++)n[r]=n[r].multiply(1-i).add(n[r+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;e>=n;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,s=e-t;s>=n;n++)i[n]/=i[s];return i},findMaxError:function(t,e,i,n){for(var s=Math.floor((e-t+1)/2),r=0,o=t+1;e>o;o++){var a=this.evaluate(3,i,n[o-t]),h=a.subtract(this.points[o]),l=h.x*h.x+h.y*h.y;l>=r&&(r=l,s=o)}return{error:r,index:s}}}),TextItem=this.TextItem=Item.extend({_boundsSelected:!0,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(t){var e=t&&Base.isPlainObject(t)&&void 0===t.x&&void 0===t.y;this.base(e?null:Point.read(arguments)),this._content="",this._lines=[],e&&this._set(t)},_clone:function(t){return t.setContent(this._content),this.base(t)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(69)},isEmpty:function(){return!this._content},getCharacterStyle:function(){return this.getStyle()},setCharacterStyle:function(t){this.setStyle(t)},getParagraphStyle:function(){return this.getStyle()},setParagraphStyle:function(t){this.setStyle(t)}}),PointText=this.PointText=TextItem.extend({_class:"PointText",clone:function(){return this._clone(new PointText)},getPoint:function(){var t=this._matrix.getTranslation();return LinkedPoint.create(this,"setPoint",t.x,t.y)},setPoint:function(t){this.translate(Point.read(arguments).subtract(this._matrix.getTranslation()))},draw:function(t){if(this._content){this._setStyles(t);var e=this._style,i=this._lines,n=e.getLeading();t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var s=0,r=i.length;r>s;s++){var o=i[s];e._fillColor&&t.fillText(o,0,0),e._strokeColor&&t.strokeText(o,0,0),t.translate(0,n)}}}},new function(){var t=null;return{_getBounds:function(e,i){t||(t=CanvasProvider.getContext(1,1));var n=this._style,s=this._lines,r=s.length,o=n.getJustification(),a=n.getLeading(),h=0;t.font=n.getFontStyle();for(var l=0,u=0;r>u;u++)l=Math.max(l,t.measureText(s[u]).width);"left"!==o&&(h-=l/("center"===o?2:1));var c=Rectangle.create(h,r?a/4+(r-1)*a:0,l,-r*a);return i?i._transformBounds(c,c):c}}}),Style=this.Style=Base.extend(new function(){var t={fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[],font:"sans-serif",fontSize:12,leading:null,justification:"left"},e=Base.merge(t,{fillColor:"black"}),i={strokeWidth:25,strokeCap:25,strokeJoin:25,miterLimit:25,font:5,fontSize:5,leading:5,justification:5},n={},s={getDefaults:function(){return this._item instanceof TextItem?e:t}};return Base.each(t,function(t,e){var r=/Color$/.test(e),o=Base.capitalize(e),a="set"+o,h="get"+o;s[a]=function(t){var n=this._item&&this._item._children;if(t=r?Color.read(arguments,0,0,!0):t,n&&n.length>0&&"compound-path"!==this._item._type)for(var s=0,o=n.length;o>s;s++)n[s]._style[a](t);else{var h=this["_"+e];Base.equals(h,t)||(r&&(h&&delete h._owner,t&&(t._owner=this._item)),this["_"+e]=t,this._item&&this._item._changed(i[e]||17))}},s[h]=function(){var t,i=this._item&&this._item._children;if(!i||0===i.length||"compound-path"===this._item._type)return this["_"+e];for(var n=0,s=i.length;s>n;n++){var r=i[n]._style[h]();if(t){if(!Base.equals(t,r))return}else t=r}return t},n[h]=function(){return this._style[h]()},n[a]=function(t){this._style[a](t)}}),Item.inject(n),s},{initialize:function(t){var e=t instanceof Style;return Base.each(this.getDefaults(),function(i,n){i=t&&t[n]||i,this[n]=i&&e&&i.clone?i.clone():i},this)},getLeading:function(){var t=this.base();return null!=t?t:1.2*this._fontSize},getFontStyle:function(){var t=this._fontSize;return(/[a-z]/i.test(t)?t+" ":t+"px ")+this._font},statics:{create:function(t){var e=Base.create(this);return e._item=t,e}}}),Color=this.Color=Base.extend(new function(){function t(t){var e=r[t];if(!e){i||(i=CanvasProvider.getContext(1,1),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=t,i.fillRect(0,0,1,1);var n=i.getImageData(0,0,1,1).data;e=r[t]=[n[0]/255,n[1]/255,n[2]/255]}return e.slice()}function e(t){var e=t.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(e.length>=4){for(var i=[0,0,0],n=0;3>n;n++){var s=e[n+1];i[n]=parseInt(1==s.length?s+s:s,16)/255}return i}}var i,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},s={},r={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,o=0===r?0:60*(n==t?(e-i)/r+(i>e?6:0):n==e?(i-t)/r+2:(t-e)/r+4);return[o,0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){var t=t/60%6,n=Math.floor(t),s=t-n,n=o[n],r=[i,i*(1-e),i*(1-e*s),i*(1-e*(1-s))];return[r[n[0]],r[n[1]],r[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,o=0===r,a=o?0:60*(n==t?(e-i)/r+(i>e?6:0):n==e?(i-t)/r+2:(t-e)/r+4),h=(n+s)/2,l=o?0:.5>h?r/(n+s):r/(2-n-s);return[a,l,h]},"hsl-rgb":function(t,e,i){if(t/=360,0===e)return[i,i,i];for(var n=[t+1/3,t,t-1/3],s=.5>i?i*(1+e):i+e-i*e,r=2*i-s,o=[],a=0;3>a;a++){var h=n[a];0>h&&(h+=1),h>1&&(h-=1),o[a]=1>6*h?r+6*(s-r)*h:1>2*h?s:2>3*h?r+(s-r)*(2/3-h)*6:r}return o},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(t){return[]},"rgb-gradient":function(t,e,i){return[]}};return Base.each(n,function(t,e){s[e]=[],Base.each(t,function(t,i){var n=Base.capitalize(t),r=/^(hue|saturation)$/.test(t),o=s[e][i]="gradient"===t?function(t){var e=this._components[0];return t=Gradient.read(Array.isArray(t)?t:arguments,0,0,!1,!0),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"hue"===t?function(t){return isNaN(t)?0:(t%360+360)%360}:"gradient"===e?function(e){return Point.read(arguments,0,0,!0,"highlight"===t)}:function(t){return isNaN(t)?0:Math.min(Math.max(t,0),1)};this["get"+n]=function(){return this._type===e||r&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(e)[i]},this["set"+n]=function(t){this._type===e||r&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._type=e),t=o.call(this,t),null!=t&&(this._components[i]=t,this._changed())}},this)},{_class:"Color",_readNull:!0,_readIndex:!0,initialize:function(i){var r,o,a,h=Array.prototype.slice,l=arguments,u=0;Array.isArray(i)&&(l=i,i=l[0]),"string"==typeof i&&i in n&&(r=i,this._read&&(u=1),l=h.call(l,1),i=l[0]);var c=null!=i&&typeof i,d="number"===c?l:"object"===c&&null!=i.length?i:null;if(d){r||(r=d.length>=3?"rgb":"gray");var p=n[r].length;a=d[p],this._read&&(u+=d===arguments?p+(null!=a?1:0):1),d.length>p&&(d=h.call(d,0,p))}else{if("string"===c)o=i.match(/^#[0-9a-f]{3,6}$/i)?e(i):t(i),r="rgb";else if("object"===c)if("Color"===i._class)r=i._type,o=i._components.slice(),a=i._alpha;else if("Gradient"===i._class)r="gradient",d=l;else{r="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i?"gradient":"gray"in i?"gray":"rgb";var f=n[r];_=s[r],this._components=o=[];for(var g=0,m=f.length;m>g;g++){var v=i[f[g]];null==v&&0===g&&"gradient"===r&&"stops"in i&&(v={stops:i.stops,radial:i.radial}),v=_[g].call(this,v),null!=v&&(o[g]=v)}a=i.alpha}this._read&&r&&(u=1)}if(this._type=r||"rgb","gradient"===r&&(this._id=++Base._uid),!o){this._components=o=[];for(var _=s[this._type],g=0,m=_.length;m>g;g++){var v=_[g].call(this,d&&d[g]);null!=v&&(o[g]=v)}}this._components=o,this._alpha=a,this._read&&(this._read=u)},_serialize:function(t,e){return Base.serialize(/^(gray|rgb)$/.test(this._type)?this._components:[this._type].concat(this._components),t,!0,e)},_changed:function(){this._css=null,this._canvasGradient=null,this._owner&&this._owner._changed(17)},clone:function(){return Color.create(this._type,this._components.slice(),this._alpha)},_convert:function(t){var e;return this._type==t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return Color.create(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){return t&&this._type===t._type&&this._alpha===t._alpha&&Base.equals(this._components,t._components)},toString:function(){for(var t=n[this._type],e=[],i="gradient"===this._type,s=Formatter.instance,r=0,o=t.length;o>r;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(i?a:s.number(a)))}return null!=this._alpha&&e.push("alpha: "+s.number(this._alpha)),"{ "+e.join(", ")+" }"},toCss:function(t){var e=this._css;if(!e||t){var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;i=[Math.round(255*i[0]),Math.round(255*i[1]),Math.round(255*i[2])],1>n&&i.push(n);var e=(4==i.length?"rgba(":"rgb(")+i.join(", ")+")";t||(this._css=e)}return e},toCanvasStyle:function(t){if("gradient"!==this._type)return this.toCss();if(this._canvasGradient)return this._canvasGradient;var e,i=this._components,n=i[0],s=n._stops,r=i[1],o=i[2];if(n._radial){var a=o.getDistance(r),h=i[3];if(h){var l=h.subtract(r);l.getLength()>a&&(h=r.add(l.normalize(a-.1)))}var u=h||r;e=t.createRadialGradient(u.x,u.y,0,r.x,r.y,a)}else e=t.createLinearGradient(r.x,r.y,o.x,o.y);for(var c=0,d=s.length;d>c;c++){var p=s[c];e.addColorStop(p._rampPoint,p._color.toCss())}return this._canvasGradient=e},transform:function(t){if("gradient"===this._type)for(var e=this._components,i=1,n=e.length;n>i;i++){var s=e[i];t._transformPoint(s,s,!0)}},statics:{_types:n,create:function(t,e,i){var n=Base.create(Color);if(n._type=t,n._components=e,n._alpha=i,"gradient"===t){n._id=++Base._uid;for(var s=1,r=e.length;r>s;s++){var o=e[s];o&&(e[s]=o.clone())}}return n},random:function(){var t=Math.random;return new Color(t(),t(),t())}}})});Base.each(Color._types,function(t,e){var i=this[Base.capitalize(e)+"Color"]=function(t){var i=null!=t&&typeof t,n="object"===i&&null!=t.length?t:"string"===i?null:arguments;return n?new Color(e,n):new Color(t)};3==e.length&&(this[e.toUpperCase()+"Color"]=i)},this);var Gradient=this.Gradient=Base.extend({_class:"Gradient",initialize:function(t,e){this._id=++Base._uid,t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&delete this._owners)},clone:function(){for(var t=[],e=0,i=this._stops.length;i>e;e++)t[e]=this._stops[e].clone();return new this.constructor(t)},getStops:function(){return this._stops},setStops:function(t){if(this.stops)for(var e=0,i=this._stops.length;i>e;e++)delete this._stops[e]._owner;if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=GradientStop.readAll(t,0,!0);for(var e=0,i=this._stops.length;i>e;e++){var n=this._stops[e];n._owner=this,n._defaultRamp&&n.setRampPoint(e/(i-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t&&t.constructor==this.constructor&&this._stops.length==t._stops.length){for(var e=0,i=this._stops.length;i>e;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),GradientStop=this.GradientStop=Base.extend({initialize:function(t,e){if(t){var i,n;void 0===e&&Array.isArray(t)?(i=t[0],n=t[1]):t.color?(i=t.color,n=t.rampPoint):(i=t,n=e),this.setColor(i),this.setRampPoint(n)}},clone:function(){return new GradientStop(this._color.clone(),this._rampPoint)},_serialize:function(t,e){return Base.serialize([this._color,this._rampPoint],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=Color.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t==this||t instanceof GradientStop&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint}}),DomElement=new function(){function t(e,i){for(var n=[],s=0,r=e&&e.length;r>s;){var o=e[s++];if("string"==typeof o)o=document.createElement(o);else if(!o||!o.nodeType)continue;Base.isPlainObject(e[s])&&DomElement.set(o,e[s++]),Array.isArray(e[s])&&t(e[s++],o),i&&i.appendChild(o),n.push(o)}return n}var e=/^(checked|value|selected|disabled)$/i,i={text:"textContent",html:"innerHTML"},n={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(e,i){var n=Array.isArray(e),s=t(n?e:arguments,n?i:null);return 1==s.length?s[0]:s},find:function(t,e){return(e||document).querySelector(t)},findAll:function(t,e){return(e||document).querySelectorAll(t)},get:function(t,n){return t?e.test(n)?"value"===n||"string"!=typeof t[n]?t[n]:!0:n in i?t[i[n]]:t.getAttribute(n):null},set:function(t,n,s){if("string"!=typeof n)for(var r in n)n.hasOwnProperty(r)&&this.set(t,r,n[r]);else{if(!t||void 0===s)return t;e.test(n)?t[n]=s:n in i?t[i[n]]=s:"style"===n?this.setStyle(t,s):"events"===n?DomEvent.add(t,s):t.setAttribute(n,s)}return t},getStyles:function(t){var e=t&&t.ownerDocument.defaultView;return e&&e.getComputedStyle(t,"")},getStyle:function(t,e){return t&&t.style[e]||this.getStyles(t)[e]||null},setStyle:function(t,e,i){if("string"!=typeof e)for(var s in e)e.hasOwnProperty(s)&&this.setStyle(t,s,e[s]);else!/^-?[\d\.]+$/.test(i)||e in n||(i+="px"),t.style[e]=i;return t},hasClass:function(t,e){return new RegExp("\\s*"+e+"\\s*").test(t.className)},addClass:function(t,e){t.className=(t.className+" "+e).trim()},removeClass:function(t,e){t.className=t.className.replace(new RegExp("\\s*"+e+"\\s*")," ").trim()},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},getBounds:function(t,e){var i=t.getBoundingClientRect(),n=t.ownerDocument,s=n.body,r=n.documentElement,o=i.left-(r.clientLeft||s.clientLeft||0),a=i.top-(r.clientTop||s.clientTop||0);if(!e){var h=n.defaultView;o+=h.pageXOffset||r.scrollLeft||s.scrollLeft,a+=h.pageYOffset||r.scrollTop||s.scrollTop}return new Rectangle(o,a,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return Rectangle.create(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return this.getBounds(t,e).getPoint()},getSize:function(t){return this.getBounds(t,!0).getSize()},isInvisible:function(t){return this.getSize(t).equals([0,0])},isInView:function(t){return!this.isInvisible(t)&&this.getViewportBounds(t).intersects(this.getBounds(t,!0))}}},DomEvent={add:function(t,e){for(var i in e){var n=e[i];t.addEventListener?t.addEventListener(i,n,!1):t.attachEvent&&t.attachEvent("on"+i,n.bound=function(){n.call(t,window.event)})}},remove:function(t,e){for(var i in e){var n=e[i];t.removeEventListener?t.removeEventListener(i,n,!1):t.detachEvent&&t.detachEvent("on"+i,n.bound)}},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return Point.create(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getOffset:function(t,e){return DomEvent.getPoint(t).subtract(DomElement.getOffset(e||DomEvent.getTarget(t)))},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},stop:function(t){DomEvent.stopPropagation(t),DomEvent.preventDefault(t)}};DomEvent.requestAnimationFrame=new function(){var t="equestAnimationFrame",e=window["r"+t]||window["webkitR"+t]||window["mozR"+t]||window["oR"+t]||window["msR"+t];e&&e(function(t){null==t&&(e=null)});var i,n=[],s=!0;return DomEvent.add(window,{focus:function(){s=!0},blur:function(){s=!1}}),function(t,r){return e?e(t,r):(n.push([t,r]),void(i||(i=setInterval(function(){for(var t=n.length-1;t>=0;t--){var e=n[t],i=e[0],r=e[1];(!r||("true"==PaperScript.getAttribute(r,"keepalive")||s)&&DomElement.isInView(r))&&(n.splice(t,1),i(Date.now()))}},1e3/60))))}};var View=this.View=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._project=paper.project,this._element=t;var e;if(this._id=t.getAttribute("id"),null==this._id&&t.setAttribute("id",this._id="view-"+View._id++),DomEvent.add(t,this._viewHandlers),PaperScript.hasAttribute(t,"resize")){var i=DomElement.getOffset(t,!0),n=this;e=DomElement.getViewportBounds(t).getSize().subtract(i),this._windowHandlers={resize:function(e){DomElement.isInvisible(t)||(i=DomElement.getOffset(t,!0)),n.setViewSize(DomElement.getViewportBounds(t).getSize().subtract(i))}},DomEvent.add(window,this._windowHandlers)}else e=Size.create(parseInt(t.getAttribute("width"),10),parseInt(t.getAttribute("height"),10)),e.isNaN()&&(e=DomElement.getSize(t));if(t.width=e.width,t.height=e.height,PaperScript.hasAttribute(t,"stats")){this._stats=new Stats;var s=this._stats.domElement,r=s.style,i=DomElement.getOffset(t);r.position="absolute",r.left=i.x+"px",r.top=i.y+"px",document.body.appendChild(s)}View._views.push(this),View._viewsById[this._id]=this,this._viewSize=LinkedSize.create(this,"setViewSize",e.width,e.height),this._matrix=new Matrix,this._zoom=1,View._focused||(View._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(View._focused==this&&(View._focused=null),View._views.splice(View._views.indexOf(this),1),delete View._viewsById[this._id],this._project.view==this&&(this._project.view=null),DomEvent.remove(this._element,this._viewHandlers),DomEvent.remove(window,this._windowHandlers),this._element=this._project=null,this.detach("frame"),this._frameItems={},!0):!1},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._handleFrame(!0))},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,_handleFrame:function(t){if(this._requested=!1,this._animate){if(paper=this._scope,t){this._requested=!0;var e=this;DomEvent.requestAnimationFrame(function(){e._handleFrame(!0)},this._element)}var i=Date.now()/1e3,n=this._before?i-this._before:0;this._before=i,this._handlingFrame=!0,this.fire("frame",Base.merge({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.draw(!0)}},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.attach("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.fire("frame",Base.merge(t,{time:i.time+=t.delta,count:i.count++}))}},_redraw:function(){this._redrawNeeded=!0,this._handlingFrame||(this._animate?this._handleFrame():this.draw())},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._inverse=null,this._redraw()},getElement:function(){return this._element},getViewSize:function(){return this._viewSize},setViewSize:function(t){t=Size.read(arguments);var e=t.subtract(this._viewSize);e.isZero()||(this._element.width=t.width,this._element.height=t.height,this._viewSize.set(t.width,t.height,!0),this._bounds=null,this.fire("resize",{size:t,delta:e}),this._redraw())},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new Rectangle(new Point,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(t){this.scrollBy(Point.read(arguments).subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new Matrix).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return DomElement.isInView(this._element)},scrollBy:function(t){this._transform((new Matrix).translate(Point.read(arguments).negate()))},projectToView:function(t){return this._matrix._transformPoint(Point.read(arguments))},viewToProject:function(t){return this._getInverse()._transformPoint(Point.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.inverted()),this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t){return"string"==typeof t&&(t=document.getElementById(t)),new CanvasView(t)}}},new function(){function t(t){var e=DomEvent.getTarget(t);return e.getAttribute&&View._viewsById[e.getAttribute("id")]}function e(t,e){return t.viewToProject(DomEvent.getOffset(e,t._element))}function i(){if(!View._focused||!View._focused.isVisible())for(var t=0,e=View._views.length;e>t;t++){var i=View._views[t];if(i&&i.isVisible()){View._focused=l=i;break}}}function n(i){var n=View._focused=t(i),s=e(n,i);u=!0,n._onMouseDown&&n._onMouseDown(i,s),(a=n._scope._tool)&&a._onHandleEvent("mousedown",s,i),n.draw(!0)}function s(n){var s;if(u||(s=t(n),s?(h=View._focused,View._focused=l=s):l&&l==View._focused&&(View._focused=h,i())),s=s||View._focused){var r=n&&e(s,n);s._onMouseMove&&s._onMouseMove(n,r),(a=s._scope._tool)&&a._onHandleEvent(u&&a.responds("mousedrag")?"mousedrag":"mousemove",r,n)&&DomEvent.stop(n),s.draw(!0)}}function r(t){var i=View._focused;if(i&&u){var n=e(i,t);curPoint=null,u=!1,i._onMouseUp&&i._onMouseUp(t,n),a&&a._onHandleEvent("mouseup",n,t)&&DomEvent.stop(t),i.draw(!0)}}function o(t){u&&DomEvent.stop(t)}var a,h,l,u=!1;return DomEvent.add(document,{mousemove:s,mouseup:r,touchmove:s,touchend:r,selectstart:o,scroll:i}),DomEvent.add(window,{load:i}),{_viewHandlers:{mousedown:n,touchstart:n,selectstart:o},statics:{updateFocus:i}}}),CanvasView=View.extend({initialize:function(t){if(!(t instanceof HTMLCanvasElement)){var e=Size.read(arguments,1);e.isZero()&&(e=Size.create(1024,768)),t=CanvasProvider.getCanvas(e)}this._context=t.getContext("2d"),this._eventCounters={},this.base(t)},draw:function(t){if(t&&!this._redrawNeeded)return!1;var e=this._context,i=this._viewSize;return e.clearRect(0,0,i._width+1,i._height+1),this._project.draw(e,this._matrix),this._redrawNeeded=!1,!0}},new function(){function t(t,e,i,n,s,r){for(var o,a=n;a;){if(a.responds(t)&&(o||(o=new MouseEvent(t,e,i,n,s?i.subtract(s):null)),a.fire(t,o)&&(!r||o._stopped)))return!1;a=a.getParent()}return!0}function e(e,i,n,s,r){if(e._eventCounters[i]){var o=e._project,l=o.hitTest(s,{tolerance:o.options.hitTolerance||0,fill:!0,stroke:!0}),u=l&&l.item;if(u)return"mousemove"===i&&u!=a&&(r=s),"mousemove"===i&&h||t(i,n,s,u,r),u}}var i,n,s,r,o,a,h,l,u;return{_onMouseDown:function(t,a){var c=e(this,"mousedown",t,a);l=o==c&&Date.now()-u<300,r=o=c,i=n=s=a,h=r&&r.responds("mousedrag")},_onMouseUp:function(o,a){var c=e(this,"mouseup",o,a);h&&(n&&!n.equals(a)&&t("mousedrag",o,a,r,n),c!=r&&(s=a,t("mousemove",o,a,c,s))),c===r&&(u=Date.now(),(!l||t("doubleclick",o,i,c))&&t("click",o,i,c),l=!1),r=null,h=!1},_onMouseMove:function(i,o){r&&t("mousedrag",i,o,r,n);var h=e(this,"mousemove",i,o,s);n=s=o,h!==a&&(t("mouseleave",i,o,a),a=h,t("mouseenter",i,o,h))}}}),Event=this.Event=Base.extend({initialize:function(t){this.event=t},preventDefault:function(){this._prevented=!0,DomEvent.preventDefault(this.event)},stopPropagation:function(){this._stopped=!0,DomEvent.stopPropagation(this.event)},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return Key.modifiers}}),KeyEvent=this.KeyEvent=Event.extend({initialize:function(t,e,i,n){this.base(n),this.type=t?"keydown":"keyup",this.key=e,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Key=this.Key=new function(){function t(t,e,n,s){var o=String.fromCharCode(n),a=i[e]||o.toLowerCase(),h=t?"keydown":"keyup",l=View._focused,u=l&&l.isVisible()&&l._scope,c=u&&u._tool;r[a]=t,c&&c.responds(h)&&(c.fire(h,new KeyEvent(t,a,o,s)),l&&l.draw(!0))}var e,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},n=Base.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),s={},r={};return DomEvent.add(document,{keydown:function(r){var o,a=r.which||r.keyCode,h=i[a];h?((o=Base.camelize(h))in n&&(n[o]=!0),s[a]=0,t(!0,a,null,r)):e=a},keypress:function(i){if(null!=e){var n=i.which||i.keyCode;s[e]=n,t(!0,e,n,i),e=null}},keyup:function(e){var r,o=e.which||e.keyCode,a=i[o];a&&(r=Base.camelize(a))in n&&(n[r]=!1),null!=s[o]&&(t(!1,o,s[o],e),delete s[o])}}),{modifiers:n,isDown:function(t){return!!r[t]}}},MouseEvent=this.MouseEvent=Event.extend({initialize:function(t,e,i,n,s){this.base(e),this.type=t,this.point=i,this.target=n,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Palette=this.Palette=Base.extend(Callback,{_events:["onChange"],initialize:function(t,e,i){var n=DomElement.find(".palettejs-panel")||DomElement.find("body").appendChild(DomElement.create("div",{"class":"palettejs-panel"}));this._element=n.appendChild(DomElement.create("table",{"class":"palettejs-pane"})),this._title=t,i||(i={});for(var s in this._components=e){var r=e[s];r instanceof Component||(null==r.value&&(r.value=i[s]),r.name=s,r=e[s]=new Component(r)),this._element.appendChild(r._element),r._palette=this,void 0===i[s]&&(i[s]=r.value)}this._values=Base.each(i,function(t,n){var s=e[n];s&&Base.define(i,n,{enumerable:!0,configurable:!0,writable:!0,get:function(){return s._value},set:function(t){s.setValue(t)}})}),window.paper&&paper.palettes.push(this)},reset:function(){for(var t in this._components)this._components[t].reset()},remove:function(){DomElement.remove(this._element)}}),Component=this.Component=Base.extend(Callback,{_events:["onChange","onClick"],_types:{"boolean":{type:"checkbox",value:"checked"},string:{type:"text"},number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){DomElement.removeChildren(this._inputItem),DomElement.create(Base.each(this._options,function(t){this.push("option",{value:t,text:t})},[]),this._inputItem)}}},initialize:function(t){this._type=t.type in this._types?t.type:"options"in t?"list":"onClick"in t?"button":typeof t.value,this._info=this._types[this._type]||{type:this._type};var e=this,i=!1;this._inputItem=DomElement.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){e.setValue(DomElement.get(this,e._info.value||"value")),i&&(e._palette.fire("change",e,e.name,e._value),e.fire("change",e._value))},click:function(){e.fire("click")}}}),this._element=DomElement.create("tr",[this._labelItem=DomElement.create("td"),"td",[this._inputItem]]),Base.each(t,function(t,e){this[e]=t},this),this._defaultValue=this._value,i=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(t){this._label=t,DomElement.set(this._labelItem,"text",t+":")},getOptions:function(){return this._options},setOptions:function(t){this._options=t,this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(t){var e=this._info.value||"value";DomElement.set(this._inputItem,e,t),t=DomElement.get(this._inputItem,e),this._value=this._info.number?parseFloat(t,10):t},getRange:function(){return[parseFloat(DomElement.get(this._inputItem,"min")),parseFloat(DomElement.get(this._inputItem,"max"))]},setRange:function(t,e){var i=Array.isArray(t)?t:[t,e];DomElement.set(this._inputItem,{min:i[0],max:i[1]})},getMin:function(){return this.getRange()[0]},setMin:function(t){this.setRange(t,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(t){this.setRange(this.getMin(),t)},getStep:function(){return parseFloat(DomElement.get(this._inputItem,"step"))},setStep:function(t){DomElement.set(this._inputItem,"step",t)},reset:function(){this.setValue(this._defaultValue)}}),ToolEvent=this.ToolEvent=Event.extend({_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t;
},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this.middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;i instanceof Group&&!(i instanceof Layer)||i instanceof CompoundPath;)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Tool=this.Tool=PaperScopeItem.extend({_list:"tools",_reference:"_tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){this.base(),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._maxDistance<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=t,this._maxDistance=t},_updateEvent:function(t,e,i,n,s,r,o){if(!s){if(null!=i||null!=n){var a=null!=i?i:0,h=e.subtract(this._point),l=h.getLength();if(a>l)return!1;var u=null!=n?n:0;if(0!=u)if(l>u)e=this._point.add(h.normalize(u));else if(o)return!1}if(r&&e.equals(this._point))return!1}switch(this._lastPoint=s&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=s?0:this._count+1,!0},fire:function(t,e){var i=Tool._removeSets;if(i){"mouseup"===t&&(i.mousedrag=null);var n=i[t];if(n){for(var s in n){var r=n[s];for(var o in i){var a=i[o];a&&a!=n&&delete a[r._id]}r.remove()}i[t]=null}}return this.base(t,e)},_onHandleEvent:function(t,e,i){paper=this._scope;var n=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i)));break;case"mousedrag":for(var s=!1,r=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,s,r);)this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),s=!0,r=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&this.responds("mousedrag")&&(n=this.fire("mousedrag",new ToolEvent(this,t,i))),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),this._firstMove=!1}return n}}),Formatter=Base.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision)},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});Formatter.instance=new Formatter(5);var CanvasProvider={canvases:[],getCanvas:function(t,e){var i=void 0===e?t:Size.create(t,e);if(this.canvases.length){var n=this.canvases.pop();return n.width!=i.width||n.height!=i.height?(n.width=i.width,n.height=i.height):n.getContext("2d").clearRect(0,0,i.width+1,i.height+1),n}var n=document.createElement("canvas");return n.width=i.width,n.height=i.height,n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){this.canvases.push(t.canvas?t.canvas:t)}},Numerical=new function(){function t(t){return t>0?r(t,1/3):0>t?-r(-t,1/3):0}var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,s=Math.sqrt,r=Math.pow,o=Math.cos,a=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,isZero:function(t){return n(t)<=this.EPSILON},integrate:function(t,n,s,r){for(var o=e[r-2],a=i[r-2],h=.5*(s-n),l=h+n,u=0,c=r+1>>1,d=1&r?a[u++]*t(l):0;c>u;){var p=h*o[u];d+=a[u++]*(t(l+p)+t(l-p))}return h*d},findRoot:function(t,e,i,s,r,o,a){for(var h=0;o>h;h++){var l=t(i),u=l/e(i);if(n(u)<a)return i;var c=i-u;l>0?(r=i,i=s>=c?.5*(s+r):c):(s=i,i=c>=r?.5*(s+r):c)}},solveQuadratic:function(t,e,i,r,o){if(n(t)<o)return n(e)>=o?(r[0]=-i/e,1):n(i)<o?-1:0;var a=e*e-4*t*i;if(0>a)return 0;a=s(a),t*=2;var h=0;return r[h++]=(-e-a)/t,a>0&&(r[h++]=(-e+a)/t),h},solveCubic:function(e,i,r,h,l,u){if(n(e)<u)return Numerical.solveQuadratic(i,r,h,l,u);i/=e,r/=e,h/=e;var c=i*i,d=1/3*(-1/3*c+r),p=.5*(2/27*i*c-1/3*i*r+h),f=d*d*d,g=p*p+f;if(i/=3,n(g)<u){if(n(p)<u)return l[0]=-i,1;var m=t(-p);return l[0]=2*m-i,l[1]=-m-i,2}if(0>g){var v=1/3*Math.acos(-p/s(-f)),_=2*s(-d);return l[0]=_*o(v)-i,l[1]=-_*o(v+a/3)-i,l[2]=-_*o(v-a/3)-i,3}return g=s(g),l[0]=t(g-p)-t(g+p)-i,1}}},BlendMode={process:function(t,e,i,n,s){function r(t,e,i){return.2989*t+.587*e+.114*i}function o(t,e,i,n){var s=n-r(t,e,i);v=t+s,_=e+s,b=i+s;var n=r(v,_,b),o=P(v,_,b),a=S(v,_,b);if(0>o){var h=n-o;v=n+(v-n)*n/h,_=n+(_-n)*n/h,b=n+(b-n)*n/h}if(a>255){var l=255-n,u=a-n;v=n+(v-n)*l/u,_=n+(_-n)*l/u,b=n+(b-n)*l/u}}function a(t,e,i){return S(t,e,i)-P(t,e,i)}function h(t,e,i,n){var s,r=[t,e,i],o=S(t,e,i),a=P(t,e,i);a=a==t?0:a==e?1:2,o=o==t?0:o==e?1:2,s=0==P(a,o)?1==S(a,o)?2:1:0,r[o]>r[a]?(r[s]=(r[s]-r[a])*n/(r[o]-r[a]),r[o]=n):r[s]=r[o]=0,r[a]=0,v=r[0],_=r[1],b=r[2]}var l,u,c,d,p,f,g,m,v,_,b,y=e.canvas,w=i.getImageData(s.x,s.y,y.width,y.height),x=w.data,C=e.getImageData(0,0,y.width,y.height).data,P=Math.min,S=Math.max,k=Math.abs,I={multiply:function(){v=p*l/255,_=f*u/255,b=g*c/255},screen:function(){v=255-(255-p)*(255-l)/255,_=255-(255-f)*(255-u)/255,b=255-(255-g)*(255-c)/255},overlay:function(){v=128>p?2*p*l/255:255-2*(255-p)*(255-l)/255,_=128>f?2*f*u/255:255-2*(255-f)*(255-u)/255,b=128>g?2*g*c/255:255-2*(255-g)*(255-c)/255},"soft-light":function(){var t=l*p/255;v=t+p*(255-(255-p)*(255-l)/255-t)/255,t=u*f/255,_=t+f*(255-(255-f)*(255-u)/255-t)/255,t=c*g/255,b=t+g*(255-(255-g)*(255-c)/255-t)/255},"hard-light":function(){v=128>l?2*l*p/255:255-2*(255-l)*(255-p)/255,_=128>u?2*u*f/255:255-2*(255-u)*(255-f)/255,b=128>c?2*c*g/255:255-2*(255-c)*(255-g)/255},"color-dodge":function(){v=255==l?l:P(255,255*p/(255-l)),_=255==u?u:P(255,255*f/(255-u)),b=255==c?c:P(255,255*g/(255-c))},"color-burn":function(){v=0==l?0:S(255-255*(255-p)/l,0),_=0==u?0:S(255-255*(255-f)/u,0),b=0==c?0:S(255-255*(255-g)/c,0)},darken:function(){v=l>p?p:l,_=u>f?f:u,b=c>g?g:c},lighten:function(){v=p>l?p:l,_=f>u?f:u,b=g>c?g:c},difference:function(){v=p-l,0>v&&(v=-v),_=f-u,0>_&&(_=-_),b=g-c,0>b&&(b=-b)},exclusion:function(){v=p+l*(255-p-p)/255,_=f+u*(255-f-f)/255,b=g+c*(255-g-g)/255},hue:function(){h(l,u,c,a(p,f,g)),o(v,_,b,r(p,f,g))},saturation:function(){h(p,f,g,a(l,u,c)),o(v,_,b,r(p,f,g))},luminosity:function(){o(p,f,g,r(l,u,c))},color:function(){o(l,u,c,r(p,f,g))},add:function(){v=P(p+l,255),_=P(f+u,255),b=P(g+c,255)},subtract:function(){v=S(p-l,0),_=S(f-u,0),b=S(g-c,0)},average:function(){v=(p+l)/2,_=(f+u)/2,b=(g+c)/2},negation:function(){v=255-k(255-l-p),_=255-k(255-u-f),b=255-k(255-c-g)}},z=I[t];if(z){for(var T=0,E=x.length;E>T;T+=4){l=C[T],p=x[T],u=C[T+1],f=x[T+1],c=C[T+2],g=x[T+2],d=C[T+3],m=x[T+3],z();var D=d*n/255,M=1-D;x[T]=D*v+M*p,x[T+1]=D*_+M*f,x[T+2]=D*b+M*g,x[T+3]=d*n+M*m}i.putImageData(w,s.x,s.y)}}},SvgStyles=Base.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"]},function(t,e){var i=Base.capitalize(e);this[e]={type:t[1],property:e,attribute:t[0],get:"get"+i,set:"set"+i}},{});!new function(){function t(t,e){for(var i in e){var n=e[i],s=x[i];"number"==typeof n&&(n=w.number(n)),s?t.setAttributeNS(s,i,n):t.setAttribute(i,n)}return t}function e(e,i){return t(document.createElementNS("http://www.w3.org/2000/svg",e),i)}function n(t,e,i){return t[e]._point.getDistance(t[i]._point)}function s(t,e){var i=t._matrix,n=i.getTranslation(),s={};if(e){i=i.shiftless();var r=i._inverseTransform(n);s.x=r.x,s.y=r.y,n=null}if(i.isIdentity())return s;var o=i.decompose();if(o&&!o.shearing){var a=[],h=o.rotation,l=o.scaling;n&&!n.isZero()&&a.push("translate("+w.point(n)+")"),Numerical.isZero(l.x-1)&&Numerical.isZero(l.y-1)||a.push("scale("+w.point(l)+")"),h&&a.push("rotate("+w.number(h)+")"),s.transform=a.join(" ")}else s.transform="matrix("+i.getValues().join(",")+")";return s}function r(t,e,i,n){var s="rect"===i?e[1]._point.add(e[2]._point).divide(2):"roundrect"===i?e[3]._point.add(e[4]._point).divide(2):"circle"===i||"ellipse"===i?e[1]._point:null,r=s&&s.subtract(n).getAngle()+90;return Numerical.isZero(r||0)?0:r}function o(t,e){function i(t,i){var n=e[t],s=n.getNext(),r=e[i],o=r.getNext();return n._handleOut.isZero()&&s._handleIn.isZero()&&r._handleOut.isZero()&&o._handleIn.isZero()&&s._point.subtract(n._point).isColinear(o._point.subtract(r._point))}function s(t){var i=e[t],n=i.getNext(),s=i._handleOut,o=n._handleIn;if(s.isOrthogonal(o)){var a=i._point,h=n._point,l=new Line(a,s).intersect(new Line(h,o));return l&&Numerical.isZero(s.getLength()/l.subtract(a).getLength()-r)&&Numerical.isZero(o.getLength()/l.subtract(h).getLength()-r)}}var r=4*(Math.sqrt(2)-1)/3;if(t.isPolygon())return 4===e.length&&t._closed&&i(0,2)&&i(1,3)?"rect":0===e.length?"empty":e.length>=3?t._closed?"polygon":"polyline":"line";if(t._closed){if(8===e.length&&s(0)&&s(2)&&s(4)&&s(6)&&i(1,5)&&i(3,7))return"roundrect";if(4===e.length&&s(0)&&s(1)&&s(2)&&s(3))return Numerical.isZero(n(e,0,2)-n(e,1,3))?"circle":"ellipse"}return"path"}function a(t){var i=s(t),n=t._children;i.fill="none";for(var r=e("g",i),o=0,a=n.length;a>o;o++){var h=b(n[o]);h&&r.appendChild(h)}return r}function h(t){var i=s(t,!0),n=t.getSize();return i.x-=n.width/2,i.y-=n.height/2,i.width=n.width,i.height=n.height,i.href=t.toDataURL(),e("image",i)}function u(t){var i=s(t,!0),n=t._style;null!=n._font&&(i["font-family"]=n._font),null!=n._fontSize&&(i["font-size"]=n._fontSize);var r=e("text",i);return r.textContent=t._content,r}function c(t){var s,a=t._segments,h=t.getPosition(!0),u=o(t,a),c=r(t,a,u,h);switch(u){case"empty":return null;case"path":var d=t.getPathData();s=d&&{d:d};break;case"polyline":case"polygon":var p=[];for(i=0,l=a.length;i<l;i++)p.push(w.point(a[i]._point));s={points:p.join(" ")};break;case"rect":var f=n(a,0,3),g=n(a,0,1),m=a[1]._point.rotate(-c,h);s={x:m.x,y:m.y,width:f,height:g};break;case"roundrect":u="rect";var f=n(a,1,6),g=n(a,0,3),v=(f-n(a,0,7))/2,_=(g-n(a,1,2))/2,b=a[3]._point,y=a[4]._point,m=b.subtract(y.subtract(b).normalize(v)).rotate(-c,h);s={x:m.x,y:m.y,width:f,height:g,rx:v,ry:_};break;case"line":var x=a[0]._point,C=a[a.length-1]._point;s={x1:x._x,y1:x._y,x2:C._x,y2:C._y};break;case"circle":var P=n(a,0,2)/2;s={cx:h.x,cy:h.y,r:P};break;case"ellipse":var v=n(a,2,0)/2,_=n(a,3,1)/2;s={cx:h.x,cy:h.y,rx:v,ry:_}}return c&&(s.transform="rotate("+w.number(c)+","+w.point(h)+")",t._gradientMatrix=(new Matrix).rotate(-c,h)),e(u,s)}function d(t){var i=s(t,!0),n=t.getPathData();return n&&(i.d=n),e("path",i)}function p(t){var i=s(t,!0),n=t.getSymbol(),r=m(n);return definition=n.getDefinition(),bounds=definition.getBounds(),r||(r=e("symbol",{viewBox:w.rectangle(bounds)}),r.appendChild(b(definition)),v(n,r)),i.href="#"+r.id,i.x+=bounds.x,i.y+=bounds.y,i.width=w.number(bounds.width),i.height=w.number(bounds.height),e("use",i)}function f(t,i){var n=m(t);if(!n){var s,r=t.getGradient(),o=r._radial,a=i._gradientMatrix,h=t.getOrigin().transform(a),l=t.getDestination().transform(a);if(o){s={cx:h.x,cy:h.y,r:h.getDistance(l)};var u=t.getHighlight();u&&(u=u.transform(a),s.fx=u.x,s.fy=u.y)}else s={x1:h.x,y1:h.y,x2:l.x,y2:l.y};s.gradientUnits="userSpaceOnUse",n=e((o?"radial":"linear")+"Gradient",s);for(var c=r._stops,d=0,p=c.length;p>d;d++){var f=c[d],g=f._color,_=g.getAlpha();s={offset:f._rampPoint,"stop-color":g.toCss(!0)},1>_&&(s["stop-opacity"]=_),n.appendChild(e("stop",s))}v(t,n)}return"url(#"+n.id+")"}function g(e,i){var n={},s=e._style,r=e.getParent(),o=r&&r._style;return null!=e._name&&(n.id=e._name),Base.each(SvgStyles,function(t){var i=s[t.get]();if(!o||!Base.equals(o[t.get](),i)){if("color"===t.type&&null!=i){var r=i.getAlpha();1>r&&(n[t.attribute+"-opacity"]=r)}n[t.attribute]=null==i?"none":"color"===t.type?i.gradient?f(i,e):i.toCss(!0):"array"===t.type?i.join(","):"number"===t.type?w.number(i):i}}),null!=e._opacity&&e._opacity<1&&(n.opacity=e._opacity),null==e._visibility||e._visibility||(n.visibility="hidden"),delete e._gradientMatrix,t(i,n)}function m(t){return y||(y={ids:{},svgs:{}}),y.svgs[t._id]}function v(t,e){var i=t._type,n=y.ids[i]=(y.ids[i]||0)+1;e.id=i+"-"+n,y.svgs[t._id]=e}function _(t){if(!y)return t;var i="svg"==t.nodeName&&t,n=i?i.firstChild:t;for(var s in y.svgs)i||(i=e("svg"),i.appendChild(t)),i.insertBefore(y.svgs[s],n);return y=null,i}function b(t){var e=C[t._type],i=e&&e(t,t._type);return i&&t._data&&i.setAttribute("data-paper-data",JSON.stringify(t._data)),i&&g(t,i)}var y,w=Formatter.instance,x={href:"http://www.w3.org/1999/xlink"},C={group:a,layer:a,raster:h,path:c,"point-text":u,"placed-symbol":p,"compound-path":d};Item.inject({exportSvg:function(){var t=b(this);return _(t)}}),Project.inject({exportSvg:function(){for(var t=e("svg"),i=this.layers,n=0,s=i.length;s>n;n++)t.appendChild(b(i[n]));return _(t)}})},new function(){function t(t,e,i,n){var s=(!i||null!=t.getAttribute(e))&&t[e]&&t[e].baseVal;return s?void 0!==n?n<s.numberOfItems?Base.pick((s=s.getItem(n)).value,s):null:Base.pick(s.value,s):null}function e(e,i,n,s,r){return i=t(e,i,s,r),n=t(e,n,s,r),s&&null==i&&null==n?null:Point.create(i||0,n||0)}function i(e,i,n,s,r){return i=t(e,i,s,r),n=t(e,n,s,r),s&&null==i&&null==n?null:Size.create(i||0,n||0)}function n(t,e){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e&&d(t)||t}function s(t,e){var i=t.childNodes,n="clipPath"===e,s=n?new CompoundPath:new Group,r=s._project,o=r._currentStyle;s.setFillColor("black"),n||(s=c(s,t),r._currentStyle=s._style.clone());for(var a=0,h=i.length;h>a;a++){var l,u=i[a];1==u.nodeType&&(l=p(u))&&(n&&l instanceof CompoundPath?(s.addChildren(l.removeChildren()),l.remove()):l instanceof Symbol||s.addChild(l))}return n&&(s=c(s.reduce(),t)),r._currentStyle=o,(n||"defs"===e)&&(s.remove(),s=null),s}function r(t,e){var i=new Path,n=t.points;i.moveTo(n.getItem(0));for(var s=1,r=n.numberOfItems;r>s;s++)i.lineTo(n.getItem(s));return"polygon"===e&&i.closePath(),i}function o(t){var e=t.getAttribute("d"),i=e.match(/m/gi).length>1?new CompoundPath:new Path;return i.setPathData(e),i}function a(i,n){for(var s=i.childNodes,r=[],o=0,a=s.length;a>o;o++){var h=s[o];1==h.nodeType&&r.push(c(new GradientStop,h))}var l,u,d,p="radialGradient"===n,f=new Gradient(r,p);return p?(l=e(i,"cx","cy"),u=l.add(t(i,"r"),0),d=e(i,"fx","fy",!0)):(l=e(i,"x1","y1"),u=e(i,"x2","y2")),c(new Color(f,l,u,d),i),null}function h(t,e,i,n){for(var s=n[i].baseVal,r=new Matrix,o=0,a=s.numberOfItems;a>o;o++){var h=s.getItem(o).matrix;r.concatenate(new Matrix(h.a,h.b,h.c,h.d,h.e,h.f))}t.transform(r)}function l(t,e,i){var n=t._style["fill-opacity"===i?"getFillColor":"getStrokeColor"]();n&&n.setAlpha(parseFloat(e))}function u(t,e,i){var n=t.attributes[e],s=n&&n.value;if(!s){var r=Base.camelize(e);s=t.style[r],s||i.node[r]===i.parent[r]||(s=i.node[r])}return s?"none"===s?null:s:void 0}function c(t,e){var i={node:DomElement.getStyles(e)||{},parent:DomElement.getStyles(e.parentNode)||{}};return Base.each(g,function(n,s){var r=u(e,s,i);void 0!==r&&(t=Base.pick(n(t,r,s,e,i),t))}),t}function d(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&m[e[1]]}function p(t,e){var i=t.nodeName,n=f[i],s=n&&n(t,i),r=t.getAttribute("data-paper-data");return s&&"group"!==s._type&&(s=c(s,t)),s&&r&&(s._data=JSON.parse(r)),e&&(m={}),s}var f={g:s,svg:s,clipPath:s,polygon:r,polyline:r,path:o,linearGradient:a,radialGradient:a,image:function(n){var s=new Raster(t(n,"href"));return s.attach("load",function(){var t=i(n,"width","height");this.setSize(t),this.translate(e(n,"x","y").add(t.divide(2)))}),s},symbol:function(t,e){return new Symbol(s(t,e),!0)},defs:s,use:function(i,n){var s=(t(i,"href")||"").substring(1),r=m[s],o=e(i,"x","y");return r?r instanceof Symbol?r.place(o):r.clone().translate(o):null},circle:function(i){return new Path.Circle(e(i,"cx","cy"),t(i,"r"))},ellipse:function(t){var n=e(t,"cx","cy"),s=i(t,"rx","ry");return new Path.Ellipse(new Rectangle(n.subtract(s),n.add(s)))},rect:function(t){var n=e(t,"x","y"),s=i(t,"width","height"),r=i(t,"rx","ry");return new Path.RoundRectangle(new Rectangle(n,s),r)},line:function(t){return new Path.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var i=new PointText(e(t,"x","y",!1,0).add(e(t,"dx","dy",!1,0)));return i.setContent(t.textContent.trim()||""),i}},g=Base.each(SvgStyles,function(t){this[t.attribute]=function(e,i,s,r){e._style[t.set](n(i,t.type))}},{id:function(t,e){m[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=d(e);return i?(i=i.clone(),i.setClipMask(!0),new Group(i,t)):void 0},gradientTransform:h,transform:h,opacity:function(t,e){t.setOpacity(parseFloat(e))},"fill-opacity":l,"stroke-opacity":l,"font-family":function(t,e){t.setFont(e.split(",")[0].replace(/^\s+|\s+$/g,""))},"font-size":function(t,e){t.setFontSize(parseFloat(e))},"text-anchor":function(t,e){t.setJustification({start:"left",middle:"center",end:"right"}[e])},visibility:function(t,e){t.setVisible("visible"===e)},"stop-color":function(t,e){t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var i=e.match(/(.*)%$/);t.setRampPoint(i?i[1]/100:e)},viewBox:function(t,e,s,r,o){var a=Rectangle.create.apply(this,n(e,"array")),h=i(r,"width","height",!0);if(t instanceof Group){var l=h?a.getSize().divide(h):1,c=(new Matrix).translate(a.getPoint()).scale(l);t.transform(c.inverted())}else if(t instanceof Symbol){h&&a.setSize(h);var d="visible"!=u(r,"overflow",o),p=t._definition;d&&!a.contains(p.getBounds())&&(d=new Path.Rectangle(a).transform(p._matrix),d.setClipMask(!0),p.addChild(d))}}}),m={};Item.inject({importSvg:function(t){return this.addChild(p(t,!0))}}),Project.inject({importSvg:function(t){return this.activate(),p(t,!0)}})},function(t){"use strict";function e(t){pt=t||{};for(var e in vt)pt.hasOwnProperty(e)||(pt[e]=vt[e]);mt=pt.sourceFile||null}function i(t,e){var i=_t(ft,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=bt,n}function n(t){function e(t){if(1==t.length)return i+="return str === "+JSON.stringify(t[0])+";";i+="switch(str){";for(var e=0;t.length>e;++e)i+="case "+JSON.stringify(t[e])+":";i+="return true}return false;"}t=t.split(" ");var i="",n=[];t:for(var s=0;t.length>s;++s){for(var r=0;n.length>r;++r)if(n[r][0].length==t[s].length){n[r].push(t[s]);continue t}n.push([t[s]])}if(n.length>3){n.sort(function(t,e){return e.length-t.length}),i+="switch(str.length){";for(var s=0;n.length>s;++s){var o=n[s];i+="case "+o[0].length+":",e(o)}i+="}"}else e(t);return Function("str",i)}function s(t){return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ye.test(String.fromCharCode(t))}function r(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ge.test(String.fromCharCode(t))}function o(){this.line=It,this.column=bt-zt}function a(){It=1,bt=zt=0,kt=!0,c()}function h(t,e){wt=bt,pt.locations&&(Ct=new o),Pt=t,c(),St=e,kt=t.beforeExpr}function l(){var t=pt.onComment&&pt.locations&&new o,e=bt,n=ft.indexOf("*/",bt+=2);if(-1===n&&i(bt-2,"Unterminated comment"),bt=n+2,pt.locations){Ke.lastIndex=e;for(var s;(s=Ke.exec(ft))&&bt>s.index;)++It,zt=s.index+s[0].length}pt.onComment&&pt.onComment(!0,ft.slice(e+2,n),e,bt,t,pt.locations&&new o)}function u(){for(var t=bt,e=pt.onComment&&pt.locations&&new o,i=ft.charCodeAt(bt+=2);gt>bt&&10!==i&&13!==i&&8232!==i&&8329!==i;)++bt,i=ft.charCodeAt(bt);pt.onComment&&pt.onComment(!1,ft.slice(t+2,bt),t,bt,e,pt.locations&&new o)}function c(){for(;gt>bt;){var t=ft.charCodeAt(bt);if(32===t)++bt;else if(13===t){++bt;var e=ft.charCodeAt(bt);10===e&&++bt,pt.locations&&(++It,zt=bt)}else if(10===t)++bt,++It,zt=bt;else if(14>t&&t>8)++bt;else if(47===t){var e=ft.charCodeAt(bt+1);if(42===e)l();else{if(47!==e)break;u()}}else if(14>t&&t>8||32===t||160===t)++bt;else{if(!(t>=5760&&qe.test(String.fromCharCode(t))))break;++bt}}}function d(){var t=ft.charCodeAt(bt+1);return t>=48&&57>=t?k(!0):(++bt,h(we))}function p(){var t=ft.charCodeAt(bt+1);return kt?(++bt,C()):61===t?x(Se,2):x(Ce,1)}function f(){var t=ft.charCodeAt(bt+1);return 61===t?x(Se,2):x(Le,1)}function g(t){var e=ft.charCodeAt(bt+1);return e===t?x(124===t?Te:Ee,2):61===e?x(Se,2):x(124===t?De:Be,1)}function m(){var t=ft.charCodeAt(bt+1);return 61===t?x(Se,2):x(Me,1)}function v(t){var e=ft.charCodeAt(bt+1);return e===t?x(Ie,2):61===e?x(Se,2):x(ke,1)}function _(t){var e=ft.charCodeAt(bt+1),i=1;return e===t?(i=62===t&&62===ft.charCodeAt(bt+2)?3:2,61===ft.charCodeAt(bt+i)?x(Se,i+1):x(Oe,i)):(61===e&&(i=61===ft.charCodeAt(bt+2)?3:2),x(Ne,i))}function b(t){var e=ft.charCodeAt(bt+1);return 61===e?x(Ae,61===ft.charCodeAt(bt+2)?3:2):x(61===t?Pe:ze,1)}function y(t){switch(t){case 46:return d();case 40:return++bt,h(me);case 41:return++bt,h(ve);case 59:return++bt,h(be);case 44:return++bt,h(_e);case 91:return++bt,h(de);case 93:return++bt,h(pe);case 123:return++bt,h(fe);case 125:return++bt,h(ge);case 58:return++bt,h(ye);case 63:return++bt,h(xe);case 48:var e=ft.charCodeAt(bt+1);if(120===e||88===e)return S();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return k(!1);case 34:case 39:return I(t);case 47:return p(t);case 37:case 42:return f();case 124:case 38:return g(t);case 94:return m();case 43:case 45:return v(t);case 60:case 62:return _(t);case 61:case 33:return b(t);case 126:return x(ze,1)}return!1}function w(t){if(yt=bt,pt.locations&&(xt=new o),t)return C();if(bt>=gt)return h(Rt);var e=ft.charCodeAt(bt);if(s(e)||92===e)return E();var n=y(e);if(n===!1){var r=String.fromCharCode(e);if("\\"===r||Ye.test(r))return E();i(bt,"Unexpected character '"+r+"'")}return n}function x(t,e){var i=ft.slice(bt,bt+e);bt+=e,h(t,i)}function C(){for(var t,e,n="",s=bt;;){bt>=gt&&i(s,"Unterminated regular expression");var r=ft.charAt(bt);if(Ze.test(r)&&i(s,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++bt}var n=ft.slice(s,bt);++bt;var o=T();return o&&!/^[gmsiy]*$/.test(o)&&i(s,"Invalid regexp flag"),h(Ot,RegExp(n,o))}function P(t,e){for(var i=bt,n=0,s=0,r=null==e?1/0:e;r>s;++s){var o,a=ft.charCodeAt(bt);if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0,o>=t)break;++bt,n=n*t+o}return bt===i||null!=e&&bt-i!==e?null:n}function S(){bt+=2;var t=P(16);return null==t&&i(yt+2,"Expected hexadecimal number"),s(ft.charCodeAt(bt))&&i(bt,"Identifier directly after number"),h(Nt,t)}function k(t){var e=bt,n=!1,r=48===ft.charCodeAt(bt);t||null!==P(10)||i(e,"Invalid number"),46===ft.charCodeAt(bt)&&(++bt,P(10),n=!0);var o=ft.charCodeAt(bt);(69===o||101===o)&&(o=ft.charCodeAt(++bt),(43===o||45===o)&&++bt,null===P(10)&&i(e,"Invalid number"),n=!0),s(ft.charCodeAt(bt))&&i(bt,"Identifier directly after number");var a,l=ft.slice(e,bt);return n?a=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||At?i(e,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),h(Nt,a)}function I(t){bt++;for(var e="";;){bt>=gt&&i(yt,"Unterminated string constant");var n=ft.charCodeAt(bt);if(n===t)return++bt,h(Lt,e);if(92===n){n=ft.charCodeAt(++bt);var s=/^[0-7]+/.exec(ft.slice(bt,bt+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,s.length-1);if("0"===s&&(s=null),++bt,s)At&&i(bt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(s,8)),bt+=s.length-1;else switch(n){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(z(2));break;case 117:e+=String.fromCharCode(z(4));break;case 85:e+=String.fromCharCode(z(8));break;case 116:e+="	";break;case 98:e+="\b";break;case 118:e+="\x0B";break;case 102:e+="\f";break;case 48:e+="\x00";break;case 13:10===ft.charCodeAt(bt)&&++bt;case 10:pt.locations&&(zt=bt,++It);break;default:e+=String.fromCharCode(n)}}else(13===n||10===n||8232===n||8329===n)&&i(yt,"Unterminated string constant"),e+=String.fromCharCode(n),++bt}}function z(t){var e=P(16,t);return null===e&&i(yt,"Bad character escape sequence"),e}function T(){Re=!1;for(var t,e=!0,n=bt;;){var o=ft.charCodeAt(bt);if(r(o))Re&&(t+=ft.charAt(bt)),++bt;else{if(92!==o)break;Re||(t=ft.slice(n,bt)),Re=!0,117!=ft.charCodeAt(++bt)&&i(bt,"Expecting Unicode escape sequence \\uXXXX"),++bt;var a=z(4),h=String.fromCharCode(a);h||i(bt-1,"Invalid Unicode escape"),(e?s(a):r(a))||i(bt-4,"Invalid Unicode escape"),t+=h}e=!1}return Re?t:ft.slice(n,bt)}function E(){var t=T(),e=Ht;return Re||(Ve(t)?e=ce[t]:(pt.forbidReserved&&(3===pt.ecmaVersion?je:We)(t)||At&&Fe(t))&&i(yt,"The keyword '"+t+"' is reserved")),h(e,t)}function D(){Tt=yt,Et=wt,Dt=Ct,w()}function M(t){At=t,bt=Et,c(),w()}function B(){this.type=null,this.start=yt,this.end=null}function A(){this.start=xt,this.end=null,null!==mt&&(this.source=mt)}function N(){var t=new B;return pt.locations&&(t.loc=new A),pt.ranges&&(t.range=[yt,0]),t}function O(t){var e=new B;return e.start=t.start,pt.locations&&(e.loc=new A,e.loc.start=t.loc.start),pt.ranges&&(e.range=[t.range[0],0]),e}function L(t,e){return t.type=e,t.end=Et,pt.locations&&(t.loc.end=Dt),pt.ranges&&(t.range[1]=Et),t}function H(t){return pt.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function R(t){return Pt===t?(D(),!0):void 0}function j(){return!pt.strictSemicolons&&(Pt===Rt||Pt===ge||Ze.test(ft.slice(Et,yt)))}function W(){R(be)||j()||$()}function F(t){Pt===t?D():$()}function $(){i(yt,"Unexpected token")}function V(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&i(t.start,"Assigning to rvalue"),At&&"Identifier"===t.type&&$e(t.name)&&i(t.start,"Assigning to "+t.name+" in strict mode")}function q(t){Tt=Et=bt,pt.locations&&(Dt=new o),Mt=At=null,Bt=[],w();var e=t||N(),i=!0;for(t||(e.body=[]);Pt!==Rt;){var n=X();e.body.push(n),i&&H(n)&&M(!0),i=!1}return L(e,"Program")}function X(){Pt===Ce&&w(!0);var t=Pt,e=N();switch(t){case jt:case $t:D();var n=t===jt;R(be)||j()?e.label=null:Pt!==Ht?$():(e.label=dt(),W());for(var s=0;Bt.length>s;++s){var r=Bt[s];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return s===Bt.length&&i(e.start,"Unsyntactic "+t.keyword),L(e,n?"BreakStatement":"ContinueStatement");case Vt:return D(),W(),L(e,"DebuggerStatement");case Xt:return D(),Bt.push(Qe),e.body=X(),Bt.pop(),F(ne),e.test=U(),W(),L(e,"DoWhileStatement");case Gt:if(D(),Bt.push(Qe),F(me),Pt===be)return G(e,null);if(Pt===ie){var o=N();return D(),K(o,!0),1===o.declarations.length&&R(ue)?Z(e,o):G(e,o)}var o=Q(!1,!0);return R(ue)?(V(o),Z(e,o)):G(e,o);case Zt:return D(),ut(e,!0);case Kt:return D(),e.test=U(),e.consequent=X(),e.alternate=R(Ut)?X():null,L(e,"IfStatement");case Qt:return Mt||i(yt,"'return' outside of function"),D(),R(be)||j()?e.argument=null:(e.argument=Q(),W()),L(e,"ReturnStatement");case Jt:D(),e.discriminant=U(),e.cases=[],F(fe),Bt.push(Je);for(var a,h;Pt!=ge;)if(Pt===Wt||Pt===qt){var l=Pt===Wt;a&&L(a,"SwitchCase"),e.cases.push(a=N()),a.consequent=[],D(),l?a.test=Q():(h&&i(Tt,"Multiple default clauses"),h=!0,a.test=null),F(ye)}else a||$(),a.consequent.push(X());return a&&L(a,"SwitchCase"),D(),Bt.pop(),L(e,"SwitchStatement");case te:return D(),Ze.test(ft.slice(Et,yt))&&i(Et,"Illegal newline after throw"),e.argument=Q(),W(),L(e,"ThrowStatement");case ee:for(D(),e.block=Y(),e.handlers=[];Pt===Ft;){var u=N();D(),F(me),u.param=dt(),At&&$e(u.param.name)&&i(u.param.start,"Binding "+u.param.name+" in strict mode"),F(ve),u.guard=null,u.body=Y(),e.handlers.push(L(u,"CatchClause"))}return e.finalizer=R(Yt)?Y():null,e.handlers.length||e.finalizer||i(e.start,"Missing catch or finally clause"),L(e,"TryStatement");case ie:return D(),e=K(e),W(),e;case ne:return D(),e.test=U(),Bt.push(Qe),e.body=X(),Bt.pop(),L(e,"WhileStatement");case se:return At&&i(yt,"'with' in strict mode"),D(),e.object=U(),e.body=X(),L(e,"WithStatement");case fe:return Y();case be:return D(),L(e,"EmptyStatement");default:var c=St,d=Q();if(t===Ht&&"Identifier"===d.type&&R(ye)){for(var s=0;Bt.length>s;++s)Bt[s].name===c&&i(d.start,"Label '"+c+"' is already declared");
var p=Pt.isLoop?"loop":Pt===Jt?"switch":null;return Bt.push({name:c,kind:p}),e.body=X(),Bt.pop(),e.label=d,L(e,"LabeledStatement")}return e.expression=d,W(),L(e,"ExpressionStatement")}}function U(){F(me);var t=Q();return F(ve),t}function Y(){var t,e=N(),i=!0,n=!1;for(e.body=[],F(fe);!R(ge);){var s=X();e.body.push(s),i&&H(s)&&(t=n,M(n=!0)),i=!1}return n&&!t&&M(!1),L(e,"BlockStatement")}function G(t,e){return t.init=e,F(be),t.test=Pt===be?null:Q(),F(be),t.update=Pt===ve?null:Q(),F(ve),t.body=X(),Bt.pop(),L(t,"ForStatement")}function Z(t,e){return t.left=e,t.right=Q(),F(ve),t.body=X(),Bt.pop(),L(t,"ForInStatement")}function K(t,e){for(t.declarations=[],t.kind="var";;){var n=N();if(n.id=dt(),At&&$e(n.id.name)&&i(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=R(Pe)?Q(!0,e):null,t.declarations.push(L(n,"VariableDeclarator")),!R(_e))break}return L(t,"VariableDeclaration")}function Q(t,e){var i=J(e);if(!t&&Pt===_e){var n=O(i);for(n.expressions=[i];R(_e);)n.expressions.push(J(e));return L(n,"SequenceExpression")}return i}function J(t){var e=tt(t);if(Pt.isAssign){var i=O(e);return i.operator=St,i.left=e,D(),i.right=J(t),V(e),L(i,"AssignmentExpression")}return e}function tt(t){var e=et(t);if(R(xe)){var i=O(e);return i.test=e,i.consequent=Q(!0),F(ye),i.alternate=Q(!0,t),L(i,"ConditionalExpression")}return e}function et(t){return it(nt(t),-1,t)}function it(t,e,i){var n=Pt.binop;if(null!=n&&(!i||Pt!==ue)&&n>e){var s=O(t);s.left=t,s.operator=St,D(),s.right=it(nt(i),n,i);var s=L(s,/&&|\|\|/.test(s.operator)?"LogicalExpression":"BinaryExpression");return it(s,e,i)}return t}function nt(t){if(Pt.prefix){var e=N(),n=Pt.isUpdate;return e.operator=St,e.prefix=!0,D(),e.argument=nt(t),n?V(e.argument):At&&"delete"===e.operator&&"Identifier"===e.argument.type&&i(e.start,"Deleting local variable in strict mode"),L(e,n?"UpdateExpression":"UnaryExpression")}for(var s=st();Pt.postfix&&!j();){var e=O(s);e.operator=St,e.prefix=!1,e.argument=s,V(s),D(),s=L(e,"UpdateExpression")}return s}function st(){return rt(ot())}function rt(t,e){if(R(we)){var i=O(t);return i.object=t,i.property=dt(!0),i.computed=!1,rt(L(i,"MemberExpression"),e)}if(R(de)){var i=O(t);return i.object=t,i.property=Q(),i.computed=!0,F(pe),rt(L(i,"MemberExpression"),e)}if(!e&&R(me)){var i=O(t);return i.callee=t,i.arguments=ct(ve,!1),rt(L(i,"CallExpression"),e)}return t}function ot(){switch(Pt){case oe:var t=N();return D(),L(t,"ThisExpression");case Ht:return dt();case Nt:case Lt:case Ot:var t=N();return t.value=St,t.raw=ft.slice(yt,wt),D(),L(t,"Literal");case ae:case he:case le:var t=N();return t.value=Pt.atomValue,t.raw=Pt.keyword,D(),L(t,"Literal");case me:var e=xt,i=yt;D();var n=Q();return n.start=i,n.end=wt,pt.locations&&(n.loc.start=e,n.loc.end=Ct),pt.ranges&&(n.range=[i,wt]),F(ve),n;case de:var t=N();return D(),t.elements=ct(pe,!0,!0),L(t,"ArrayExpression");case fe:return ht();case Zt:var t=N();return D(),ut(t,!1);case re:return at();default:$()}}function at(){var t=N();return D(),t.callee=rt(ot(),!0),t.arguments=R(me)?ct(ve,!1):[],L(t,"NewExpression")}function ht(){var t=N(),e=!0,n=!1;for(t.properties=[],D();!R(ge);){if(e)e=!1;else if(F(_e),pt.allowTrailingCommas&&R(ge))break;var s,r={key:lt()},o=!1;if(R(ye)?(r.value=Q(!0),s=r.kind="init"):pt.ecmaVersion>=5&&"Identifier"===r.key.type&&("get"===r.key.name||"set"===r.key.name)?(o=n=!0,s=r.kind=r.key.name,r.key=lt(),Pt!==me&&$(),r.value=ut(N(),!1)):$(),"Identifier"===r.key.type&&(At||n))for(var a=0;t.properties.length>a;++a){var h=t.properties[a];if(h.key.name===r.key.name){var l=s==h.kind||o&&"init"===h.kind||"init"===s&&("get"===h.kind||"set"===h.kind);l&&!At&&"init"===s&&"init"===h.kind&&(l=!1),l&&i(r.key.start,"Redefinition of property")}}t.properties.push(r)}return L(t,"ObjectExpression")}function lt(){return Pt===Nt||Pt===Lt?ot():dt(!0)}function ut(t,e){Pt===Ht?t.id=dt():e?$():t.id=null,t.params=[];var n=!0;for(F(me);!R(ve);)n?n=!1:F(_e),t.params.push(dt());var s=Mt,r=Bt;if(Mt=!0,Bt=[],t.body=Y(!0),Mt=s,Bt=r,At||t.body.body.length&&H(t.body.body[0]))for(var o=t.id?-1:0;t.params.length>o;++o){var a=0>o?t.id:t.params[o];if((Fe(a.name)||$e(a.name))&&i(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var h=0;o>h;++h)a.name===t.params[h].name&&i(a.start,"Argument name clash in strict mode")}return L(t,e?"FunctionDeclaration":"FunctionExpression")}function ct(t,e,i){for(var n=[],s=!0;!R(t);){if(s)s=!1;else if(F(_e),e&&pt.allowTrailingCommas&&R(t))break;i&&Pt===_e?n.push(null):n.push(Q(!0))}return n}function dt(t){var e=N();return e.name=Pt===Ht?St:t&&!pt.forbidReserved&&Pt.keyword||$(),D(),L(e,"Identifier")}t.version="0.1.01";var pt,ft,gt,mt;t.parse=function(t,i){return ft=t+"",gt=ft.length,e(i),a(),q(pt.program)};var vt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},_t=t.getLineInfo=function(t,e){for(var i=1,n=0;;){Ke.lastIndex=n;var s=Ke.exec(t);if(!(s&&e>s.index))break;++i,n=s.index+s[0].length}return{line:i,column:e-n}};t.tokenize=function(t,i){function n(t){return w(t),s.start=yt,s.end=wt,s.startLoc=xt,s.endLoc=Ct,s.type=Pt,s.value=St,s}ft=t+"",gt=ft.length,e(i),a();var s={};return n.jumpTo=function(t,e){if(bt=t,pt.locations){It=zt=Ke.lastIndex=0;for(var i;(i=Ke.exec(ft))&&t>i.index;)++It,zt=i.index+i[0].length}ft.charAt(t-1),kt=e,c()},n};var bt,yt,wt,xt,Ct,Pt,St,kt,It,zt,Tt,Et,Dt,Mt,Bt,At,Nt={type:"num"},Ot={type:"regexp"},Lt={type:"string"},Ht={type:"name"},Rt={type:"eof"},jt={keyword:"break"},Wt={keyword:"case",beforeExpr:!0},Ft={keyword:"catch"},$t={keyword:"continue"},Vt={keyword:"debugger"},qt={keyword:"default"},Xt={keyword:"do",isLoop:!0},Ut={keyword:"else",beforeExpr:!0},Yt={keyword:"finally"},Gt={keyword:"for",isLoop:!0},Zt={keyword:"function"},Kt={keyword:"if"},Qt={keyword:"return",beforeExpr:!0},Jt={keyword:"switch"},te={keyword:"throw",beforeExpr:!0},ee={keyword:"try"},ie={keyword:"var"},ne={keyword:"while",isLoop:!0},se={keyword:"with"},re={keyword:"new",beforeExpr:!0},oe={keyword:"this"},ae={keyword:"null",atomValue:null},he={keyword:"true",atomValue:!0},le={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},ce={"break":jt,"case":Wt,"catch":Ft,"continue":$t,"debugger":Vt,"default":qt,"do":Xt,"else":Ut,"finally":Yt,"for":Gt,"function":Zt,"if":Kt,"return":Qt,"switch":Jt,"throw":te,"try":ee,"var":ie,"while":ne,"with":se,"null":ae,"true":he,"false":le,"new":re,"in":ue,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":oe,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},de={type:"[",beforeExpr:!0},pe={type:"]"},fe={type:"{",beforeExpr:!0},ge={type:"}"},me={type:"(",beforeExpr:!0},ve={type:")"},_e={type:",",beforeExpr:!0},be={type:";",beforeExpr:!0},ye={type:":",beforeExpr:!0},we={type:"."},xe={type:"?",beforeExpr:!0},Ce={binop:10,beforeExpr:!0},Pe={isAssign:!0,beforeExpr:!0},Se={isAssign:!0,beforeExpr:!0},ke={binop:9,prefix:!0,beforeExpr:!0},Ie={postfix:!0,prefix:!0,isUpdate:!0},ze={prefix:!0,beforeExpr:!0},Te={binop:1,beforeExpr:!0},Ee={binop:2,beforeExpr:!0},De={binop:3,beforeExpr:!0},Me={binop:4,beforeExpr:!0},Be={binop:5,beforeExpr:!0},Ae={binop:6,beforeExpr:!0},Ne={binop:7,beforeExpr:!0},Oe={binop:8,beforeExpr:!0},Le={binop:10,beforeExpr:!0};t.tokTypes={bracketL:de,bracketR:pe,braceL:fe,braceR:ge,parenL:me,parenR:ve,comma:_e,semi:be,colon:ye,dot:we,question:xe,slash:Ce,eq:Pe,name:Ht,eof:Rt,num:Nt,regexp:Ot,string:Lt};for(var He in ce)t.tokTypes[He]=ce[He];var Re,je=n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),We=n("class enum extends super const export import"),Fe=n("implements interface let package private protected public static yield"),$e=n("eval arguments"),Ve=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),qe=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,Xe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ue="ͱ-ʹ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ye=RegExp("["+Xe+"]"),Ge=RegExp("["+Xe+Ue+"]"),Ze=/[\n\r\u2028\u2029]/,Ke=/\r\n|[\n\r\u2028\u2029]/g,Qe={kind:"loop"},Je={kind:"switch"}}("undefined"==typeof exports?self.acorn={}:exports);var PaperScript=this.PaperScript=new function(){function _$_(t,e,i){var n=binaryOperators[e];if(t&&t[n]){var s=t[n](i);return"!="===e?!s:s}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function $_(t,e){var i=unaryOperators[t];if(i&&e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function compile(t){function e(t){for(var e=0,i=r.length;i>e;e++){var n=r[e];if(n[0]>=t)break;t+=n[1]}return t}function i(i){return t.substring(e(i.range[0]),e(i.range[1]))}function n(i,n){for(var s=e(i.range[0]),o=e(i.range[1]),a=0,h=r.length-1;h>=0;h--)if(s>r[h][0]){a=h+1;break}r.splice(a,0,[s,n.length-o+s]),t=t.substring(0,s)+n+t.substring(o)}function s(t){for(var e in t)if("range"!==e){var r=t[e];if(Array.isArray(r))for(var o=0,a=r.length;a>o;o++)s(r[o]);else r&&"object"==typeof r&&s(r)}switch(t&&t.type){case"BinaryExpression":if(t.operator in binaryOperators&&"Literal"!==t.left.type){var h=i(t.left),l=i(t.right);n(t,"_$_("+h+', "'+t.operator+'", '+l+")")}break;case"AssignmentExpression":if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var h=i(t.left),l=i(t.right);n(t,h+" = _$_("+h+', "'+t.operator[0]+'", '+l+")")}break;case"UpdateExpression":if(!t.prefix){var u=i(t.argument);n(t,u+" = _$_("+u+', "'+t.operator[0]+'", 1)')}break;case"UnaryExpression":if(t.operator in unaryOperators&&"Literal"!==t.argument.type){var u=i(t.argument);n(t,'$_("'+t.operator+'", '+u+")")}}}var r=[];return s(acorn.parse(t,{ranges:!0})),t}function evaluate(code,scope){paper=scope;var view=scope.project&&scope.project.view,res;with(scope)(function(){var onActivate,onDeactivate,onEditOptions,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize;res=eval(compile(code)),/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&Base.each(Tool.prototype._events,function(key){var value=eval(key);value&&(scope.getTool()[key]=value)}),view&&(view.setOnResize(onResize),view.fire("resize",{size:view.size,delta:new Point}),view.setOnFrame(onFrame),view.draw())}).call(scope);return res}function request(t,e){var i=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return i.open("GET",t,!0),i.overrideMimeType&&i.overrideMimeType("text/plain"),i.onreadystatechange=function(){return 4===i.readyState?evaluate(i.responseText,e):void 0},i.send(null)}function load(){for(var t=document.getElementsByTagName("script"),e=0,i=t.length;i>e;e++){var n=t[e];if(/^text\/(?:x-|)paperscript$/.test(n.type)&&!n.getAttribute("data-paper-ignore")){var s=PaperScript.getAttribute(n,"canvas"),r=PaperScope.get(s)||new PaperScope(n).setup(s);n.src?request(n.src,r):evaluate(n.innerHTML,r),n.setAttribute("data-paper-ignore",!0)}}}function handleAttribute(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}var binaryOperators={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"modulo","==":"equals","!=":"equals"},unaryOperators={"-":"negate","+":null};return"complete"===document.readyState?setTimeout(load):DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load,getAttribute:handleAttribute("get"),hasAttribute:handleAttribute("has")}};return this.enumerable=!0,new(PaperScope.inject(this))};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"number"==typeof t&&!isNaN(t)}function i(t){return"undefined"==typeof t}function n(t,i){var n=[];return e(i)&&n.push(i),n.slice.apply(t,n)}function s(t,e){var i=n(arguments,2);return function(){return t.apply(e,i.concat(n(arguments)))}}function r(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return e&&(e[1]!==g.protocol||e[2]!==g.hostname||e[3]!==g.port)}function o(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function a(t){return t?' crossOrigin="'+t+'"':""}function h(t,e){var i;return t.naturalWidth?e(t.naturalWidth,t.naturalHeight):(i=document.createElement("img"),i.onload=function(){e(this.width,this.height)},void(i.src=t.src))}function l(t){var i=[],n=t.rotate,s=t.scaleX,r=t.scaleY;return e(n)&&i.push("rotate("+n+"deg)"),e(s)&&e(r)&&i.push("scale("+s+","+r+")"),i.length?i.join(" "):"none"}function u(t,e){var i,n,s=ot(t.degree)%180,r=(s>90?180-s:s)*Math.PI/180,o=at(r),a=ht(r),h=t.width,l=t.height,u=t.aspectRatio;return e?(i=h/(a+o/u),n=i/u):(i=h*a+l*o,n=h*o+l*a),{width:i,height:n}}function c(i,n){var s,r,o,a=t("<canvas>")[0],h=a.getContext("2d"),l=0,c=0,d=n.naturalWidth,p=n.naturalHeight,f=n.rotate,g=n.scaleX,m=n.scaleY,v=e(g)&&e(m)&&(1!==g||1!==m),_=e(f)&&0!==f,b=_||v,y=d,w=p;return v&&(s=d/2,r=p/2),_&&(o=u({width:d,height:p,degree:f}),y=o.width,w=o.height,s=o.width/2,r=o.height/2),a.width=y,a.height=w,b&&(l=-d/2,c=-p/2,h.save(),h.translate(s,r)),_&&h.rotate(f*Math.PI/180),v&&h.scale(g,m),h.drawImage(i,l,c,d,p),b&&h.restore(),a}function d(e,i){this.$element=t(e),this.options=t.extend({},d.DEFAULTS,t.isPlainObject(i)&&i),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.isImg=!1,this.originalUrl="",this.crossOrigin="",this.canvas=null,this.cropBox=null,this.init()}var p=t(window),f=t(document),g=window.location,m="cropper",v="cropper-modal",_="cropper-hide",b="cropper-hidden",y="cropper-invisible",w="cropper-move",x="cropper-crop",C="cropper-disabled",P="cropper-bg",S="mousedown touchstart pointerdown MSPointerDown",k="mousemove touchmove pointermove MSPointerMove",I="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",z="wheel mousewheel DOMMouseScroll",T="dblclick",E="load."+m,D="error."+m,M="resize."+m,B="build."+m,A="built."+m,N="cropstart."+m,O="cropmove."+m,L="cropend."+m,H="crop."+m,R="zoom."+m,j=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,W="preview",F="action",$="e",V="w",q="s",X="n",U="se",Y="sw",G="ne",Z="nw",K="all",Q="crop",J="move",tt="zoom",et="none",it=t.isFunction(t("<canvas>")[0].getContext),nt=Number,st=Math.min,rt=Math.max,ot=Math.abs,at=Math.sin,ht=Math.cos,lt=Math.sqrt,ut=Math.round,ct={version:"2.0.1"};t.extend(ct,{init:function(){var t,e=this.$element;if(e.is("img")){if(this.isImg=!0,this.originalUrl=t=e.attr("src"),!t)return;t=e.prop("src")}else e.is("canvas")&&it&&(t=e[0].toDataURL());this.load(t)},trigger:function(e,i){var n=t.Event(e,i);return this.$element.trigger(n),n},load:function(e){var i,n,s=this.options,h=this.$element,l="";e&&(this.url=e,h.one(B,s.build),this.trigger(B).isDefaultPrevented()||(s.checkCrossOrigin&&r(e)&&(l=h.prop("crossOrigin"),l||(l="anonymous",i=o(e))),this.crossOrigin=l,this.$clone=n=t("<img"+a(l)+' src="'+(i||e)+'">'),this.isImg?h[0].complete?this.start():h.one(E,t.proxy(this.start,this)):n.one(E,t.proxy(this.start,this)).one(D,t.proxy(this.stop,this)).addClass(_).insertAfter(h)))},start:function(){var e=this.$element,i=this.$clone;this.isImg||(i.off(D,this.stop),e=i),h(e[0],t.proxy(function(t,e){this.image={naturalWidth:t,naturalHeight:e,aspectRatio:t/e},this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null}}),t.extend(ct,{build:function(){var e,i,n,s=this.options,r=this.$element,o=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=r.parent(),this.$cropper=e=t(d.TEMPLATE),this.$canvas=e.find(".cropper-canvas").append(o),this.$dragBox=e.find(".cropper-drag-box"),this.$cropBox=i=e.find(".cropper-crop-box"),this.$viewBox=e.find(".cropper-view-box"),this.$face=n=i.find(".cropper-face"),r.addClass(b).after(e),this.isImg||o.removeClass(_),this.initPreview(),this.bind(),s.aspectRatio=rt(0,s.aspectRatio)||NaN,s.viewMode=rt(0,st(3,ut(s.viewMode)))||0,s.autoCrop?(this.isCropped=!0,s.modal&&this.$dragBox.addClass(v)):i.addClass(b),s.guides||i.find(".cropper-dashed").addClass(b),s.center||i.find(".cropper-center").addClass(b),s.cropBoxMovable&&n.addClass(w).data(F,K),s.highlight||n.addClass(y),s.background&&e.addClass(P),s.cropBoxResizable||i.find(".cropper-line, .cropper-point").addClass(b),this.setDragMode(s.dragMode),this.render(),this.isBuilt=!0,this.setData(s.data),r.one(A,s.built),setTimeout(t.proxy(function(){this.trigger(A),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)}}),t.extend(ct,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,e=this.$element,i=this.$container,n=this.$cropper;n.addClass(b),e.removeClass(b),n.css(this.container={width:rt(i.width(),nt(t.minContainerWidth)||200),height:rt(i.height(),nt(t.minContainerHeight)||100)}),e.addClass(b),n.removeClass(b)},initCanvas:function(){var e=this.options.viewMode,i=this.container,n=i.width,s=i.height,r=this.image,o=r.aspectRatio,a={naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight,aspectRatio:o,width:n,height:s};s*o>n?3===e?a.width=s*o:a.height=n/o:3===e?a.height=n/o:a.width=s*o,a.oldLeft=a.left=(n-a.width)/2,a.oldTop=a.top=(s-a.height)/2,this.canvas=a,this.isLimited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImage=t.extend({},r),this.initialCanvas=t.extend({},a)},limitCanvas:function(t,e){var i,n,s,r,o=this.options,a=o.viewMode,h=this.container,l=h.width,u=h.height,c=this.canvas,d=c.aspectRatio,p=this.cropBox,f=this.isCropped&&p;t&&(i=nt(o.minCanvasWidth)||0,n=nt(o.minCanvasHeight)||0,a&&(a>1?(i=rt(i,l),n=rt(n,u),3===a&&(n*d>i?i=n*d:n=i/d)):i?i=rt(i,f?p.width:0):n?n=rt(n,f?p.height:0):f&&(i=p.width,n=p.height,n*d>i?i=n*d:n=i/d)),i&&n?n*d>i?n=i/d:i=n*d:i?n=i/d:n&&(i=n*d),c.minWidth=i,c.minHeight=n,c.maxWidth=1/0,c.maxHeight=1/0),e&&(a?(s=l-c.width,r=u-c.height,c.minLeft=st(0,s),c.minTop=st(0,r),c.maxLeft=rt(0,s),c.maxTop=rt(0,r),f&&this.isLimited&&(c.minLeft=st(p.left,p.left+p.width-c.width),c.minTop=st(p.top,p.top+p.height-c.height),c.maxLeft=p.left,c.maxTop=p.top,2===a&&(c.width>=l&&(c.minLeft=st(0,s),c.maxLeft=rt(0,s)),c.height>=u&&(c.minTop=st(0,r),c.maxTop=rt(0,r))))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=l,c.maxTop=u))},renderCanvas:function(t){var e,i,n=this.canvas,s=this.image,r=s.rotate,o=s.naturalWidth,a=s.naturalHeight;this.isRotated&&(this.isRotated=!1,i=u({width:s.width,height:s.height,degree:r}),e=i.width/i.height,e!==n.aspectRatio&&(n.left-=(i.width-n.width)/2,n.top-=(i.height-n.height)/2,n.width=i.width,n.height=i.height,n.aspectRatio=e,n.naturalWidth=o,n.naturalHeight=a,r%180&&(i=u({width:o,height:a,degree:r}),n.naturalWidth=i.width,n.naturalHeight=i.height),this.limitCanvas(!0,!1))),(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=st(rt(n.width,n.minWidth),n.maxWidth),n.height=st(rt(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.oldLeft=n.left=st(rt(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=st(rt(n.top,n.minTop),n.maxTop),this.$canvas.css({width:n.width,height:n.height,left:n.left,top:n.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(e){var i,n=this.canvas,s=this.image;s.rotate&&(i=u({width:n.width,height:n.height,degree:s.rotate,aspectRatio:s.aspectRatio},!0)),t.extend(s,i?{width:i.width,height:i.height,left:(n.width-i.width)/2,top:(n.height-i.height)/2}:{width:n.width,height:n.height,left:0,top:0}),this.$clone.css({width:s.width,height:s.height,marginLeft:s.left,marginTop:s.top,transform:l(s)}),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvas,n=e.aspectRatio,s=nt(e.autoCropArea)||.8,r={width:i.width,height:i.height};n&&(i.height*n>i.width?r.height=r.width/n:r.width=r.height*n),this.cropBox=r,this.limitCropBox(!0,!0),r.width=st(rt(r.width,r.minWidth),r.maxWidth),r.height=st(rt(r.height,r.minHeight),r.maxHeight),r.width=rt(r.minWidth,r.width*s),r.height=rt(r.minHeight,r.height*s),r.oldLeft=r.left=i.left+(i.width-r.width)/2,r.oldTop=r.top=i.top+(i.height-r.height)/2,this.initialCropBox=t.extend({},r)},limitCropBox:function(t,e){var i,n,s,r,o=this.options,a=o.aspectRatio,h=this.container,l=h.width,u=h.height,c=this.canvas,d=this.cropBox,p=this.isLimited;t&&(i=nt(o.minCropBoxWidth)||0,n=nt(o.minCropBoxHeight)||0,i=st(i,l),n=st(n,u),s=st(l,p?c.width:l),r=st(u,p?c.height:u),a&&(i&&n?n*a>i?n=i/a:i=n*a:i?n=i/a:n&&(i=n*a),r*a>s?r=s/a:s=r*a),d.minWidth=st(i,s),d.minHeight=st(n,r),d.maxWidth=s,d.maxHeight=r),e&&(p?(d.minLeft=rt(0,c.left),d.minTop=rt(0,c.top),d.maxLeft=st(l,c.left+c.width)-d.width,d.maxTop=st(u,c.top+c.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=l-d.width,d.maxTop=u-d.height))},renderCropBox:function(){var t=this.options,e=this.container,i=e.width,n=e.height,s=this.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=st(rt(s.width,s.minWidth),s.maxWidth),s.height=st(rt(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.oldLeft=s.left=st(rt(s.left,s.minLeft),s.maxLeft),s.oldTop=s.top=st(rt(s.top,s.minTop),s.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data(F,s.width===i&&s.height===n?J:K),this.$cropBox.css({width:s.width,height:s.height,left:s.left,top:s.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger(H,this.getData()):this.isBuilt||this.$element.one(A,t.proxy(function(){this.trigger(H,this.getData())},this))}}),t.extend(ct,{initPreview:function(){var e=a(this.crossOrigin),i=this.url;this.$preview=t(this.options.preview),this.$viewBox.html("<img"+e+' src="'+i+'">'),this.$preview.each(function(){var n=t(this);n.data(W,{width:n.width(),height:n.height(),html:n.html()}),n.html("<img"+e+' src="'+i+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var e=t(this),i=e.data(W);e.css({width:i.width,height:i.height}).html(i.html).removeData(W)})},preview:function(){var e=this.image,i=this.canvas,n=this.cropBox,s=n.width,r=n.height,o=e.width,a=e.height,h=n.left-i.left-e.left,u=n.top-i.top-e.top;this.isCropped&&!this.isDisabled&&(this.$viewBox.find("img").css({width:o,height:a,marginLeft:-h,marginTop:-u,transform:l(e)}),this.$preview.each(function(){var i=t(this),n=i.data(W),c=n.width,d=n.height,p=c,f=d,g=1;s&&(g=c/s,f=r*g),r&&f>d&&(g=d/r,p=s*g,f=d),i.css({width:p,height:f}).find("img").css({width:o*g,height:a*g,marginLeft:-h*g,marginTop:-u*g,transform:l(e)})}))}}),t.extend(ct,{bind:function(){var e=this.options,i=this.$element,n=this.$cropper;t.isFunction(e.cropstart)&&i.on(N,e.cropstart),t.isFunction(e.cropmove)&&i.on(O,e.cropmove),t.isFunction(e.cropend)&&i.on(L,e.cropend),t.isFunction(e.crop)&&i.on(H,e.crop),t.isFunction(e.zoom)&&i.on(R,e.zoom),n.on(S,t.proxy(this.cropStart,this)),e.zoomable&&e.zoomOnWheel&&n.on(z,t.proxy(this.wheel,this)),e.toggleDragModeOnDblclick&&n.on(T,t.proxy(this.dblclick,this)),f.on(k,this._cropMove=s(this.cropMove,this)).on(I,this._cropEnd=s(this.cropEnd,this)),e.responsive&&p.on(M,this._resize=s(this.resize,this))},unbind:function(){var e=this.options,i=this.$element,n=this.$cropper;t.isFunction(e.cropstart)&&i.off(N,e.cropstart),t.isFunction(e.cropmove)&&i.off(O,e.cropmove),t.isFunction(e.cropend)&&i.off(L,e.cropend),t.isFunction(e.crop)&&i.off(H,e.crop),t.isFunction(e.zoom)&&i.off(R,e.zoom),n.off(S,this.cropStart),e.zoomable&&e.zoomOnWheel&&n.off(z,this.wheel),e.toggleDragModeOnDblclick&&n.off(T,this.dblclick),f.off(k,this._cropMove).off(I,this._cropEnd),e.responsive&&p.off(M,this._resize)}}),t.extend(ct,{resize:function(){var e,i,n,s=this.$container,r=this.container;!this.isDisabled&&r&&(n=s.width()/r.width,(1!==n||s.height()!==r.height)&&(e=this.getCanvasData(),i=this.getCropBoxData(),this.render(),this.setCanvasData(t.each(e,function(t,i){e[t]=i*n})),this.setCropBoxData(t.each(i,function(t,e){i[t]=e*n}))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(x)?this.setDragMode(J):this.setDragMode(Q))},wheel:function(t){var e=t.originalEvent,i=e||t,n=nt(this.options.wheelZoomRatio)||.1,s=1;this.isDisabled||(t.preventDefault(),i.deltaY?s=i.deltaY>0?1:-1:i.wheelDelta?s=-i.wheelDelta/120:i.detail&&(s=i.detail>0?1:-1),this.zoom(-s*n,e))},cropStart:function(e){var i,n,s=this.options,r=e.originalEvent,o=r&&r.touches,a=e;if(!this.isDisabled){if(o){if(i=o.length,i>1){if(!s.zoomable||!s.zoomOnTouch||2!==i)return;a=o[1],this.startX2=a.pageX,this.startY2=a.pageY,n=tt}a=o[0]}if(n=n||t(a.target).data(F),j.test(n)){if(this.trigger(N,{originalEvent:r,action:n}).isDefaultPrevented())return;e.preventDefault(),this.action=n,this.cropping=!1,this.startX=a.pageX||r&&r.pageX,this.startY=a.pageY||r&&r.pageY,n===Q&&(this.cropping=!0,this.$dragBox.addClass(v))}}},cropMove:function(t){var e,i=this.options,n=t.originalEvent,s=n&&n.touches,r=t,o=this.action;if(!this.isDisabled){if(s){if(e=s.length,e>1){if(!i.zoomable||!i.zoomOnTouch||2!==e)return;r=s[1],this.endX2=r.pageX,this.endY2=r.pageY}r=s[0]}if(o){if(this.trigger(O,{originalEvent:n,action:o}).isDefaultPrevented())return;t.preventDefault(),this.endX=r.pageX||n&&n.pageX,this.endY=r.pageY||n&&n.pageY,this.change(r.shiftKey,o===tt?n:null)}}},cropEnd:function(t){var e=t.originalEvent,i=this.action;this.isDisabled||i&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(v,this.isCropped&&this.options.modal)),this.action="",this.trigger(L,{originalEvent:e,action:i}))}}),t.extend(ct,{change:function(t,e){var i,n,s=this.options,r=s.aspectRatio,o=this.action,a=this.container,h=this.canvas,l=this.cropBox,u=l.width,c=l.height,d=l.left,p=l.top,f=d+u,g=p+c,m=0,v=0,_=a.width,y=a.height,w=!0;switch(!r&&t&&(r=u&&c?u/c:1),this.limited&&(m=l.minLeft,v=l.minTop,_=m+st(a.width,h.width),y=v+st(a.height,h.height)),n={x:this.endX-this.startX,y:this.endY-this.startY},r&&(n.X=n.y*r,n.Y=n.x/r),o){case K:d+=n.x,p+=n.y;break;case $:if(n.x>=0&&(f>=_||r&&(v>=p||g>=y))){w=!1;break}u+=n.x,r&&(c=u/r,p-=n.Y/2),0>u&&(o=V,u=0);break;case X:if(n.y<=0&&(v>=p||r&&(m>=d||f>=_))){w=!1;break}c-=n.y,p+=n.y,r&&(u=c*r,d+=n.X/2),0>c&&(o=q,c=0);break;case V:if(n.x<=0&&(m>=d||r&&(v>=p||g>=y))){w=!1;break}u-=n.x,d+=n.x,r&&(c=u/r,p+=n.Y/2),0>u&&(o=$,u=0);break;case q:if(n.y>=0&&(g>=y||r&&(m>=d||f>=_))){w=!1;break}c+=n.y,r&&(u=c*r,d-=n.X/2),0>c&&(o=X,c=0);break;case G:if(r){if(n.y<=0&&(v>=p||f>=_)){w=!1;break}c-=n.y,p+=n.y,u=c*r}else n.x>=0?_>f?u+=n.x:n.y<=0&&v>=p&&(w=!1):u+=n.x,n.y<=0?p>v&&(c-=n.y,p+=n.y):(c-=n.y,p+=n.y);0>u&&0>c?(o=Y,c=0,u=0):0>u?(o=Z,u=0):0>c&&(o=U,c=0);break;case Z:if(r){if(n.y<=0&&(v>=p||m>=d)){w=!1;break}c-=n.y,p+=n.y,u=c*r,d+=n.X}else n.x<=0?d>m?(u-=n.x,d+=n.x):n.y<=0&&v>=p&&(w=!1):(u-=n.x,d+=n.x),n.y<=0?p>v&&(c-=n.y,p+=n.y):(c-=n.y,p+=n.y);0>u&&0>c?(o=U,c=0,u=0):0>u?(o=G,u=0):0>c&&(o=Y,c=0);break;case Y:if(r){if(n.x<=0&&(m>=d||g>=y)){w=!1;break}u-=n.x,d+=n.x,c=u/r}else n.x<=0?d>m?(u-=n.x,d+=n.x):n.y>=0&&g>=y&&(w=!1):(u-=n.x,d+=n.x),n.y>=0?y>g&&(c+=n.y):c+=n.y;0>u&&0>c?(o=G,c=0,u=0):0>u?(o=U,u=0):0>c&&(o=Z,c=0);break;case U:if(r){if(n.x>=0&&(f>=_||g>=y)){w=!1;break}u+=n.x,c=u/r}else n.x>=0?_>f?u+=n.x:n.y>=0&&g>=y&&(w=!1):u+=n.x,n.y>=0?y>g&&(c+=n.y):c+=n.y;0>u&&0>c?(o=Z,c=0,u=0):0>u?(o=Y,u=0):0>c&&(o=G,c=0);break;case J:this.move(n.x,n.y),w=!1;break;case tt:this.zoom(function(t,e,i,n){var s=lt(t*t+e*e),r=lt(i*i+n*n);return(r-s)/s}(ot(this.startX-this.startX2),ot(this.startY-this.startY2),ot(this.endX-this.endX2),ot(this.endY-this.endY2)),e),this.startX2=this.endX2,this.startY2=this.endY2,w=!1;break;case Q:if(!n.x||!n.y){w=!1;break}i=this.$cropper.offset(),d=this.startX-i.left,p=this.startY-i.top,u=l.minWidth,c=l.minHeight,n.x>0?o=n.y>0?U:G:n.x<0&&(d-=u,o=n.y>0?Y:Z),n.y<0&&(p-=c),this.isCropped||(this.$cropBox.removeClass(b),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(l.width=u,l.height=c,l.left=d,l.top=p,this.action=o,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY}}),t.extend(ct,{crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(v),this.$cropBox.removeClass(b)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(v),this.$cropBox.addClass(b))},replace:function(t){!this.isDisabled&&t&&(this.isImg&&(this.isReplaced=!0,this.$element.attr("src",t)),this.options.data=null,this.load(t))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(C))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(C))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(b)):this.isImg?t.off(E,this.start):this.$clone&&this.$clone.remove(),t.removeData(m)},move:function(t,e){var n=this.canvas;this.moveTo(i(t)?t:n.left+nt(t),i(e)?e:n.top+nt(e))},moveTo:function(t,n){var s=this.canvas,r=!1;i(n)&&(n=t),t=nt(t),n=nt(n),this.isBuilt&&!this.isDisabled&&this.options.movable&&(e(t)&&(s.left=t,r=!0),e(n)&&(s.top=n,r=!0),r&&this.renderCanvas(!0))},zoom:function(t,e){var i=this.canvas;t=nt(t),t=0>t?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var i,n,s=this.options,r=this.canvas,o=r.width,a=r.height,h=r.naturalWidth,l=r.naturalHeight;if(t=nt(t),t>=0&&this.isBuilt&&!this.isDisabled&&s.zoomable){
if(i=h*t,n=l*t,this.trigger(R,{originalEvent:e,oldRatio:o/h,ratio:i/h}).isDefaultPrevented())return;r.left-=(i-o)/2,r.top-=(n-a)/2,r.width=i,r.height=n,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+nt(t))},rotateTo:function(t){t=nt(t),e(t)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,n){var s=this.image,r=!1;i(n)&&(n=t),t=nt(t),n=nt(n),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(e(t)&&(s.scaleX=t,r=!0),e(n)&&(s.scaleY=n,r=!0),r&&this.renderImage(!0))},scaleX:function(t){var i=this.image.scaleY;this.scale(t,e(i)?i:1)},scaleY:function(t){var i=this.image.scaleX;this.scale(e(i)?i:1,t)},getData:function(e){var i,n,s=this.options,r=this.image,o=this.canvas,a=this.cropBox;return this.isBuilt&&this.isCropped?(n={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height},i=r.width/r.naturalWidth,t.each(n,function(t,s){s/=i,n[t]=e?ut(s):s})):n={x:0,y:0,width:0,height:0},s.rotatable&&(n.rotate=r.rotate||0),s.scalable&&(n.scaleX=r.scaleX||1,n.scaleY=r.scaleY||1),n},setData:function(i){var n,s,r,o=this.options,a=this.image,h=this.canvas,l={};t.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(o.rotatable&&e(i.rotate)&&i.rotate!==a.rotate&&(a.rotate=i.rotate,this.isRotated=n=!0),o.scalable&&(e(i.scaleX)&&i.scaleX!==a.scaleX&&(a.scaleX=i.scaleX,s=!0),e(i.scaleY)&&i.scaleY!==a.scaleY&&(a.scaleY=i.scaleY,s=!0)),n?this.renderCanvas():s&&this.renderImage(),r=a.width/a.naturalWidth,e(i.x)&&(l.left=i.x*r+h.left),e(i.y)&&(l.top=i.y*r+h.top),e(i.width)&&(l.width=i.width*r),e(i.height)&&(l.height=i.height*r),this.setCropBoxData(l))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var e=this.canvas,i={};return this.isBuilt&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,n){i[n]=e[n]}),i},setCanvasData:function(i){var n=this.canvas,s=n.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(e(i.left)&&(n.left=i.left),e(i.top)&&(n.top=i.top),e(i.width)?(n.width=i.width,n.height=i.width/s):e(i.height)&&(n.height=i.height,n.width=i.height*s),this.renderCanvas(!0))},getCropBoxData:function(){var t,e=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(i){var n,s,r=this.cropBox,o=this.options.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&t.isPlainObject(i)&&(e(i.left)&&(r.left=i.left),e(i.top)&&(r.top=i.top),e(i.width)&&i.width!==r.width&&(n=!0,r.width=i.width),e(i.height)&&i.height!==r.height&&(s=!0,r.height=i.height),o&&(n?r.height=r.width/o:s&&(r.width=r.height*o)),this.renderCropBox())},getCroppedCanvas:function(e){var i,n,s,r,o,a,h,l,u,d,p;return this.isBuilt&&this.isCropped&&it?(t.isPlainObject(e)||(e={}),p=this.getData(),i=p.width,n=p.height,l=i/n,t.isPlainObject(e)&&(o=e.width,a=e.height,o?(a=o/l,h=o/i):a&&(o=a*l,h=a/n)),s=ut(o||i),r=ut(a||n),u=t("<canvas>")[0],u.width=s,u.height=r,d=u.getContext("2d"),e.fillColor&&(d.fillStyle=e.fillColor,d.fillRect(0,0,s,r)),d.drawImage.apply(d,function(){var t,e,s,r,o,a,l=c(this.$clone[0],this.image),u=l.width,d=l.height,f=[l],g=p.x,m=p.y;return-i>=g||g>u?g=t=s=o=0:0>=g?(s=-g,g=0,t=o=st(u,i+g)):u>=g&&(s=0,t=o=st(i,u-g)),0>=t||-n>=m||m>d?m=e=r=a=0:0>=m?(r=-m,m=0,e=a=st(d,n+m)):d>=m&&(r=0,e=a=st(n,d-m)),f.push(g,m,t,e),h&&(s*=h,r*=h,o*=h,a*=h),o>0&&a>0&&f.push(s,r,o,a),f}.call(this)),u):void 0},setAspectRatio:function(t){var e=this.options;this.isDisabled||i(t)||(e.aspectRatio=rt(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var e,i,n=this.options;this.isLoaded&&!this.isDisabled&&(e=t===Q,i=n.movable&&t===J,t=e||i?t:et,this.$dragBox.data(F,t).toggleClass(x,e).toggleClass(w,i),n.cropBoxMovable||this.$face.data(F,t).toggleClass(x,e).toggleClass(w,i))}}),t.extend(d.prototype,ct),d.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,checkCrossOrigin:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},d.setDefaults=function(e){t.extend(d.DEFAULTS,e)},d.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',d.other=t.fn.cropper,t.fn.cropper=function(e){var s,r=n(arguments,1);return this.each(function(){var i,n=t(this),o=n.data(m);if(!o){if(/destroy/.test(e))return;n.data(m,o=new d(this,e))}"string"==typeof e&&t.isFunction(i=o[e])&&(s=i.apply(o,r))}),i(s)?this:s},t.fn.cropper.Constructor=d,t.fn.cropper.setDefaults=d.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=d.other,this}}),function(t){function e(){this.regional=[],this.regional[""]={feedbackText:"{r} characters remaining ({m} maximum)",overflowText:"{o} characters too many ({m} maximum)"},this._defaults={max:200,truncate:!0,showFeedback:!0,feedbackTarget:null,onFull:null},t.extend(this._defaults,this.regional[""])}function i(e,i){return"option"==e&&(0==i.length||1==i.length&&"string"==typeof i[0])?!0:t.inArray(e,n)>-1}t.extend(e.prototype,{markerClassName:"hasMaxLength",propertyName:"maxlength",_feedbackClass:"maxlength-feedback",_fullClass:"maxlength-full",_overflowClass:"maxlength-overflow",_disabledClass:"maxlength-disabled",setDefaults:function(e){return t.extend(this._defaults,e||{}),this},_attachPlugin:function(e,i){if(e=t(e),!e.hasClass(this.markerClassName)){var n={options:t.extend({},this._defaults),feedbackTarget:t([])};e.addClass(this.markerClassName).data(this.propertyName,n).bind("keypress."+this.propertyName,function(e){if(!n.options.truncate)return!0;var i=String.fromCharCode(void 0==e.charCode?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||"\x00"==i||t(this).val().length<n.options.max}).bind("keyup."+this.propertyName,function(){s._checkLength(t(this))}),this._optionPlugin(e,i)}},_optionPlugin:function(e,i,n){e=t(e);var s=e.data(this.propertyName);if(!i||"string"==typeof i&&null==n){var r=i;return i=(s||{}).options,i&&r?i[r]:i}if(e.hasClass(this.markerClassName)){if(i=i||{},"string"==typeof i){var r=i;i={},i[r]=n}t.extend(s.options,i),s.feedbackTarget.length>0&&(s.hadFeedbackTarget?s.feedbackTarget.empty().val("").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):s.feedbackTarget.remove(),s.feedbackTarget=t([])),s.options.showFeedback&&(s.hadFeedbackTarget=!!s.options.feedbackTarget,t.isFunction(s.options.feedbackTarget)?s.feedbackTarget=s.options.feedbackTarget.apply(e[0],[]):s.options.feedbackTarget?s.feedbackTarget=t(s.options.feedbackTarget):s.feedbackTarget=t("<span></span>").insertAfter(e),s.feedbackTarget.addClass(this._feedbackClass)),e.unbind("mouseover."+this.propertyName+" focus."+this.propertyName+"mouseout."+this.propertyName+" blur."+this.propertyName),"active"==s.options.showFeedback&&(e.bind("mouseover."+this.propertyName,function(){s.feedbackTarget.css("visibility","visible")}).bind("mouseout."+this.propertyName,function(){s.focussed||s.feedbackTarget.css("visibility","hidden")}).bind("focus."+this.propertyName,function(){s.focussed=!0,s.feedbackTarget.css("visibility","visible")}).bind("blur."+this.propertyName,function(){s.focussed=!1,s.feedbackTarget.css("visibility","hidden")}),s.feedbackTarget.css("visibility","hidden")),this._checkLength(e)}},_curLengthPlugin:function(t){var e=t.data(this.propertyName),i=t.val(),n=i.replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;return{used:n,remaining:e.options.max-n}},_checkLength:function(e){var i=e.data(this.propertyName),n=e.val(),s=n.replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;if(e.toggleClass(this._fullClass,s>=i.options.max).toggleClass(this._overflowClass,s>i.options.max),s>i.options.max&&i.options.truncate){var r=e.val().split(/\r\n|\n/);n="";for(var o=0;n.length<i.options.max&&o<r.length;)n+=r[o].substring(0,i.options.max-n.length)+"\r\n",o++;e.val(n.substring(0,i.options.max)),e[0].scrollTop=e[0].scrollHeight,s=i.options.max}i.feedbackTarget.toggleClass(this._fullClass,s>=i.options.max).toggleClass(this._overflowClass,s>i.options.max);var a=(s>i.options.max?i.options.overflowText:i.options.feedbackText).replace(/\{c\}/,s).replace(/\{m\}/,i.options.max).replace(/\{r\}/,i.options.max-s).replace(/\{o\}/,s-i.options.max);try{i.feedbackTarget.text(a)}catch(h){}try{i.feedbackTarget.val(a)}catch(h){}s>=i.options.max&&t.isFunction(i.options.onFull)&&i.options.onFull.apply(e,[s>i.options.max])},_enablePlugin:function(e){if(e=t(e),e.hasClass(this.markerClassName)){e.prop("disabled",!1).removeClass(this.propertyName+"-disabled");var i=e.data(this.propertyName);i.feedbackTarget.removeClass(this.propertyName+"-disabled")}},_disablePlugin:function(e){if(e=t(e),e.hasClass(this.markerClassName)){e.prop("disabled",!0).addClass(this.propertyName+"-disabled");var i=e.data(this.propertyName);i.feedbackTarget.addClass(this.propertyName+"-disabled")}},_destroyPlugin:function(e){if(e=t(e),e.hasClass(this.markerClassName)){var i=e.data(this.propertyName);i.feedbackTarget.length>0&&(i.hadFeedbackTarget?i.feedbackTarget.empty().val("").css("visibility","visible").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):i.feedbackTarget.remove()),e.removeClass(this.markerClassName+" "+this._fullClass+" "+this._overflowClass).removeData(this.propertyName).unbind("."+this.propertyName)}}});var n=["curLength"];t.fn.maxlength=function(t){var e=Array.prototype.slice.call(arguments,1);return i(t,e)?s["_"+t+"Plugin"].apply(s,[this[0]].concat(e)):this.each(function(){if("string"==typeof t){if(!s["_"+t+"Plugin"])throw"Unknown method: "+t;s["_"+t+"Plugin"].apply(s,[this].concat(e))}else s._attachPlugin(this,t||{})})};var s=t.maxlength=new e}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var s,r=e||window.event,o=[].slice.call(arguments,1),a=0,h=0,l=0,u=0,c=0;return e=t.event.fix(r),e.type="mousewheel",r.wheelDelta&&(a=r.wheelDelta),r.detail&&(a=-1*r.detail),r.deltaY&&(l=-1*r.deltaY,a=l),r.deltaX&&(h=r.deltaX,a=-1*h),void 0!==r.wheelDeltaY&&(l=r.wheelDeltaY),void 0!==r.wheelDeltaX&&(h=-1*r.wheelDeltaX),u=Math.abs(a),(!i||i>u)&&(i=u),c=Math.max(Math.abs(l),Math.abs(h)),(!n||n>c)&&(n=c),s=a>0?"floor":"ceil",a=Math[s](a/i),h=Math[s](h/n),l=Math[s](l/n),o.unshift(e,a,h,l),(t.event.dispatch||t.event.handle).apply(this,o)}var i,n,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var o=s.length;o;)t.event.fixHooks[s[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),!function(t){function e(t,e,i){i=(i||0)-1;for(var n=t.length;++i<n;)if(t[i]===e)return i;return-1}function i(t,i){var n=typeof i;if(t=t.k,"boolean"==n||i==m)return t[i];"number"!=n&&"string"!=n&&(n="object");var s="number"==n?i:x+i;return t=t[n]||(t[n]={}),"object"==n?t[s]&&-1<e(t[s],i)?0:-1:t[s]?0:-1}function n(t){var e=this.k,i=typeof t;if("boolean"==i||t==m)e[t]=g;else{"number"!=i&&"string"!=i&&(i="object");var n="number"==i?t:x+t,s=e[i]||(e[i]={});"object"==i?(s[n]||(s[n]=[])).push(t)==this.b.length&&(e[i]=v):s[n]=g}}function s(t){return t.charCodeAt(0)}function r(t,e){var i=t.m,n=e.m;if(t=t.l,e=e.l,t!==e){if(t>e||"undefined"==typeof t)return 1;if(e>t||"undefined"==typeof e)return-1}return n>i?-1:1}function o(t){var e=-1,i=t.length,s=l();s["false"]=s["null"]=s["true"]=s.undefined=v;var r=l();for(r.b=t,r.k=s,r.push=n;++e<i;)r.push(t[e]);return s.object===!1?(c(r),m):r}function a(t){return"\\"+Z[t]}function h(){return _.pop()||[]}function l(){return b.pop()||{b:m,k:m,l:m,"false":v,m:0,leading:v,maxWait:0,"null":v,number:m,object:m,push:m,string:m,trailing:v,"true":v,undefined:v,n:m}}function u(t){t.length=0,_.length<P&&_.push(t)}function c(t){var e=t.k;e&&c(e),t.b=t.k=t.l=t.object=t.number=t.string=t.n=m,b.length<P&&b.push(t)}function d(t,e,i){e||(e=0),"undefined"==typeof i&&(i=t?t.length:0);var n=-1;i=i-e||0;for(var s=Array(0>i?0:i);++n<i;)s[n]=t[e+n];return s}function p(n){function _(t){if(!t||pe.call(t)!=q)return v;var e=t.valueOf,i="function"==typeof e&&(i=he(e))&&he(i);return i?t==i||he(t)==i:at(t)}function b(t,e,i){if(!t||!G[typeof t])return t;e=e&&"undefined"==typeof i?e:et.createCallback(e,i);for(var n=-1,s=G[typeof t]&&ze(t),r=s?s.length:0;++n<r&&(i=s[n],!(e(t[i],i,t)===!1)););return t}function P(t,e,i){var n;if(!t||!G[typeof t])return t;e=e&&"undefined"==typeof i?e:et.createCallback(e,i);for(n in t)if(e(t[n],n,t)===!1)break;return t}function Z(t,e,i){var n,s=t,r=s;if(!s)return r;for(var o=arguments,a=0,h="number"==typeof i?2:o.length;++a<h;)if((s=o[a])&&G[typeof s])for(var l=-1,u=G[typeof s]&&ze(s),c=u?u.length:0;++l<c;)n=u[l],"undefined"==typeof r[n]&&(r[n]=s[n]);return r}function K(t,e,i){var n,s=t,r=s;if(!s)return r;var o=arguments,a=0,h="number"==typeof i?2:o.length;if(h>3&&"function"==typeof o[h-2])var l=et.createCallback(o[--h-1],o[h--],2);else h>2&&"function"==typeof o[h-1]&&(l=o[--h]);for(;++a<h;)if((s=o[a])&&G[typeof s])for(var u=-1,c=G[typeof s]&&ze(s),d=c?c.length:0;++u<d;)n=c[u],r[n]=l?l(r[n],s[n]):s[n];return r}function J(t){var e,i=[];if(!t||!G[typeof t])return i;for(e in t)le.call(t,e)&&i.push(e);return i}function et(t){return t&&"object"==typeof t&&!Ie(t)&&le.call(t,"__wrapped__")?t:new it(t)}function it(t){this.__wrapped__=t}function nt(t,e,i,n){function s(){var n=arguments,l=o?this:e;return r||(t=e[a]),i.length&&(n=n.length?(n=Pe.call(n),h?n.concat(i):i.concat(n)):i),this instanceof s?(l=ft(t.prototype)?ge(t.prototype):{},n=t.apply(l,n),ft(n)?n:l):t.apply(l,n)}var r=pt(t),o=!i,a=e;if(o){var h=n;i=e}else if(!r){if(!n)throw new Qt;e=t}return s}function st(t){return Te[t]}function rt(){var t=(t=et.indexOf)===Mt?e:t;return t}function ot(t){return function(e,i,n,s){return"boolean"!=typeof i&&i!=m&&(s=n,n=s&&s[i]===e?f:i,i=v),n!=m&&(n=et.createCallback(n,s)),t(e,i,n,s)}}function at(t){var e,i;return t&&pe.call(t)==q&&(e=t.constructor,!pt(e)||e instanceof e)?(P(t,function(t,e){i=e}),i===f||le.call(t,i)):v}function ht(t){return Ee[t]}function lt(t,e,i,n,s,r){var o=t;if("boolean"!=typeof e&&e!=m&&(n=i,i=e,e=v),"function"==typeof i){if(i="undefined"==typeof n?i:et.createCallback(i,n,1),o=i(o),"undefined"!=typeof o)return o;o=t}if(n=ft(o)){var a=pe.call(o);if(!Y[a])return o;var l=Ie(o)}if(!n||!e)return n?l?d(o):K({},o):o;switch(n=Se[a],a){case W:case F:return new n(+o);case V:case U:return new n(o);case X:return n(o.source,E.exec(o))}a=!s,s||(s=h()),r||(r=h());for(var c=s.length;c--;)if(s[c]==t)return r[c];return o=l?n(o.length):{},l&&(le.call(t,"index")&&(o.index=t.index),le.call(t,"input")&&(o.input=t.input)),s.push(t),r.push(o),(l?Ct:b)(t,function(t,n){o[n]=lt(t,e,i,f,s,r)}),a&&(u(s),u(r)),o}function ut(t){var e=[];return P(t,function(t,i){pt(t)&&e.push(i)}),e.sort()}function ct(t){for(var e=-1,i=ze(t),n=i.length,s={};++e<n;){var r=i[e];s[t[r]]=r}return s}function dt(t,e,i,n,s,r){var o=i===w;if("function"==typeof i&&!o){i=et.createCallback(i,n,2);var a=i(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var l=typeof t,c=typeof e;if(t===t&&(!t||"function"!=l&&"object"!=l)&&(!e||"function"!=c&&"object"!=c))return v;if(t==m||e==m)return t===e;if(c=pe.call(t),l=pe.call(e),c==R&&(c=q),l==R&&(l=q),c!=l)return v;switch(c){case W:case F:return+t==+e;case V:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case X:case U:return t==Kt(e)}if(l=c==j,!l){if(le.call(t,"__wrapped__")||le.call(e,"__wrapped__"))return dt(t.__wrapped__||t,e.__wrapped__||e,i,n,s,r);if(c!=q)return v;var c=t.constructor,d=e.constructor;if(!(c==d||pt(c)&&c instanceof c&&pt(d)&&d instanceof d))return v}for(d=!s,s||(s=h()),r||(r=h()),c=s.length;c--;)if(s[c]==t)return r[c]==e;var p=0,a=g;if(s.push(t),r.push(e),l){if(c=t.length,p=e.length,a=p==t.length,!a&&!o)return a;for(;p--;)if(l=c,d=e[p],o)for(;l--&&!(a=dt(t[l],d,i,n,s,r)););else if(!(a=dt(t[p],d,i,n,s,r)))break;return a}return P(e,function(e,o,h){return le.call(h,o)?(p++,a=le.call(t,o)&&dt(t[o],e,i,n,s,r)):void 0}),a&&!o&&P(t,function(t,e,i){return le.call(i,e)?a=-1<--p:void 0}),d&&(u(s),u(r)),a}function pt(t){return"function"==typeof t}function ft(t){return!(!t||!G[typeof t])}function gt(t){return"number"==typeof t||pe.call(t)==V}function mt(t){return"string"==typeof t||pe.call(t)==U}function vt(t,e,i){var n=arguments,s=0,r=2;if(!ft(t))return t;if(i===w)var o=n[3],a=n[4],l=n[5];else{var c=g,a=h(),l=h();"number"!=typeof i&&(r=n.length),r>3&&"function"==typeof n[r-2]?o=et.createCallback(n[--r-1],n[r--],2):r>2&&"function"==typeof n[r-1]&&(o=n[--r])}for(;++s<r;)(Ie(n[s])?Ct:b)(n[s],function(e,i){var n,s,r=e,h=t[i];if(e&&((s=Ie(e))||_(e))){for(r=a.length;r--;)if(n=a[r]==e){h=l[r];break}if(!n){var u;o&&(r=o(h,e),u="undefined"!=typeof r)&&(h=r),u||(h=s?Ie(h)?h:[]:_(h)?h:{}),a.push(e),l.push(h),u||(h=vt(h,e,w,o,a,l))}}else o&&(r=o(h,e),"undefined"==typeof r&&(r=e)),"undefined"!=typeof r&&(h=r);t[i]=h});return c&&(u(a),u(l)),t}function _t(t){for(var e=-1,i=ze(t),n=i.length,s=$t(n);++e<n;)s[e]=t[i[e]];return s}function bt(t,e,i){var n=-1,s=rt(),r=t?t.length:0,o=v;return i=(0>i?ye(0,r+i):i)||0,r&&"number"==typeof r?o=-1<(mt(t)?t.indexOf(e,i):s(t,e,i)):b(t,function(t){return++n<i?void 0:!(o=t===e)}),o}function yt(t,e,i){var n=g;e=et.createCallback(e,i),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s&&(n=!!e(t[i],i,t)););else b(t,function(t,i,s){return n=!!e(t,i,s)});return n}function wt(t,e,i){var n=[];e=et.createCallback(e,i),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s;){var r=t[i];e(r,i,t)&&n.push(r)}else b(t,function(t,i,s){e(t,i,s)&&n.push(t)});return n}function xt(t,e,i){e=et.createCallback(e,i),i=-1;var n=t?t.length:0;if("number"!=typeof n){var s;return b(t,function(t,i,n){return e(t,i,n)?(s=t,v):void 0}),s}for(;++i<n;){var r=t[i];if(e(r,i,t))return r}}function Ct(t,e,i){var n=-1,s=t?t.length:0;if(e=e&&"undefined"==typeof i?e:et.createCallback(e,i),"number"==typeof s)for(;++n<s&&e(t[n],n,t)!==!1;);else b(t,e);return t}function Pt(t,e,i){var n=-1,s=t?t.length:0;if(e=et.createCallback(e,i),"number"==typeof s)for(var r=$t(s);++n<s;)r[n]=e(t[n],n,t);else r=[],b(t,function(t,i,s){r[++n]=e(t,i,s)});return r}function St(t,e,i){var n=-1/0,r=n;if(!e&&Ie(t)){i=-1;for(var o=t.length;++i<o;){var a=t[i];a>r&&(r=a)}}else e=!e&&mt(t)?s:et.createCallback(e,i),Ct(t,function(t,i,s){i=e(t,i,s),i>n&&(n=i,r=t)});return r}function kt(t,e){var i=-1,n=t?t.length:0;if("number"==typeof n)for(var s=$t(n);++i<n;)s[i]=t[i][e];return s||Pt(t,e)}function It(t,e,i,n){if(!t)return i;var s=3>arguments.length;e=et.createCallback(e,n,4);var r=-1,o=t.length;if("number"==typeof o)for(s&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);else b(t,function(t,n,r){i=s?(s=v,t):e(i,t,n,r)});return i}function zt(t,e,i,n){var s=t?t.length:0,r=3>arguments.length;if("number"!=typeof s)var o=ze(t),s=o.length;return e=et.createCallback(e,n,4),Ct(t,function(n,a,h){a=o?o[--s]:--s,i=r?(r=v,t[a]):e(i,t[a],a,h)}),i}function Tt(t,e,i){var n;e=et.createCallback(e,i),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s&&!(n=e(t[i],i,t)););else b(t,function(t,i,s){return!(n=e(t,i,s))});return!!n}function Et(t){var n=-1,s=rt(),r=t?t.length:0,a=re.apply(Jt,Pe.call(arguments,1)),h=[],l=r>=C&&s===e;if(l){var u=o(a);u?(s=i,a=u):l=v}for(;++n<r;)u=t[n],0>s(a,u)&&h.push(u);return l&&c(a),h}function Dt(t,e,i){if(t){var n=0,s=t.length;if("number"!=typeof e&&e!=m){var r=-1;for(e=et.createCallback(e,i);++r<s&&e(t[r],r,t);)n++}else if(n=e,n==m||i)return t[0];return d(t,0,we(ye(0,n),s))}}function Mt(t,i,n){if("number"==typeof n){var s=t?t.length:0;n=0>n?ye(0,s+n):n||0}else if(n)return n=At(t,i),t[n]===i?n:-1;return t?e(t,i,n):-1}function Bt(t,e,i){if("number"!=typeof e&&e!=m){var n=0,s=-1,r=t?t.length:0;for(e=et.createCallback(e,i);++s<r&&e(t[s],s,t);)n++}else n=e==m||i?1:ye(0,e);return d(t,n)}function At(t,e,i,n){var s=0,r=t?t.length:s;for(i=i?et.createCallback(i,n,1):jt,e=i(e);r>s;)n=s+r>>>1,i(t[n])<e?s=n+1:r=n;return s}function Nt(t){for(var e=-1,i=t?St(kt(t,"length")):0,n=$t(0>i?0:i);++e<i;)n[e]=kt(t,e);return n}function Ot(t,e){for(var i=-1,n=t?t.length:0,s={};++i<n;){var r=t[i];e?s[r]=e[i]:s[r[0]]=r[1]}return s}function Lt(t,e){return ke.fastBind||fe&&2<arguments.length?fe.call.apply(fe,arguments):nt(t,e,Pe.call(arguments,2))}function Ht(t,e,i){function n(){se(d),se(p),l=0,d=p=m}function s(){var e=f&&(!_||l>1);n(),e&&(c!==!1&&(u=new qt),a=t.apply(h,o))}function r(){n(),(f||c!==e)&&(u=new qt,a=t.apply(h,o))}var o,a,h,l=0,u=0,c=v,d=m,p=m,f=g;if(e=ye(0,e||0),i===g)var _=g,f=v;else ft(i)&&(_=i.leading,c="maxWait"in i&&ye(e,i.maxWait||0),f="trailing"in i?i.trailing:f);return function(){if(o=arguments,h=this,l++,se(p),c===!1)_&&2>l&&(a=t.apply(h,o));else{var i=new qt;!d&&!_&&(u=i);var n=c-(i-u);n>0?d||(d=de(r,n)):(se(d),d=m,u=i,a=t.apply(h,o))}return e!==c&&(p=de(s,e)),a}}function Rt(t){var e=Pe.call(arguments,1);return de(function(){t.apply(f,e)},1)}function jt(t){return t}function Wt(t){Ct(ut(t),function(e){var i=et[e]=t[e];et.prototype[e]=function(){var t=this.__wrapped__,e=[t];return ue.apply(e,arguments),e=i.apply(et,e),t&&"object"==typeof t&&t===e?this:new it(e)}})}function Ft(){return this.__wrapped__}n=n?tt.defaults(t.Object(),n,tt.pick(t,H)):t;var $t=n.Array,Vt=n.Boolean,qt=n.Date,Xt=n.Function,Ut=n.Math,Yt=n.Number,Gt=n.Object,Zt=n.RegExp,Kt=n.String,Qt=n.TypeError,Jt=[],te=Gt.prototype,ee=n._,ie=Zt("^"+Kt(te.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ne=Ut.ceil,se=n.clearTimeout,re=Jt.concat,oe=Ut.floor,ae=Xt.prototype.toString,he=ie.test(he=Gt.getPrototypeOf)&&he,le=te.hasOwnProperty,ue=Jt.push,ce=n.setImmediate,de=n.setTimeout,pe=te.toString,fe=ie.test(fe=pe.bind)&&fe,ge=ie.test(ge=Gt.create)&&ge,me=ie.test(me=$t.isArray)&&me,ve=n.isFinite,_e=n.isNaN,be=ie.test(be=Gt.keys)&&be,ye=Ut.max,we=Ut.min,xe=n.parseInt,Ce=Ut.random,Pe=Jt.slice,Ut=ie.test(n.attachEvent),Ut=fe&&!/\n|true/.test(fe+Ut),Se={};Se[j]=$t,Se[W]=Vt,Se[F]=qt,Se[$]=Xt,Se[q]=Gt,Se[V]=Yt,Se[X]=Zt,Se[U]=Kt,it.prototype=et.prototype;var ke=et.support={};ke.fastBind=fe&&!Ut,et.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:D,variable:"",imports:{_:et}};var Ie=me,ze=be?function(t){return ft(t)?be(t):[]}:J,Te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ee=ct(Te),Vt=ot(function Me(t,e,i){for(var n=-1,s=t?t.length:0,r=[];++n<s;){var o=t[n];i&&(o=i(o,n,t)),Ie(o)?ue.apply(r,e?o:Me(o)):r.push(o)}return r}),De=ot(function(t,n,s){var r=-1,a=rt(),l=t?t.length:0,d=[],p=!n&&l>=C&&a===e,f=s||p?h():d;if(p){var g=o(f);g?(a=i,f=g):(p=v,f=s?f:(u(f),d))}for(;++r<l;){var g=t[r],m=s?s(g,r,t):g;(n?!r||f[f.length-1]!==m:0>a(f,m))&&((s||p)&&f.push(m),d.push(g))}return p?(u(f.b),c(f)):s&&u(f),d});return Ut&&Q&&"function"==typeof ce&&(Rt=Lt(ce,n)),ce=8==xe(B+"08")?xe:function(t,e){return xe(mt(t)?t.replace(A,""):t,e||0)},et.after=function(t,e){return 1>t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},et.assign=K,et.at=function(t){for(var e=-1,i=re.apply(Jt,Pe.call(arguments,1)),n=i.length,s=$t(n);++e<n;)s[e]=t[i[e]];return s},et.bind=Lt,et.bindAll=function(t){for(var e=1<arguments.length?re.apply(Jt,Pe.call(arguments,1)):ut(t),i=-1,n=e.length;++i<n;){var s=e[i];t[s]=Lt(t[s],t)}return t},et.bindKey=function(t,e){return nt(t,e,Pe.call(arguments,2),w)},et.compact=function(t){for(var e=-1,i=t?t.length:0,n=[];++e<i;){var s=t[e];s&&n.push(s)}return n},et.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length;i--;)e=[t[i].apply(this,e)];return e[0]}},et.countBy=function(t,e,i){var n={};return e=et.createCallback(e,i),Ct(t,function(t,i,s){i=Kt(e(t,i,s)),le.call(n,i)?n[i]++:n[i]=1}),n},et.createCallback=function(t,e,i){if(t==m)return jt;var n=typeof t;if("function"!=n){if("object"!=n)return function(e){return e[t]};var s=ze(t);return function(e){for(var i=s.length,n=v;i--&&(n=dt(e[s[i]],t[s[i]],w)););return n}}return"undefined"==typeof e||M&&!M.test(ae.call(t))?t:1===i?function(i){return t.call(e,i)}:2===i?function(i,n){return t.call(e,i,n)}:4===i?function(i,n,s,r){return t.call(e,i,n,s,r)}:function(i,n,s){return t.call(e,i,n,s)}},et.debounce=Ht,et.defaults=Z,et.defer=Rt,et.delay=function(t,e){var i=Pe.call(arguments,2);return de(function(){t.apply(f,i)},e)},et.difference=Et,et.filter=wt,et.flatten=Vt,et.forEach=Ct,et.forIn=P,et.forOwn=b,et.functions=ut,et.groupBy=function(t,e,i){var n={};return e=et.createCallback(e,i),Ct(t,function(t,i,s){i=Kt(e(t,i,s)),(le.call(n,i)?n[i]:n[i]=[]).push(t)}),n},et.initial=function(t,e,i){if(!t)return[];var n=0,s=t.length;if("number"!=typeof e&&e!=m){var r=s;for(e=et.createCallback(e,i);r--&&e(t[r],r,t);)n++}else n=e==m||i?1:e||n;return d(t,0,we(ye(0,s-n),s))},et.intersection=function(t){for(var n=arguments,s=n.length,r=-1,a=h(),l=-1,d=rt(),p=t?t.length:0,f=[],g=h();++r<s;){var m=n[r];a[r]=d===e&&(m?m.length:0)>=C&&o(r?n[r]:g)}t:for(;++l<p;){var v=a[0],m=t[l];if(0>(v?i(v,m):d(g,m))){for(r=s,(v||g).push(m);--r;)if(v=a[r],0>(v?i(v,m):d(n[r],m)))continue t;f.push(m)}}for(;s--;)(v=a[s])&&c(v);return u(a),u(g),f},et.invert=ct,et.invoke=function(t,e){var i=Pe.call(arguments,2),n=-1,s="function"==typeof e,r=t?t.length:0,o=$t("number"==typeof r?r:0);return Ct(t,function(t){o[++n]=(s?e:t[e]).apply(t,i)}),o},et.keys=ze,et.map=Pt,et.max=St,et.memoize=function(t,e){function i(){var n=i.cache,s=x+(e?e.apply(this,arguments):arguments[0]);return le.call(n,s)?n[s]:n[s]=t.apply(this,arguments)}return i.cache={},i},et.merge=vt,et.min=function(t,e,i){var n=1/0,r=n;if(!e&&Ie(t)){i=-1;for(var o=t.length;++i<o;){var a=t[i];r>a&&(r=a)}}else e=!e&&mt(t)?s:et.createCallback(e,i),Ct(t,function(t,i,s){i=e(t,i,s),n>i&&(n=i,r=t)});return r},et.omit=function(t,e,i){var n=rt(),s="function"==typeof e,r={};if(s)e=et.createCallback(e,i);else var o=re.apply(Jt,Pe.call(arguments,1));return P(t,function(t,i,a){(s?!e(t,i,a):0>n(o,i))&&(r[i]=t)}),r},et.once=function(t){var e,i;return function(){return e?i:(e=g,i=t.apply(this,arguments),t=m,i)}},et.pairs=function(t){for(var e=-1,i=ze(t),n=i.length,s=$t(n);++e<n;){var r=i[e];s[e]=[r,t[r]]}return s},et.partial=function(t){return nt(t,Pe.call(arguments,1))},et.partialRight=function(t){return nt(t,Pe.call(arguments,1),m,w)},et.pick=function(t,e,i){var n={};if("function"!=typeof e)for(var s=-1,r=re.apply(Jt,Pe.call(arguments,1)),o=ft(t)?r.length:0;++s<o;){var a=r[s];a in t&&(n[a]=t[a])}else e=et.createCallback(e,i),P(t,function(t,i,s){e(t,i,s)&&(n[i]=t)});return n},et.pluck=kt,et.range=function(t,e,i){t=+t||0,i=+i||1,e==m&&(e=t,t=0);var n=-1;e=ye(0,ne((e-t)/i));for(var s=$t(e);++n<e;)s[n]=t,t+=i;return s},et.reject=function(t,e,i){return e=et.createCallback(e,i),wt(t,function(t,i,n){return!e(t,i,n)})},et.rest=Bt,et.shuffle=function(t){var e=-1,i=t?t.length:0,n=$t("number"==typeof i?i:0);return Ct(t,function(t){var i=oe(Ce()*(++e+1));n[e]=n[i],n[i]=t}),n},et.sortBy=function(t,e,i){var n=-1,s=t?t.length:0,o=$t("number"==typeof s?s:0);for(e=et.createCallback(e,i),Ct(t,function(t,i,s){var r=o[++n]=l();r.l=e(t,i,s),r.m=n,r.n=t}),s=o.length,o.sort(r);s--;)t=o[s],o[s]=t.n,c(t);return o},et.tap=function(t,e){return e(t),t},et.throttle=function(t,e,i){var n=g,s=g;return i===!1?n=v:ft(i)&&(n="leading"in i?i.leading:n,s="trailing"in i?i.trailing:s),i=l(),i.leading=n,i.maxWait=e,i.trailing=s,t=Ht(t,e,i),c(i),t},et.times=function(t,e,i){t=-1<(t=+t)?t:0;var n=-1,s=$t(t);for(e=et.createCallback(e,i,1);++n<t;)s[n]=e(n);return s},et.toArray=function(t){return t&&"number"==typeof t.length?d(t):_t(t)},et.transform=function(t,e,i,n){var s=Ie(t);return e=et.createCallback(e,n,4),i==m&&(s?i=[]:(n=t&&t.constructor,i=ft(n&&n.prototype)?ge(n&&n.prototype):{})),(s?Ct:b)(t,function(t,n,s){return e(i,t,n,s)}),i},et.union=function(t){return Ie(t)||(arguments[0]=t?Pe.call(t):Jt),De(re.apply(Jt,arguments))},et.uniq=De,et.unzip=Nt,et.values=_t,et.where=wt,et.without=function(t){return Et(t,Pe.call(arguments,1))},et.wrap=function(t,e){return function(){var i=[t];return ue.apply(i,arguments),e.apply(this,i)}},et.zip=function(t){return t?Nt(arguments):[]},et.zipObject=Ot,et.collect=Pt,et.drop=Bt,et.each=Ct,et.extend=K,et.methods=ut,et.object=Ot,et.select=wt,et.tail=Bt,et.unique=De,Wt(et),et.chain=et,et.prototype.chain=function(){return this},et.clone=lt,et.cloneDeep=function(t,e,i){return lt(t,g,e,i)},et.contains=bt,et.escape=function(t){return t==m?"":Kt(t).replace(O,st)},et.every=yt,et.find=xt,et.findIndex=function(t,e,i){var n=-1,s=t?t.length:0;for(e=et.createCallback(e,i);++n<s;)if(e(t[n],n,t))return n;return-1},et.findKey=function(t,e,i){var n;return e=et.createCallback(e,i),b(t,function(t,i,s){return e(t,i,s)?(n=i,v):void 0}),n},et.has=function(t,e){return t?le.call(t,e):v},et.identity=jt,et.indexOf=Mt,et.isArguments=function(t){return pe.call(t)==R},et.isArray=Ie,et.isBoolean=function(t){return t===g||t===!1||pe.call(t)==W},et.isDate=function(t){return t?"object"==typeof t&&pe.call(t)==F:v},et.isElement=function(t){return t?1===t.nodeType:v},et.isEmpty=function(t){var e=g;if(!t)return e;var i=pe.call(t),n=t.length;return i==j||i==U||i==R||i==q&&"number"==typeof n&&pt(t.splice)?!n:(b(t,function(){return e=v}),e)},et.isEqual=dt,et.isFinite=function(t){return ve(t)&&!_e(parseFloat(t))},et.isFunction=pt,et.isNaN=function(t){return gt(t)&&t!=+t},et.isNull=function(t){return t===m},et.isNumber=gt,et.isObject=ft,et.isPlainObject=_,et.isRegExp=function(t){return t?"object"==typeof t&&pe.call(t)==X:v},et.isString=mt,et.isUndefined=function(t){return"undefined"==typeof t},et.lastIndexOf=function(t,e,i){var n=t?t.length:0;for("number"==typeof i&&(n=(0>i?ye(0,n+i):we(i,n-1))+1);n--;)if(t[n]===e)return n;return-1},et.mixin=Wt,et.noConflict=function(){return n._=ee,this},et.parseInt=ce,et.random=function(t,e){t==m&&e==m&&(e=1),t=+t||0,e==m?(e=t,t=0):e=+e||0;var i=Ce();return t%1||e%1?t+we(i*(e-t+parseFloat("1e-"+((i+"").length-1))),e):t+oe(i*(e-t+1))},et.reduce=It,et.reduceRight=zt,et.result=function(t,e){var i=t?t[e]:f;return pt(i)?t[e]():i},et.runInContext=p,et.size=function(t){var e=t?t.length:0;
return"number"==typeof e?e:ze(t).length},et.some=Tt,et.sortedIndex=At,et.template=function(t,e,i){var n=et.templateSettings;t||(t=""),i=Z({},i,n);var s,r=Z({},i.imports,n.imports),n=ze(r),r=_t(r),o=0,h=i.interpolate||N,l="__p+='",h=Zt((i.escape||N).source+"|"+h.source+"|"+(h===D?T:N).source+"|"+(i.evaluate||N).source+"|$","g");t.replace(h,function(e,i,n,r,h,u){return n||(n=r),l+=t.slice(o,u).replace(L,a),i&&(l+="'+__e("+i+")+'"),h&&(s=g,l+="';"+h+";__p+='"),n&&(l+="'+((__t=("+n+"))==null?'':__t)+'"),o=u+e.length,e}),l+="';\n",h=i=i.variable,h||(i="obj",l="with("+i+"){"+l+"}"),l=(s?l.replace(S,""):l).replace(k,"$1").replace(I,"$1;"),l="function("+i+"){"+(h?"":i+"||("+i+"={});")+"var __t,__p='',__e=_.escape"+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var u=Xt(n,"return "+l).apply(f,r)}catch(c){throw c.source=l,c}return e?u(e):(u.source=l,u)},et.unescape=function(t){return t==m?"":Kt(t).replace(z,ht)},et.uniqueId=function(t){var e=++y;return Kt(t==m?"":t)+e},et.all=yt,et.any=Tt,et.detect=xt,et.findWhere=xt,et.foldl=It,et.foldr=zt,et.include=bt,et.inject=It,b(et,function(t,e){et.prototype[e]||(et.prototype[e]=function(){var e=[this.__wrapped__];return ue.apply(e,arguments),t.apply(et,e)})}),et.first=Dt,et.last=function(t,e,i){if(t){var n=0,s=t.length;if("number"!=typeof e&&e!=m){var r=s;for(e=et.createCallback(e,i);r--&&e(t[r],r,t);)n++}else if(n=e,n==m||i)return t[s-1];return d(t,ye(0,s-n))}},et.take=Dt,et.head=Dt,b(et,function(t,e){et.prototype[e]||(et.prototype[e]=function(e,i){var n=t(this.__wrapped__,e,i);return e==m||i&&"function"!=typeof e?n:new it(n)})}),et.VERSION="1.3.1",et.prototype.toString=function(){return Kt(this.__wrapped__)},et.prototype.value=Ft,et.prototype.valueOf=Ft,Ct(["join","pop","shift"],function(t){var e=Jt[t];et.prototype[t]=function(){return e.apply(this.__wrapped__,arguments)}}),Ct(["push","reverse","sort","unshift"],function(t){var e=Jt[t];et.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Ct(["concat","slice","splice"],function(t){var e=Jt[t];et.prototype[t]=function(){return new it(e.apply(this.__wrapped__,arguments))}}),et}var f,g=!0,m=null,v=!1,_=[],b=[],y=0,w={},x=+new Date+"",C=75,P=40,S=/\b__p\+='';/g,k=/\b(__p\+=)''\+/g,I=/(__e\(.*?\)|\b__t\))\+'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,T=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,D=/<%=([\s\S]+?)%>/g,M=(M=/\bthis\b/)&&M.test(p)&&M,B=" 	\x0B\f \ufeff\n\r\u2028\u2029 ᠎             　",A=RegExp("^["+B+"]*0+(?=.$)"),N=/($^)/,O=/[&<>"']/g,L=/['\n\r\t\u2028\u2029\\]/g,H="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),R="[object Arguments]",j="[object Array]",W="[object Boolean]",F="[object Date]",$="[object Function]",V="[object Number]",q="[object Object]",X="[object RegExp]",U="[object String]",Y={};Y[$]=v,Y[R]=Y[j]=Y[W]=Y[F]=Y[V]=Y[q]=Y[X]=Y[U]=g;var G={"boolean":v,"function":g,object:g,number:v,string:v,undefined:v},Z={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=G[typeof exports]&&exports,Q=G[typeof module]&&module&&module.exports==K&&module,J=G[typeof global]&&global;!J||J.global!==J&&J.window!==J||(t=J);var tt=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=tt,define(function(){return tt})):K&&!K.nodeType?Q?(Q.exports=tt)._=tt:K._=tt:t._=tt}(this),!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var s,r,o,a,h;for(this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.enabled=!0,o=this.options.trigger.split(" "),h=o.length;h--;)a=o[h],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i,n=t.fn[this.type].defaults,s={};return this._options&&t.each(this._options,function(t,e){n[t]!=e&&(s[t]=e)},this),i=t(e.currentTarget)[this.type](s).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var e,i,n,s,r,o,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),i=this.getPosition(),n=e[0].offsetWidth,s=e[0].offsetHeight,r){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":o={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":o={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":o={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(o,r),this.$element.trigger("shown")}},applyPlacement:function(t,e){var i,n,s,r,o=this.tip(),a=o[0].offsetWidth,h=o[0].offsetHeight;o.offset(t).addClass(e).addClass("in"),i=o[0].offsetWidth,n=o[0].offsetHeight,"top"==e&&n!=h&&(t.top=t.top+h-n,r=!0),"bottom"==e||"top"==e?(s=0,t.left<0&&(s=-2*t.left,t.left=0,o.offset(t),i=o[0].offsetWidth,n=o[0].offsetHeight),this.replaceArrow(s-a+i,i,"left")):this.replaceArrow(n-h,n,"top"),r&&o.offset(t)},replaceArrow:function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){i.off(t.support.transition.end).detach()},500);i.one(t.support.transition.end,function(){clearTimeout(e),i.detach()})}var i=this.tip(),n=t.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("tooltip"),r="object"==typeof i&&i;s||n.data("tooltip",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery);var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var i=Object.prototype.toString,n="[object Function]",s="[object Object]";t.registerHelper=function(e,n,r){if(i.call(e)===s){if(r||n)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else r&&(n.not=r),this.helpers[e]=n},t.registerPartial=function(e,n){i.call(e)===s?t.Utils.extend(this.partials,e):this.partials[e]=n},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,s){var r=s.inverse||function(){},o=s.fn,a=i.call(e);return a===n&&(e=e.call(this)),e===!0?o(this):e===!1||null==e?r(this):"[object Array]"===a?e.length>0?t.helpers.each(e,s):r(this):o(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var i=new t.K;return t.K.prototype=null,i},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,i){if(t.logger.level<=e){var n=t.logger.methodMap[e];"undefined"!=typeof console&&console[n]}}},t.log=function(e,i){t.logger.log(e,i)},t.registerHelper("each",function(e,s){var r,o=s.fn,a=s.inverse,h=0,l="",u=i.call(e);if(u===n&&(e=e.call(this)),s.data&&(r=t.createFrame(s.data)),e&&"object"==typeof e)if(e instanceof Array)for(var c=e.length;c>h;h++)r&&(r.index=h),l+=o(e[h],{data:r});else for(var d in e)e.hasOwnProperty(d)&&(r&&(r.key=d),l+=o(e[d],{data:r}),h++);return 0===h&&(l=a(this)),l}),t.registerHelper("if",function(e,s){var r=i.call(e);return r===n&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?s.inverse(this):s.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn})}),t.registerHelper("with",function(e,s){var r=i.call(e);return r===n&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:s.fn(e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)});var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,i,n,s,r,o){var a=r.length-1;switch(s){case 1:return r[a-1];case 2:this.$=new n.ProgramNode([],r[a]);break;case 3:this.$=new n.ProgramNode(r[a-2],r[a]);break;case 4:this.$=new n.ProgramNode(r[a-1],[]);break;case 5:this.$=new n.ProgramNode(r[a]);break;case 6:this.$=new n.ProgramNode([],[]);break;case 7:this.$=new n.ProgramNode([]);break;case 8:this.$=[r[a]];break;case 9:r[a-1].push(r[a]),this.$=r[a-1];break;case 10:this.$=new n.BlockNode(r[a-2],r[a-1].inverse,r[a-1],r[a]);break;case 11:this.$=new n.BlockNode(r[a-2],r[a-1],r[a-1].inverse,r[a]);break;case 12:this.$=r[a];break;case 13:this.$=r[a];break;case 14:this.$=new n.ContentNode(r[a]);break;case 15:this.$=new n.CommentNode(r[a]);break;case 16:this.$=new n.MustacheNode(r[a-1][0],r[a-1][1]);break;case 17:this.$=new n.MustacheNode(r[a-1][0],r[a-1][1]);break;case 18:this.$=r[a-1];break;case 19:this.$=new n.MustacheNode(r[a-1][0],r[a-1][1],"&"===r[a-2][2]);break;case 20:this.$=new n.MustacheNode(r[a-1][0],r[a-1][1],!0);break;case 21:this.$=new n.PartialNode(r[a-1]);break;case 22:this.$=new n.PartialNode(r[a-2],r[a-1]);break;case 23:break;case 24:this.$=[[r[a-2]].concat(r[a-1]),r[a]];break;case 25:this.$=[[r[a-1]].concat(r[a]),null];break;case 26:this.$=[[r[a-1]],r[a]];break;case 27:this.$=[[r[a]],null];break;case 28:this.$=[[r[a]],null];break;case 29:r[a-1].push(r[a]),this.$=r[a-1];break;case 30:this.$=[r[a]];break;case 31:this.$=r[a];break;case 32:this.$=new n.StringNode(r[a]);break;case 33:this.$=new n.IntegerNode(r[a]);break;case 34:this.$=new n.BooleanNode(r[a]);break;case 35:this.$=r[a];break;case 36:this.$=new n.HashNode(r[a]);break;case 37:r[a-1].push(r[a]),this.$=r[a-1];break;case 38:this.$=[r[a]];break;case 39:this.$=[r[a-2],r[a]];break;case 40:this.$=[r[a-2],new n.StringNode(r[a])];break;case 41:this.$=[r[a-2],new n.IntegerNode(r[a])];break;case 42:this.$=[r[a-2],new n.BooleanNode(r[a])];break;case 43:this.$=[r[a-2],r[a]];break;case 44:this.$=new n.PartialNameNode(r[a]);break;case 45:this.$=new n.PartialNameNode(new n.StringNode(r[a]));break;case 46:this.$=new n.PartialNameNode(new n.IntegerNode(r[a]));break;case 47:this.$=new n.DataNode(r[a]);break;case 48:this.$=new n.IdNode(r[a]);break;case 49:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 50:this.$=[{part:r[a]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],r=[],o=this.table,a="",h=0,l=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;r.push(c);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,_,b,y,w,x={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=e()),m=o[g]&&o[g][p]),"undefined"==typeof m||!m.length||!m[0]){var C="";if(!u){w=[];for(_ in o[g])this.terminals_[_]&&_>2&&w.push("'"+this.terminals_[_]+"'");C=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:n.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(m[1]),p=null,f?(p=f,f=null):(l=this.lexer.yyleng,a=this.lexer.yytext,h=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],x.$=s[s.length-b],x._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,l,h,this.yy,m[1],s,r),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),s.push(x.$),r.push(x._$),y=o[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(i=this._input.match(this.rules[r[o]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){switch(i){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},t.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();t.Parser=r,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,i){this.type="program",this.statements=e,i&&(this.inverse=new t.AST.ProgramNode(i))},t.AST.MustacheNode=function(t,e,i){this.type="mustache",this.escaped=!i,this.hash=e;var n=this.id=t[0],s=this.params=t.slice(1),r=this.eligibleHelper=n.isSimple;this.isHelper=r&&(s.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,i,n,s){var r=function(e,i){if(e.original!==i.original)throw new t.Exception(e.original+" doesn't match "+i.original)};r(e.id,s),this.type="block",this.mustache=e,this.program=i,this.inverse=n,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var i="",n=[],s=0,r=0,o=e.length;o>r;r++){var a=e[r].part;if(i+=(e[r].separator||"")+a,".."===a||"."===a||"this"===a){if(n.length>0)throw new t.Exception("Invalid path: "+i);".."===a?s++:this.isScoped=!0}else n.push(a)}this.original=i,this.parts=n,this.string=n.join("."),this.depth=s,this.isSimple=1===e.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var o=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(t){for(var e=Error.prototype.constructor.apply(this,arguments),i=0;i<o.length;i++)this[o[i]]=e[o[i]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,l=/[&<>"'`]/,u=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),l.test(e)?e.replace(h,u):e)},isEmpty:function(t){return t||0===t?"[object Array]"===i.call(t)&&0===t.length?!0:!1:!0}};var c=t.Compiler=function(){},d=t.JavaScriptCompiler=function(){};c.prototype={compiler:c,disassemble:function(){for(var t,e,i,n=this.opcodes,s=[],r=0,o=n.length;o>r;r++)if(t=n[r],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)i=t.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var r=0;r<n.args.length;r++)if(n.args[r]!==s.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,i=t.statements;this.opcodes=[];for(var n=0,s=i.length;s>n;n++)e=i[n],this[e.type](e);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,r=i.depths.list.length;r>s;s++)e=i.depths.list[s],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=this.classifyMustache(e);"helper"===s?this.helperMustache(e,i,n):"simple"===s?(this.simpleMustache(e),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var s=0,r=n.length;r>s;s++)e=n[s],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,i=this.classifyMustache(t);"simple"===i?this.simpleMustache(t):"helper"===i?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,i){var n=t.id,s=n.parts[0],r=null!=e||null!=i;
this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,r)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",n.length,s)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var i=e.id.parts,n=0,s=i.length;s>n;n++)this.opcode("lookup",i[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw new Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}};var p=function(t){this.value=t};d.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":d.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,i,n,s){this.environment=e,this.options=i||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,i);var r,o=e.opcodes;for(this.i=0,v=o.length;this.i<v;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args);return this.createFunctionContext(s)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var i=this.stackVars.concat(this.registers.list);if(i.length>0&&(this.source[1]=this.source[1]+", "+i.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)s.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(!this.isChild){var h=t.COMPILER_REVISION,l=t.REVISION_CHANGES[h];a="this.compilerInfo = ["+h+",'"+l+"'];\n"+a}if(e)return s.push(a),Function.apply(this,s);var u="function "+(this.name||"")+"("+s.join(",")+") {\n  "+a+"}";return t.log(t.logger.DEBUG,u+"\n\n"),u},mergeSource:function(){for(var t,i="",n=0,s=this.source.length;s>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(i+="buffer += "+t+";\n  ",t=e),i+=r+"\n  ")}return i},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(t,e,!0),n=this.nameLookup("depth"+this.lastContext,e,"context");this.push(i.name+" || "+n),this.replaceStack(function(t){return t+" ? "+t+".call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();this.source.push("if ("+r+" = "+n+") { "+r+" = "+r+".call("+i.callParams+"); }"),this.source.push("else { "+r+" = "+s+"; "+r+" = typeof "+r+" === functionType ? "+r+".apply(depth0) : "+r+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+n+")")},compiler:d,compileChildren:function(t,e){for(var i,n,s=t.children,r=0,o=s.length;o>r;r++){i=s[r],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,s=[i.index,i.name,"data"],r=0,o=n.length;o>r;r++)e=n[r],1===e?s.push("depth0"):s.push("depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new p(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i="",n=this.isInline();if(n){var s=this.popStack(!0);if(s instanceof p)e=s.value;else{var r=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(r)+" = "+s+"),",e=this.topStack()}}else e=this.topStack();var o=t.call(this,e);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+o+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+i+o+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var n=t[e];n instanceof p?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();return!t&&i instanceof p?i.value:(e||this.stackSlot--,i)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof p?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[];this.setupParams(t,n,i);var s=this.nameLookup("helpers",e,"helper");return{params:n,name:s,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupParams:function(t,e,i){var n,s,r,o=[],a=[],h=[];o.push("hash:"+this.popStack()),s=this.popStack(),r=this.popStack(),(r||s)&&(r||(this.context.aliases.self="this",r="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),o.push("inverse:"+s),o.push("fn:"+r));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(h.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+h.join(",")+"]"),o.push("hashContexts:hashContexts"),o.push("hashTypes:hashTypes")),this.options.data&&o.push("data:data"),o="{"+o.join(",")+"}",i?(this.register("options",o),e.push("options")):e.push(o),e.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),g=d.RESERVED_WORDS={},m=0,v=f.length;v>m;m++)g[f[m]]=!0;d.isValidJavaScriptVariableName=function(t){return!d.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},t.precompile=function(e,i){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);i=i||{},"data"in i||(i.data=!0);var n=t.parse(e),s=(new c).compile(n,i);return(new d).compile(s,i)},t.compile=function(i,n){function s(){var s=t.parse(i),r=(new c).compile(s,n),o=(new d).compile(r,n,e,!0);return t.template(o)}if(null==i||"string"!=typeof i&&i.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);n=n||{},"data"in n||(n.data=!0);var r;return function(t,e){return r||(r=s()),r.call(this,t,e)}},t.VM={template:function(e){var i={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,i,n){var s=this.programs[e];return n?s=t.VM.program(e,i,n):s||(s=this.programs[e]=t.VM.program(e,i)),s},merge:function(e,i){var n=e||i;return e&&i&&(n={},t.Utils.extend(n,i),t.Utils.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,s){s=s||{};var r=e.call(i,t,n,s.helpers,s.partials,s.data),o=i.compilerInfo||[],a=o[0]||1,h=t.COMPILER_REVISION;if(a!==h){if(h>a){var l=t.REVISION_CHANGES[h],u=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return r}},programWithDepth:function(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(n))};return s.program=t,s.depth=n.length,s},program:function(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n},noop:function(){return""},invokePartial:function(i,n,s,r,o,a){var h={helpers:r,partials:o,data:a};if(i===e)throw new t.Exception("The partial "+n+" could not be found");if(i instanceof Function)return i(s,h);if(t.compile)return o[n]=t.compile(i,{data:a!==e}),o[n](s,h);throw new t.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars);